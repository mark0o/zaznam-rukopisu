<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=1000, height=800, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="https://flo.uri.sh/template/91592/v14/static/style.css">
    <base target="_top">
    <title>Flourish template: Sankey diagram</title>
</head>

<body>


    <script>window.Flourish = { "static_prefix": "https://flo.uri.sh/template/91592/v14/static", "environment": "live", "is_read_only": true, "metadata": { "show_internal_credit": false, "credit_text": "Made with Flourish â€¢ Create a Sankey diagram", "credit_url": "https://flourish.studio/visualisations/sankey-charts/" } };</script>
    <script>var template = function (t) {
            "use strict"; var e, n, r, i; "function" != typeof Object.assign && (Object.assign = function (t, e) { if (null == t) throw new TypeError("Cannot convert undefined or null to object"); for (var n = Object(t), r = 1; r < arguments.length; r++) { var i = arguments[r]; if (null != i) for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]) } return n }), Array.from || (Array.from = (e = Object.prototype.toString, n = function (t) { return "function" == typeof t || "[object Function]" === e.call(t) }, r = Math.pow(2, 53) - 1, i = function (t) { var e = function (t) { var e = Number(t); return isNaN(e) ? 0 : 0 !== e && isFinite(e) ? (e > 0 ? 1 : -1) * Math.floor(Math.abs(e)) : e }(t); return Math.min(Math.max(e, 0), r) }, function (t) { var e = Object(t); if (null == t) throw new TypeError("Array.from requires an array-like object - not null or undefined"); var r, o = arguments.length > 1 ? arguments[1] : void 0; if (void 0 !== o) { if (!n(o)) throw new TypeError("Array.from: when provided, the second argument must be a function"); arguments.length > 2 && (r = arguments[2]) } for (var a, l = i(e.length), s = n(this) ? Object(new this(l)) : new Array(l), u = 0; u < l;)a = e[u], s[u] = o ? void 0 === r ? o(a, u) : o.call(r, a, u) : a, u += 1; return s.length = l, s })); var o = {}, a = { mode: "alluvial", sorting_mode: "datasheet", node_sort_order: "ascending", iterations: 10, spread: "step", end_step: null, alignment: "justify", node_width: 20, node_padding: 5, top_padding: 8, bottom_padding: 8, color: {}, link_opacity: .8, background_opacity: .25, links_color_mode: "node", custom_node_color: null, facets: {}, facets_hide_empty: !0, height_mode: "aspect", facet_aspect: 1.5, label_mode: "outwards", label_outwards_max_width: 40, label_font_size: 1, label_facet_scaling: !0, label_color_mode: "fixed", label_color: null, label_color_links: null, label_bold: !1, label_outline: !0, label_outline_width: 33, label_show_values: !0, label_show_values_links: "focused", transition_duration: .5, intro_duration: 3, intro_ease_range: 20, layout: { screenreader_hide_primary: !1 }, formatting: {}, popup_type: "all", popup: { mode: "none", popup_custom_main: "{{#if IS_LINK}}\nThis is a link popup\n{{/if}}\n\n{{#if IS_NODE}}\nThis is a node popup\n{{/if}}", panel_custom_main: "{{#if IS_LINK}}\nThis is a link panel\n{{/if}}\n\n{{#if IS_NODE}}\nThis is a node panel\n{{/if}}" }, focus: null, filter: "", filter_show_all: !0, filter_show_all_text: "All", controls_container: {}, filter_controls: {}, dropdown_style: {}, controls_style: {}, button_style: {}, slider_style: {}, show_node_headings: !0, node_headings_font_size: 1, node_headings_padding: 0, node_headings_bold: !0, node_headings_hide_overlaps: !0, node_headings_max_width: 8, node_headings_color: "black", node_headings_overrides: "" }; var l = "http://www.w3.org/1999/xhtml", s = { svg: "http://www.w3.org/2000/svg", xhtml: l, xlink: "http://www.w3.org/1999/xlink", xml: "http://www.w3.org/XML/1998/namespace", xmlns: "http://www.w3.org/2000/xmlns/" }; function u(t) { var e = t += "", n = e.indexOf(":"); return n >= 0 && "xmlns" !== (e = t.slice(0, n)) && (t = t.slice(n + 1)), s.hasOwnProperty(e) ? { space: s[e], local: t } : t } function c(t) { return function () { var e = this.ownerDocument, n = this.namespaceURI; return n === l && e.documentElement.namespaceURI === l ? e.createElement(t) : e.createElementNS(n, t) } } function f(t) { return function () { return this.ownerDocument.createElementNS(t.space, t.local) } } function d(t) { var e = u(t); return (e.local ? f : c)(e) } function h() { } function p(t) { return null == t ? h : function () { return this.querySelector(t) } } function g() { return [] } function b(t) { return null == t ? g : function () { return this.querySelectorAll(t) } } function _(t) { return function () { return this.matches(t) } } function m(t) { return new Array(t.length) } function y(t, e) { this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = e } y.prototype = { constructor: y, appendChild: function (t) { return this._parent.insertBefore(t, this._next) }, insertBefore: function (t, e) { return this._parent.insertBefore(t, e) }, querySelector: function (t) { return this._parent.querySelector(t) }, querySelectorAll: function (t) { return this._parent.querySelectorAll(t) } }; function v(t, e, n, r, i, o) { for (var a, l = 0, s = e.length, u = o.length; l < u; ++l)(a = e[l]) ? (a.__data__ = o[l], r[l] = a) : n[l] = new y(t, o[l]); for (; l < s; ++l)(a = e[l]) && (i[l] = a) } function w(t, e, n, r, i, o, a) { var l, s, u, c = {}, f = e.length, d = o.length, h = new Array(f); for (l = 0; l < f; ++l)(s = e[l]) && (h[l] = u = "$" + a.call(s, s.__data__, l, e), u in c ? i[l] = s : c[u] = s); for (l = 0; l < d; ++l)(s = c[u = "$" + a.call(t, o[l], l, o)]) ? (r[l] = s, s.__data__ = o[l], c[u] = null) : n[l] = new y(t, o[l]); for (l = 0; l < f; ++l)(s = e[l]) && c[h[l]] === s && (i[l] = s) } function x(t, e) { return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN } function k(t) { return function () { this.removeAttribute(t) } } function M(t) { return function () { this.removeAttributeNS(t.space, t.local) } } function C(t, e) { return function () { this.setAttribute(t, e) } } function A(t, e) { return function () { this.setAttributeNS(t.space, t.local, e) } } function E(t, e) { return function () { var n = e.apply(this, arguments); null == n ? this.removeAttribute(t) : this.setAttribute(t, n) } } function T(t, e) { return function () { var n = e.apply(this, arguments); null == n ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, n) } } function N(t) { return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView } function S(t) { return function () { this.style.removeProperty(t) } } function F(t, e, n) { return function () { this.style.setProperty(t, e, n) } } function z(t, e, n) { return function () { var r = e.apply(this, arguments); null == r ? this.style.removeProperty(t) : this.style.setProperty(t, r, n) } } function D(t, e) { return t.style.getPropertyValue(e) || N(t).getComputedStyle(t, null).getPropertyValue(e) } function L(t) { return function () { delete this[t] } } function $(t, e) { return function () { this[t] = e } } function O(t, e) { return function () { var n = e.apply(this, arguments); null == n ? delete this[t] : this[t] = n } } function P(t) { return t.trim().split(/^|\s+/) } function U(t) { return t.classList || new j(t) } function j(t) { this._node = t, this._names = P(t.getAttribute("class") || "") } function H(t, e) { for (var n = U(t), r = -1, i = e.length; ++r < i;)n.add(e[r]) } function q(t, e) { for (var n = U(t), r = -1, i = e.length; ++r < i;)n.remove(e[r]) } function B(t) { return function () { H(this, t) } } function Y(t) { return function () { q(this, t) } } function R(t, e) { return function () { (e.apply(this, arguments) ? H : q)(this, t) } } function I() { this.textContent = "" } function W(t) { return function () { this.textContent = t } } function G(t) { return function () { var e = t.apply(this, arguments); this.textContent = null == e ? "" : e } } function V() { this.innerHTML = "" } function X(t) { return function () { this.innerHTML = t } } function Z(t) { return function () { var e = t.apply(this, arguments); this.innerHTML = null == e ? "" : e } } function Q() { this.nextSibling && this.parentNode.appendChild(this) } function J() { this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild) } function K() { return null } function tt() { var t = this.parentNode; t && t.removeChild(this) } function et() { var t = this.cloneNode(!1), e = this.parentNode; return e ? e.insertBefore(t, this.nextSibling) : t } function nt() { var t = this.cloneNode(!0), e = this.parentNode; return e ? e.insertBefore(t, this.nextSibling) : t } j.prototype = { add: function (t) { this._names.indexOf(t) < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" "))) }, remove: function (t) { var e = this._names.indexOf(t); e >= 0 && (this._names.splice(e, 1), this._node.setAttribute("class", this._names.join(" "))) }, contains: function (t) { return this._names.indexOf(t) >= 0 } }; var rt = {}, it = null; "undefined" != typeof document && ("onmouseenter" in document.documentElement || (rt = { mouseenter: "mouseover", mouseleave: "mouseout" })); function ot(t, e, n) { return t = at(t, e, n), function (e) { var n = e.relatedTarget; n && (n === this || 8 & n.compareDocumentPosition(this)) || t.call(this, e) } } function at(t, e, n) { return function (r) { var i = it; it = r; try { t.call(this, this.__data__, e, n) } finally { it = i } } } function lt(t) { return function () { var e = this.__on; if (e) { for (var n, r = 0, i = -1, o = e.length; r < o; ++r)n = e[r], t.type && n.type !== t.type || n.name !== t.name ? e[++i] = n : this.removeEventListener(n.type, n.listener, n.capture); ++i ? e.length = i : delete this.__on } } } function st(t, e, n) { var r = rt.hasOwnProperty(t.type) ? ot : at; return function (i, o, a) { var l, s = this.__on, u = r(e, o, a); if (s) for (var c = 0, f = s.length; c < f; ++c)if ((l = s[c]).type === t.type && l.name === t.name) return this.removeEventListener(l.type, l.listener, l.capture), this.addEventListener(l.type, l.listener = u, l.capture = n), void (l.value = e); this.addEventListener(t.type, u, n), l = { type: t.type, name: t.name, value: e, listener: u, capture: n }, s ? s.push(l) : this.__on = [l] } } function ut(t, e, n) { var r = N(t), i = r.CustomEvent; "function" == typeof i ? i = new i(e, n) : (i = r.document.createEvent("Event"), n ? (i.initEvent(e, n.bubbles, n.cancelable), i.detail = n.detail) : i.initEvent(e, !1, !1)), t.dispatchEvent(i) } function ct(t, e) { return function () { return ut(this, t, e) } } function ft(t, e) { return function () { return ut(this, t, e.apply(this, arguments)) } } var dt = [null]; function ht(t, e) { this._groups = t, this._parents = e } function pt() { return new ht([[document.documentElement]], dt) } function gt(t) { return "string" == typeof t ? new ht([[document.querySelector(t)]], [document.documentElement]) : new ht([[t]], dt) } ht.prototype = pt.prototype = { constructor: ht, select: function (t) { "function" != typeof t && (t = p(t)); for (var e = this._groups, n = e.length, r = new Array(n), i = 0; i < n; ++i)for (var o, a, l = e[i], s = l.length, u = r[i] = new Array(s), c = 0; c < s; ++c)(o = l[c]) && (a = t.call(o, o.__data__, c, l)) && ("__data__" in o && (a.__data__ = o.__data__), u[c] = a); return new ht(r, this._parents) }, selectAll: function (t) { "function" != typeof t && (t = b(t)); for (var e = this._groups, n = e.length, r = [], i = [], o = 0; o < n; ++o)for (var a, l = e[o], s = l.length, u = 0; u < s; ++u)(a = l[u]) && (r.push(t.call(a, a.__data__, u, l)), i.push(a)); return new ht(r, i) }, filter: function (t) { "function" != typeof t && (t = _(t)); for (var e = this._groups, n = e.length, r = new Array(n), i = 0; i < n; ++i)for (var o, a = e[i], l = a.length, s = r[i] = [], u = 0; u < l; ++u)(o = a[u]) && t.call(o, o.__data__, u, a) && s.push(o); return new ht(r, this._parents) }, data: function (t, e) { if (!t) return h = new Array(this.size()), u = -1, this.each((function (t) { h[++u] = t })), h; var n = e ? w : v, r = this._parents, i = this._groups; "function" != typeof t && (t = function (t) { return function () { return t } }(t)); for (var o = i.length, a = new Array(o), l = new Array(o), s = new Array(o), u = 0; u < o; ++u) { var c = r[u], f = i[u], d = f.length, h = t.call(c, c && c.__data__, u, r), p = h.length, g = l[u] = new Array(p), b = a[u] = new Array(p); n(c, f, g, b, s[u] = new Array(d), h, e); for (var _, m, y = 0, x = 0; y < p; ++y)if (_ = g[y]) { for (y >= x && (x = y + 1); !(m = b[x]) && ++x < p;); _._next = m || null } } return (a = new ht(a, r))._enter = l, a._exit = s, a }, enter: function () { return new ht(this._enter || this._groups.map(m), this._parents) }, exit: function () { return new ht(this._exit || this._groups.map(m), this._parents) }, join: function (t, e, n) { var r = this.enter(), i = this, o = this.exit(); return r = "function" == typeof t ? t(r) : r.append(t + ""), null != e && (i = e(i)), null == n ? o.remove() : n(o), r && i ? r.merge(i).order() : i }, merge: function (t) { for (var e = this._groups, n = t._groups, r = e.length, i = n.length, o = Math.min(r, i), a = new Array(r), l = 0; l < o; ++l)for (var s, u = e[l], c = n[l], f = u.length, d = a[l] = new Array(f), h = 0; h < f; ++h)(s = u[h] || c[h]) && (d[h] = s); for (; l < r; ++l)a[l] = e[l]; return new ht(a, this._parents) }, order: function () { for (var t = this._groups, e = -1, n = t.length; ++e < n;)for (var r, i = t[e], o = i.length - 1, a = i[o]; --o >= 0;)(r = i[o]) && (a && 4 ^ r.compareDocumentPosition(a) && a.parentNode.insertBefore(r, a), a = r); return this }, sort: function (t) { function e(e, n) { return e && n ? t(e.__data__, n.__data__) : !e - !n } t || (t = x); for (var n = this._groups, r = n.length, i = new Array(r), o = 0; o < r; ++o) { for (var a, l = n[o], s = l.length, u = i[o] = new Array(s), c = 0; c < s; ++c)(a = l[c]) && (u[c] = a); u.sort(e) } return new ht(i, this._parents).order() }, call: function () { var t = arguments[0]; return arguments[0] = this, t.apply(null, arguments), this }, nodes: function () { var t = new Array(this.size()), e = -1; return this.each((function () { t[++e] = this })), t }, node: function () { for (var t = this._groups, e = 0, n = t.length; e < n; ++e)for (var r = t[e], i = 0, o = r.length; i < o; ++i) { var a = r[i]; if (a) return a } return null }, size: function () { var t = 0; return this.each((function () { ++t })), t }, empty: function () { return !this.node() }, each: function (t) { for (var e = this._groups, n = 0, r = e.length; n < r; ++n)for (var i, o = e[n], a = 0, l = o.length; a < l; ++a)(i = o[a]) && t.call(i, i.__data__, a, o); return this }, attr: function (t, e) { var n = u(t); if (arguments.length < 2) { var r = this.node(); return n.local ? r.getAttributeNS(n.space, n.local) : r.getAttribute(n) } return this.each((null == e ? n.local ? M : k : "function" == typeof e ? n.local ? T : E : n.local ? A : C)(n, e)) }, style: function (t, e, n) { return arguments.length > 1 ? this.each((null == e ? S : "function" == typeof e ? z : F)(t, e, null == n ? "" : n)) : D(this.node(), t) }, property: function (t, e) { return arguments.length > 1 ? this.each((null == e ? L : "function" == typeof e ? O : $)(t, e)) : this.node()[t] }, classed: function (t, e) { var n = P(t + ""); if (arguments.length < 2) { for (var r = U(this.node()), i = -1, o = n.length; ++i < o;)if (!r.contains(n[i])) return !1; return !0 } return this.each(("function" == typeof e ? R : e ? B : Y)(n, e)) }, text: function (t) { return arguments.length ? this.each(null == t ? I : ("function" == typeof t ? G : W)(t)) : this.node().textContent }, html: function (t) { return arguments.length ? this.each(null == t ? V : ("function" == typeof t ? Z : X)(t)) : this.node().innerHTML }, raise: function () { return this.each(Q) }, lower: function () { return this.each(J) }, append: function (t) { var e = "function" == typeof t ? t : d(t); return this.select((function () { return this.appendChild(e.apply(this, arguments)) })) }, insert: function (t, e) { var n = "function" == typeof t ? t : d(t), r = null == e ? K : "function" == typeof e ? e : p(e); return this.select((function () { return this.insertBefore(n.apply(this, arguments), r.apply(this, arguments) || null) })) }, remove: function () { return this.each(tt) }, clone: function (t) { return this.select(t ? nt : et) }, datum: function (t) { return arguments.length ? this.property("__data__", t) : this.node().__data__ }, on: function (t, e, n) { var r, i, o = function (t) { return t.trim().split(/^|\s+/).map((function (t) { var e = "", n = t.indexOf("."); return n >= 0 && (e = t.slice(n + 1), t = t.slice(0, n)), { type: t, name: e } })) }(t + ""), a = o.length; if (!(arguments.length < 2)) { for (l = e ? st : lt, null == n && (n = !1), r = 0; r < a; ++r)this.each(l(o[r], e, n)); return this } var l = this.node().__on; if (l) for (var s, u = 0, c = l.length; u < c; ++u)for (r = 0, s = l[u]; r < a; ++r)if ((i = o[r]).type === s.type && i.name === s.name) return s.value }, dispatch: function (t, e) { return this.each(("function" == typeof e ? ft : ct)(t, e)) } }; var bt = { value: function () { } }; function _t() { for (var t, e = 0, n = arguments.length, r = {}; e < n; ++e) { if (!(t = arguments[e] + "") || t in r || /[\s.]/.test(t)) throw new Error("illegal type: " + t); r[t] = [] } return new mt(r) } function mt(t) { this._ = t } function yt(t, e) { for (var n, r = 0, i = t.length; r < i; ++r)if ((n = t[r]).name === e) return n.value } function vt(t, e, n) { for (var r = 0, i = t.length; r < i; ++r)if (t[r].name === e) { t[r] = bt, t = t.slice(0, r).concat(t.slice(r + 1)); break } return null != n && t.push({ name: e, value: n }), t } mt.prototype = _t.prototype = { constructor: mt, on: function (t, e) { var n, r, i = this._, o = (r = i, (t + "").trim().split(/^|\s+/).map((function (t) { var e = "", n = t.indexOf("."); if (n >= 0 && (e = t.slice(n + 1), t = t.slice(0, n)), t && !r.hasOwnProperty(t)) throw new Error("unknown type: " + t); return { type: t, name: e } }))), a = -1, l = o.length; if (!(arguments.length < 2)) { if (null != e && "function" != typeof e) throw new Error("invalid callback: " + e); for (; ++a < l;)if (n = (t = o[a]).type) i[n] = vt(i[n], t.name, e); else if (null == e) for (n in i) i[n] = vt(i[n], t.name, null); return this } for (; ++a < l;)if ((n = (t = o[a]).type) && (n = yt(i[n], t.name))) return n }, copy: function () { var t = {}, e = this._; for (var n in e) t[n] = e[n].slice(); return new mt(t) }, call: function (t, e) { if ((n = arguments.length - 2) > 0) for (var n, r, i = new Array(n), o = 0; o < n; ++o)i[o] = arguments[o + 2]; if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t); for (o = 0, n = (r = this._[t]).length; o < n; ++o)r[o].value.apply(e, i) }, apply: function (t, e, n) { if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t); for (var r = this._[t], i = 0, o = r.length; i < o; ++i)r[i].value.apply(e, n) } }; var wt, xt, kt = 0, Mt = 0, Ct = 0, At = 0, Et = 0, Tt = 0, Nt = "object" == typeof performance && performance.now ? performance : Date, St = "object" == typeof window && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (t) { setTimeout(t, 17) }; function Ft() { return Et || (St(zt), Et = Nt.now() + Tt) } function zt() { Et = 0 } function Dt() { this._call = this._time = this._next = null } function Lt(t, e, n) { var r = new Dt; return r.restart(t, e, n), r } function $t() { Ft(), ++kt; for (var t, e = wt; e;)(t = Et - e._time) >= 0 && e._call.call(null, t), e = e._next; --kt } function Ot() { Et = (At = Nt.now()) + Tt, kt = Mt = 0; try { $t() } finally { kt = 0, function () { var t, e, n = wt, r = 1 / 0; for (; n;)n._call ? (r > n._time && (r = n._time), t = n, n = n._next) : (e = n._next, n._next = null, n = t ? t._next = e : wt = e); xt = t, Ut(r) }(), Et = 0 } } function Pt() { var t = Nt.now(), e = t - At; e > 1e3 && (Tt -= e, At = t) } function Ut(t) { kt || (Mt && (Mt = clearTimeout(Mt)), t - Et > 24 ? (t < 1 / 0 && (Mt = setTimeout(Ot, t - Nt.now() - Tt)), Ct && (Ct = clearInterval(Ct))) : (Ct || (At = Nt.now(), Ct = setInterval(Pt, 1e3)), kt = 1, St(Ot))) } function jt(t, e, n) { var r = new Dt; return e = null == e ? 0 : +e, r.restart((function (n) { r.stop(), t(n + e) }), e, n), r } Dt.prototype = Lt.prototype = { constructor: Dt, restart: function (t, e, n) { if ("function" != typeof t) throw new TypeError("callback is not a function"); n = (null == n ? Ft() : +n) + (null == e ? 0 : +e), this._next || xt === this || (xt ? xt._next = this : wt = this, xt = this), this._call = t, this._time = n, Ut() }, stop: function () { this._call && (this._call = null, this._time = 1 / 0, Ut()) } }; var Ht = _t("start", "end", "cancel", "interrupt"), qt = []; function Bt(t, e, n, r, i, o) { var a = t.__transition; if (a) { if (n in a) return } else t.__transition = {}; !function (t, e, n) { var r, i = t.__transition; function o(t) { n.state = 1, n.timer.restart(a, n.delay, n.time), n.delay <= t && a(t - n.delay) } function a(o) { var u, c, f, d; if (1 !== n.state) return s(); for (u in i) if ((d = i[u]).name === n.name) { if (3 === d.state) return jt(a); 4 === d.state ? (d.state = 6, d.timer.stop(), d.on.call("interrupt", t, t.__data__, d.index, d.group), delete i[u]) : +u < e && (d.state = 6, d.timer.stop(), d.on.call("cancel", t, t.__data__, d.index, d.group), delete i[u]) } if (jt((function () { 3 === n.state && (n.state = 4, n.timer.restart(l, n.delay, n.time), l(o)) })), n.state = 2, n.on.call("start", t, t.__data__, n.index, n.group), 2 === n.state) { for (n.state = 3, r = new Array(f = n.tween.length), u = 0, c = -1; u < f; ++u)(d = n.tween[u].value.call(t, t.__data__, n.index, n.group)) && (r[++c] = d); r.length = c + 1 } } function l(e) { for (var i = e < n.duration ? n.ease.call(null, e / n.duration) : (n.timer.restart(s), n.state = 5, 1), o = -1, a = r.length; ++o < a;)r[o].call(t, i); 5 === n.state && (n.on.call("end", t, t.__data__, n.index, n.group), s()) } function s() { for (var r in n.state = 6, n.timer.stop(), delete i[e], i) return; delete t.__transition } i[e] = n, n.timer = Lt(o, 0, n.time) }(t, n, { name: e, index: r, group: i, on: Ht, tween: qt, time: o.time, delay: o.delay, duration: o.duration, ease: o.ease, timer: null, state: 0 }) } function Yt(t, e) { var n = It(t, e); if (n.state > 0) throw new Error("too late; already scheduled"); return n } function Rt(t, e) { var n = It(t, e); if (n.state > 3) throw new Error("too late; already running"); return n } function It(t, e) { var n = t.__transition; if (!n || !(n = n[e])) throw new Error("transition not found"); return n } function Wt(t, e, n) { t.prototype = e.prototype = n, n.constructor = t } function Gt(t, e) { var n = Object.create(t.prototype); for (var r in e) n[r] = e[r]; return n } function Vt() { } var Xt = .7, Zt = 1 / Xt, Qt = "\\s*([+-]?\\d+)\\s*", Jt = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*", Kt = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*", te = /^#([0-9a-f]{3,8})$/, ee = new RegExp("^rgb\\(" + [Qt, Qt, Qt] + "\\)$"), ne = new RegExp("^rgb\\(" + [Kt, Kt, Kt] + "\\)$"), re = new RegExp("^rgba\\(" + [Qt, Qt, Qt, Jt] + "\\)$"), ie = new RegExp("^rgba\\(" + [Kt, Kt, Kt, Jt] + "\\)$"), oe = new RegExp("^hsl\\(" + [Jt, Kt, Kt] + "\\)$"), ae = new RegExp("^hsla\\(" + [Jt, Kt, Kt, Jt] + "\\)$"), le = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; function se() { return this.rgb().formatHex() } function ue() { return this.rgb().formatRgb() } function ce(t) { var e, n; return t = (t + "").trim().toLowerCase(), (e = te.exec(t)) ? (n = e[1].length, e = parseInt(e[1], 16), 6 === n ? fe(e) : 3 === n ? new ge(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, (15 & e) << 4 | 15 & e, 1) : 8 === n ? de(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (255 & e) / 255) : 4 === n ? de(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, ((15 & e) << 4 | 15 & e) / 255) : null) : (e = ee.exec(t)) ? new ge(e[1], e[2], e[3], 1) : (e = ne.exec(t)) ? new ge(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, 1) : (e = re.exec(t)) ? de(e[1], e[2], e[3], e[4]) : (e = ie.exec(t)) ? de(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, e[4]) : (e = oe.exec(t)) ? ye(e[1], e[2] / 100, e[3] / 100, 1) : (e = ae.exec(t)) ? ye(e[1], e[2] / 100, e[3] / 100, e[4]) : le.hasOwnProperty(t) ? fe(le[t]) : "transparent" === t ? new ge(NaN, NaN, NaN, 0) : null } function fe(t) { return new ge(t >> 16 & 255, t >> 8 & 255, 255 & t, 1) } function de(t, e, n, r) { return r <= 0 && (t = e = n = NaN), new ge(t, e, n, r) } function he(t) { return t instanceof Vt || (t = ce(t)), t ? new ge((t = t.rgb()).r, t.g, t.b, t.opacity) : new ge } function pe(t, e, n, r) { return 1 === arguments.length ? he(t) : new ge(t, e, n, null == r ? 1 : r) } function ge(t, e, n, r) { this.r = +t, this.g = +e, this.b = +n, this.opacity = +r } function be() { return "#" + me(this.r) + me(this.g) + me(this.b) } function _e() { var t = this.opacity; return (1 === (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))) ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (1 === t ? ")" : ", " + t + ")") } function me(t) { return ((t = Math.max(0, Math.min(255, Math.round(t) || 0))) < 16 ? "0" : "") + t.toString(16) } function ye(t, e, n, r) { return r <= 0 ? t = e = n = NaN : n <= 0 || n >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new xe(t, e, n, r) } function ve(t) { if (t instanceof xe) return new xe(t.h, t.s, t.l, t.opacity); if (t instanceof Vt || (t = ce(t)), !t) return new xe; if (t instanceof xe) return t; var e = (t = t.rgb()).r / 255, n = t.g / 255, r = t.b / 255, i = Math.min(e, n, r), o = Math.max(e, n, r), a = NaN, l = o - i, s = (o + i) / 2; return l ? (a = e === o ? (n - r) / l + 6 * (n < r) : n === o ? (r - e) / l + 2 : (e - n) / l + 4, l /= s < .5 ? o + i : 2 - o - i, a *= 60) : l = s > 0 && s < 1 ? 0 : a, new xe(a, l, s, t.opacity) } function we(t, e, n, r) { return 1 === arguments.length ? ve(t) : new xe(t, e, n, null == r ? 1 : r) } function xe(t, e, n, r) { this.h = +t, this.s = +e, this.l = +n, this.opacity = +r } function ke(t, e, n) { return 255 * (t < 60 ? e + (n - e) * t / 60 : t < 180 ? n : t < 240 ? e + (n - e) * (240 - t) / 60 : e) } Wt(Vt, ce, { copy: function (t) { return Object.assign(new this.constructor, this, t) }, displayable: function () { return this.rgb().displayable() }, hex: se, formatHex: se, formatHsl: function () { return ve(this).formatHsl() }, formatRgb: ue, toString: ue }), Wt(ge, pe, Gt(Vt, { brighter: function (t) { return t = null == t ? Zt : Math.pow(Zt, t), new ge(this.r * t, this.g * t, this.b * t, this.opacity) }, darker: function (t) { return t = null == t ? Xt : Math.pow(Xt, t), new ge(this.r * t, this.g * t, this.b * t, this.opacity) }, rgb: function () { return this }, displayable: function () { return -.5 <= this.r && this.r < 255.5 && -.5 <= this.g && this.g < 255.5 && -.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1 }, hex: be, formatHex: be, formatRgb: _e, toString: _e })), Wt(xe, we, Gt(Vt, { brighter: function (t) { return t = null == t ? Zt : Math.pow(Zt, t), new xe(this.h, this.s, this.l * t, this.opacity) }, darker: function (t) { return t = null == t ? Xt : Math.pow(Xt, t), new xe(this.h, this.s, this.l * t, this.opacity) }, rgb: function () { var t = this.h % 360 + 360 * (this.h < 0), e = isNaN(t) || isNaN(this.s) ? 0 : this.s, n = this.l, r = n + (n < .5 ? n : 1 - n) * e, i = 2 * n - r; return new ge(ke(t >= 240 ? t - 240 : t + 120, i, r), ke(t, i, r), ke(t < 120 ? t + 240 : t - 120, i, r), this.opacity) }, displayable: function () { return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1 }, formatHsl: function () { var t = this.opacity; return (1 === (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))) ? "hsl(" : "hsla(") + (this.h || 0) + ", " + 100 * (this.s || 0) + "%, " + 100 * (this.l || 0) + "%" + (1 === t ? ")" : ", " + t + ")") } })); var Me = Math.PI / 180, Ce = 180 / Math.PI, Ae = .96422, Ee = .82521, Te = 4 / 29, Ne = 6 / 29, Se = 3 * Ne * Ne, Fe = Ne * Ne * Ne; function ze(t) { if (t instanceof Le) return new Le(t.l, t.a, t.b, t.opacity); if (t instanceof He) return qe(t); t instanceof ge || (t = he(t)); var e, n, r = Ue(t.r), i = Ue(t.g), o = Ue(t.b), a = $e((.2225045 * r + .7168786 * i + .0606169 * o) / 1); return r === i && i === o ? e = n = a : (e = $e((.4360747 * r + .3850649 * i + .1430804 * o) / Ae), n = $e((.0139322 * r + .0971045 * i + .7141733 * o) / Ee)), new Le(116 * a - 16, 500 * (e - a), 200 * (a - n), t.opacity) } function De(t, e, n, r) { return 1 === arguments.length ? ze(t) : new Le(t, e, n, null == r ? 1 : r) } function Le(t, e, n, r) { this.l = +t, this.a = +e, this.b = +n, this.opacity = +r } function $e(t) { return t > Fe ? Math.pow(t, 1 / 3) : t / Se + Te } function Oe(t) { return t > Ne ? t * t * t : Se * (t - Te) } function Pe(t) { return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055) } function Ue(t) { return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4) } function je(t, e, n, r) { return 1 === arguments.length ? function (t) { if (t instanceof He) return new He(t.h, t.c, t.l, t.opacity); if (t instanceof Le || (t = ze(t)), 0 === t.a && 0 === t.b) return new He(NaN, 0 < t.l && t.l < 100 ? 0 : NaN, t.l, t.opacity); var e = Math.atan2(t.b, t.a) * Ce; return new He(e < 0 ? e + 360 : e, Math.sqrt(t.a * t.a + t.b * t.b), t.l, t.opacity) }(t) : new He(t, e, n, null == r ? 1 : r) } function He(t, e, n, r) { this.h = +t, this.c = +e, this.l = +n, this.opacity = +r } function qe(t) { if (isNaN(t.h)) return new Le(t.l, 0, 0, t.opacity); var e = t.h * Me; return new Le(t.l, Math.cos(e) * t.c, Math.sin(e) * t.c, t.opacity) } Wt(Le, De, Gt(Vt, { brighter: function (t) { return new Le(this.l + 18 * (null == t ? 1 : t), this.a, this.b, this.opacity) }, darker: function (t) { return new Le(this.l - 18 * (null == t ? 1 : t), this.a, this.b, this.opacity) }, rgb: function () { var t = (this.l + 16) / 116, e = isNaN(this.a) ? t : t + this.a / 500, n = isNaN(this.b) ? t : t - this.b / 200; return new ge(Pe(3.1338561 * (e = Ae * Oe(e)) - 1.6168667 * (t = 1 * Oe(t)) - .4906146 * (n = Ee * Oe(n))), Pe(-.9787684 * e + 1.9161415 * t + .033454 * n), Pe(.0719453 * e - .2289914 * t + 1.4052427 * n), this.opacity) } })), Wt(He, je, Gt(Vt, { brighter: function (t) { return new He(this.h, this.c, this.l + 18 * (null == t ? 1 : t), this.opacity) }, darker: function (t) { return new He(this.h, this.c, this.l - 18 * (null == t ? 1 : t), this.opacity) }, rgb: function () { return qe(this).rgb() } })); var Be = -.14861, Ye = 1.78277, Re = -.29227, Ie = -.90649, We = 1.97294, Ge = We * Ie, Ve = We * Ye, Xe = Ye * Re - Ie * Be; function Ze(t, e, n, r) { return 1 === arguments.length ? function (t) { if (t instanceof Qe) return new Qe(t.h, t.s, t.l, t.opacity); t instanceof ge || (t = he(t)); var e = t.r / 255, n = t.g / 255, r = t.b / 255, i = (Xe * r + Ge * e - Ve * n) / (Xe + Ge - Ve), o = r - i, a = (We * (n - i) - Re * o) / Ie, l = Math.sqrt(a * a + o * o) / (We * i * (1 - i)), s = l ? Math.atan2(a, o) * Ce - 120 : NaN; return new Qe(s < 0 ? s + 360 : s, l, i, t.opacity) }(t) : new Qe(t, e, n, null == r ? 1 : r) } function Qe(t, e, n, r) { this.h = +t, this.s = +e, this.l = +n, this.opacity = +r } function Je(t) { return function () { return t } } function Ke(t, e) { return function (n) { return t + n * e } } function tn(t, e) { var n = e - t; return n ? Ke(t, n > 180 || n < -180 ? n - 360 * Math.round(n / 360) : n) : Je(isNaN(t) ? e : t) } function en(t) { return 1 == (t = +t) ? nn : function (e, n) { return n - e ? function (t, e, n) { return t = Math.pow(t, n), e = Math.pow(e, n) - t, n = 1 / n, function (r) { return Math.pow(t + r * e, n) } }(e, n, t) : Je(isNaN(e) ? n : e) } } function nn(t, e) { var n = e - t; return n ? Ke(t, n) : Je(isNaN(t) ? e : t) } Wt(Qe, Ze, Gt(Vt, { brighter: function (t) { return t = null == t ? Zt : Math.pow(Zt, t), new Qe(this.h, this.s, this.l * t, this.opacity) }, darker: function (t) { return t = null == t ? Xt : Math.pow(Xt, t), new Qe(this.h, this.s, this.l * t, this.opacity) }, rgb: function () { var t = isNaN(this.h) ? 0 : (this.h + 120) * Me, e = +this.l, n = isNaN(this.s) ? 0 : this.s * e * (1 - e), r = Math.cos(t), i = Math.sin(t); return new ge(255 * (e + n * (Be * r + Ye * i)), 255 * (e + n * (Re * r + Ie * i)), 255 * (e + n * (We * r)), this.opacity) } })); var rn = function t(e) { var n = en(e); function r(t, e) { var r = n((t = pe(t)).r, (e = pe(e)).r), i = n(t.g, e.g), o = n(t.b, e.b), a = nn(t.opacity, e.opacity); return function (e) { return t.r = r(e), t.g = i(e), t.b = o(e), t.opacity = a(e), t + "" } } return r.gamma = t, r }(1); var on, an = (on = function (t) { var e = t.length - 1; return function (n) { var r = n <= 0 ? n = 0 : n >= 1 ? (n = 1, e - 1) : Math.floor(n * e), i = t[r], o = t[r + 1], a = r > 0 ? t[r - 1] : 2 * i - o, l = r < e - 1 ? t[r + 2] : 2 * o - i; return function (t, e, n, r, i) { var o = t * t, a = o * t; return ((1 - 3 * t + 3 * o - a) * e + (4 - 6 * o + 3 * a) * n + (1 + 3 * t + 3 * o - 3 * a) * r + a * i) / 6 }((n - r / e) * e, a, i, o, l) } }, function (t) { var e, n, r = t.length, i = new Array(r), o = new Array(r), a = new Array(r); for (e = 0; e < r; ++e)n = pe(t[e]), i[e] = n.r || 0, o[e] = n.g || 0, a[e] = n.b || 0; return i = on(i), o = on(o), a = on(a), n.opacity = 1, function (t) { return n.r = i(t), n.g = o(t), n.b = a(t), n + "" } }); function ln(t, e) { e || (e = []); var n, r = t ? Math.min(e.length, t.length) : 0, i = e.slice(); return function (o) { for (n = 0; n < r; ++n)i[n] = t[n] * (1 - o) + e[n] * o; return i } } function sn(t, e) { var n, r = e ? e.length : 0, i = t ? Math.min(r, t.length) : 0, o = new Array(i), a = new Array(r); for (n = 0; n < i; ++n)o[n] = gn(t[n], e[n]); for (; n < r; ++n)a[n] = e[n]; return function (t) { for (n = 0; n < i; ++n)a[n] = o[n](t); return a } } function un(t, e) { var n = new Date; return t = +t, e = +e, function (r) { return n.setTime(t * (1 - r) + e * r), n } } function cn(t, e) { return t = +t, e = +e, function (n) { return t * (1 - n) + e * n } } function fn(t, e) { var n, r = {}, i = {}; for (n in null !== t && "object" == typeof t || (t = {}), null !== e && "object" == typeof e || (e = {}), e) n in t ? r[n] = gn(t[n], e[n]) : i[n] = e[n]; return function (t) { for (n in r) i[n] = r[n](t); return i } } var dn = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, hn = new RegExp(dn.source, "g"); function pn(t, e) { var n, r, i, o = dn.lastIndex = hn.lastIndex = 0, a = -1, l = [], s = []; for (t += "", e += ""; (n = dn.exec(t)) && (r = hn.exec(e));)(i = r.index) > o && (i = e.slice(o, i), l[a] ? l[a] += i : l[++a] = i), (n = n[0]) === (r = r[0]) ? l[a] ? l[a] += r : l[++a] = r : (l[++a] = null, s.push({ i: a, x: cn(n, r) })), o = hn.lastIndex; return o < e.length && (i = e.slice(o), l[a] ? l[a] += i : l[++a] = i), l.length < 2 ? s[0] ? function (t) { return function (e) { return t(e) + "" } }(s[0].x) : function (t) { return function () { return t } }(e) : (e = s.length, function (t) { for (var n, r = 0; r < e; ++r)l[(n = s[r]).i] = n.x(t); return l.join("") }) } function gn(t, e) { var n, r = typeof e; return null == e || "boolean" === r ? Je(e) : ("number" === r ? cn : "string" === r ? (n = ce(e)) ? (e = n, rn) : pn : e instanceof ce ? rn : e instanceof Date ? un : function (t) { return ArrayBuffer.isView(t) && !(t instanceof DataView) }(e) ? ln : Array.isArray(e) ? sn : "function" != typeof e.valueOf && "function" != typeof e.toString || isNaN(e) ? fn : cn)(t, e) } function bn(t, e) { return t = +t, e = +e, function (n) { return Math.round(t * (1 - n) + e * n) } } var _n, mn, yn, vn, wn = 180 / Math.PI, xn = { translateX: 0, translateY: 0, rotate: 0, skewX: 0, scaleX: 1, scaleY: 1 }; function kn(t, e, n, r, i, o) { var a, l, s; return (a = Math.sqrt(t * t + e * e)) && (t /= a, e /= a), (s = t * n + e * r) && (n -= t * s, r -= e * s), (l = Math.sqrt(n * n + r * r)) && (n /= l, r /= l, s /= l), t * r < e * n && (t = -t, e = -e, s = -s, a = -a), { translateX: i, translateY: o, rotate: Math.atan2(e, t) * wn, skewX: Math.atan(s) * wn, scaleX: a, scaleY: l } } function Mn(t, e, n, r) { function i(t) { return t.length ? t.pop() + " " : "" } return function (o, a) { var l = [], s = []; return o = t(o), a = t(a), function (t, r, i, o, a, l) { if (t !== i || r !== o) { var s = a.push("translate(", null, e, null, n); l.push({ i: s - 4, x: cn(t, i) }, { i: s - 2, x: cn(r, o) }) } else (i || o) && a.push("translate(" + i + e + o + n) }(o.translateX, o.translateY, a.translateX, a.translateY, l, s), function (t, e, n, o) { t !== e ? (t - e > 180 ? e += 360 : e - t > 180 && (t += 360), o.push({ i: n.push(i(n) + "rotate(", null, r) - 2, x: cn(t, e) })) : e && n.push(i(n) + "rotate(" + e + r) }(o.rotate, a.rotate, l, s), function (t, e, n, o) { t !== e ? o.push({ i: n.push(i(n) + "skewX(", null, r) - 2, x: cn(t, e) }) : e && n.push(i(n) + "skewX(" + e + r) }(o.skewX, a.skewX, l, s), function (t, e, n, r, o, a) { if (t !== n || e !== r) { var l = o.push(i(o) + "scale(", null, ",", null, ")"); a.push({ i: l - 4, x: cn(t, n) }, { i: l - 2, x: cn(e, r) }) } else 1 === n && 1 === r || o.push(i(o) + "scale(" + n + "," + r + ")") }(o.scaleX, o.scaleY, a.scaleX, a.scaleY, l, s), o = a = null, function (t) { for (var e, n = -1, r = s.length; ++n < r;)l[(e = s[n]).i] = e.x(t); return l.join("") } } } var Cn = Mn((function (t) { return "none" === t ? xn : (_n || (_n = document.createElement("DIV"), mn = document.documentElement, yn = document.defaultView), _n.style.transform = t, t = yn.getComputedStyle(mn.appendChild(_n), null).getPropertyValue("transform"), mn.removeChild(_n), kn(+(t = t.slice(7, -1).split(","))[0], +t[1], +t[2], +t[3], +t[4], +t[5])) }), "px, ", "px)", "deg)"), An = Mn((function (t) { return null == t ? xn : (vn || (vn = document.createElementNS("http://www.w3.org/2000/svg", "g")), vn.setAttribute("transform", t), (t = vn.transform.baseVal.consolidate()) ? kn((t = t.matrix).a, t.b, t.c, t.d, t.e, t.f) : xn) }), ", ", ")", ")"); var En = function (t) { return function (e, n) { var r = t((e = we(e)).h, (n = we(n)).h), i = nn(e.s, n.s), o = nn(e.l, n.l), a = nn(e.opacity, n.opacity); return function (t) { return e.h = r(t), e.s = i(t), e.l = o(t), e.opacity = a(t), e + "" } } }(tn); function Tn(t, e) { var n = nn((t = De(t)).l, (e = De(e)).l), r = nn(t.a, e.a), i = nn(t.b, e.b), o = nn(t.opacity, e.opacity); return function (e) { return t.l = n(e), t.a = r(e), t.b = i(e), t.opacity = o(e), t + "" } } var Nn = function (t) { return function (e, n) { var r = t((e = je(e)).h, (n = je(n)).h), i = nn(e.c, n.c), o = nn(e.l, n.l), a = nn(e.opacity, n.opacity); return function (t) { return e.h = r(t), e.c = i(t), e.l = o(t), e.opacity = a(t), e + "" } } }(tn); function Sn(t) { return function e(n) { function r(e, r) { var i = t((e = Ze(e)).h, (r = Ze(r)).h), o = nn(e.s, r.s), a = nn(e.l, r.l), l = nn(e.opacity, r.opacity); return function (t) { return e.h = i(t), e.s = o(t), e.l = a(Math.pow(t, n)), e.opacity = l(t), e + "" } } return n = +n, r.gamma = e, r }(1) } Sn(tn); var Fn = Sn(nn); function zn(t, e) { var n, r; return function () { var i = Rt(this, t), o = i.tween; if (o !== n) for (var a = 0, l = (r = n = o).length; a < l; ++a)if (r[a].name === e) { (r = r.slice()).splice(a, 1); break } i.tween = r } } function Dn(t, e, n) { var r, i; if ("function" != typeof n) throw new Error; return function () { var o = Rt(this, t), a = o.tween; if (a !== r) { i = (r = a).slice(); for (var l = { name: e, value: n }, s = 0, u = i.length; s < u; ++s)if (i[s].name === e) { i[s] = l; break } s === u && i.push(l) } o.tween = i } } function Ln(t, e, n) { var r = t._id; return t.each((function () { var t = Rt(this, r); (t.value || (t.value = {}))[e] = n.apply(this, arguments) })), function (t) { return It(t, r).value[e] } } function $n(t, e) { var n; return ("number" == typeof e ? cn : e instanceof ce ? rn : (n = ce(e)) ? (e = n, rn) : pn)(t, e) } function On(t) { return function () { this.removeAttribute(t) } } function Pn(t) { return function () { this.removeAttributeNS(t.space, t.local) } } function Un(t, e, n) { var r, i, o = n + ""; return function () { var a = this.getAttribute(t); return a === o ? null : a === r ? i : i = e(r = a, n) } } function jn(t, e, n) { var r, i, o = n + ""; return function () { var a = this.getAttributeNS(t.space, t.local); return a === o ? null : a === r ? i : i = e(r = a, n) } } function Hn(t, e, n) { var r, i, o; return function () { var a, l, s = n(this); if (null != s) return (a = this.getAttribute(t)) === (l = s + "") ? null : a === r && l === i ? o : (i = l, o = e(r = a, s)); this.removeAttribute(t) } } function qn(t, e, n) { var r, i, o; return function () { var a, l, s = n(this); if (null != s) return (a = this.getAttributeNS(t.space, t.local)) === (l = s + "") ? null : a === r && l === i ? o : (i = l, o = e(r = a, s)); this.removeAttributeNS(t.space, t.local) } } function Bn(t, e) { var n, r; function i() { var i = e.apply(this, arguments); return i !== r && (n = (r = i) && function (t, e) { return function (n) { this.setAttributeNS(t.space, t.local, e.call(this, n)) } }(t, i)), n } return i._value = e, i } function Yn(t, e) { var n, r; function i() { var i = e.apply(this, arguments); return i !== r && (n = (r = i) && function (t, e) { return function (n) { this.setAttribute(t, e.call(this, n)) } }(t, i)), n } return i._value = e, i } function Rn(t, e) { return function () { Yt(this, t).delay = +e.apply(this, arguments) } } function In(t, e) { return e = +e, function () { Yt(this, t).delay = e } } function Wn(t, e) { return function () { Rt(this, t).duration = +e.apply(this, arguments) } } function Gn(t, e) { return e = +e, function () { Rt(this, t).duration = e } } var Vn = pt.prototype.constructor; function Xn(t) { return function () { this.style.removeProperty(t) } } var Zn = 0; function Qn(t, e, n, r) { this._groups = t, this._parents = e, this._name = n, this._id = r } function Jn() { return ++Zn } var Kn = pt.prototype; function tr(t) { return +t } Qn.prototype = { constructor: Qn, select: function (t) { var e = this._name, n = this._id; "function" != typeof t && (t = p(t)); for (var r = this._groups, i = r.length, o = new Array(i), a = 0; a < i; ++a)for (var l, s, u = r[a], c = u.length, f = o[a] = new Array(c), d = 0; d < c; ++d)(l = u[d]) && (s = t.call(l, l.__data__, d, u)) && ("__data__" in l && (s.__data__ = l.__data__), f[d] = s, Bt(f[d], e, n, d, f, It(l, n))); return new Qn(o, this._parents, e, n) }, selectAll: function (t) { var e = this._name, n = this._id; "function" != typeof t && (t = b(t)); for (var r = this._groups, i = r.length, o = [], a = [], l = 0; l < i; ++l)for (var s, u = r[l], c = u.length, f = 0; f < c; ++f)if (s = u[f]) { for (var d, h = t.call(s, s.__data__, f, u), p = It(s, n), g = 0, _ = h.length; g < _; ++g)(d = h[g]) && Bt(d, e, n, g, h, p); o.push(h), a.push(s) } return new Qn(o, a, e, n) }, filter: function (t) { "function" != typeof t && (t = _(t)); for (var e = this._groups, n = e.length, r = new Array(n), i = 0; i < n; ++i)for (var o, a = e[i], l = a.length, s = r[i] = [], u = 0; u < l; ++u)(o = a[u]) && t.call(o, o.__data__, u, a) && s.push(o); return new Qn(r, this._parents, this._name, this._id) }, merge: function (t) { if (t._id !== this._id) throw new Error; for (var e = this._groups, n = t._groups, r = e.length, i = n.length, o = Math.min(r, i), a = new Array(r), l = 0; l < o; ++l)for (var s, u = e[l], c = n[l], f = u.length, d = a[l] = new Array(f), h = 0; h < f; ++h)(s = u[h] || c[h]) && (d[h] = s); for (; l < r; ++l)a[l] = e[l]; return new Qn(a, this._parents, this._name, this._id) }, selection: function () { return new Vn(this._groups, this._parents) }, transition: function () { for (var t = this._name, e = this._id, n = Jn(), r = this._groups, i = r.length, o = 0; o < i; ++o)for (var a, l = r[o], s = l.length, u = 0; u < s; ++u)if (a = l[u]) { var c = It(a, e); Bt(a, t, n, u, l, { time: c.time + c.delay + c.duration, delay: 0, duration: c.duration, ease: c.ease }) } return new Qn(r, this._parents, t, n) }, call: Kn.call, nodes: Kn.nodes, node: Kn.node, size: Kn.size, empty: Kn.empty, each: Kn.each, on: function (t, e) { var n = this._id; return arguments.length < 2 ? It(this.node(), n).on.on(t) : this.each(function (t, e, n) { var r, i, o = function (t) { return (t + "").trim().split(/^|\s+/).every((function (t) { var e = t.indexOf("."); return e >= 0 && (t = t.slice(0, e)), !t || "start" === t })) }(e) ? Yt : Rt; return function () { var a = o(this, t), l = a.on; l !== r && (i = (r = l).copy()).on(e, n), a.on = i } }(n, t, e)) }, attr: function (t, e) { var n = u(t), r = "transform" === n ? An : $n; return this.attrTween(t, "function" == typeof e ? (n.local ? qn : Hn)(n, r, Ln(this, "attr." + t, e)) : null == e ? (n.local ? Pn : On)(n) : (n.local ? jn : Un)(n, r, e)) }, attrTween: function (t, e) { var n = "attr." + t; if (arguments.length < 2) return (n = this.tween(n)) && n._value; if (null == e) return this.tween(n, null); if ("function" != typeof e) throw new Error; var r = u(t); return this.tween(n, (r.local ? Bn : Yn)(r, e)) }, style: function (t, e, n) { var r = "transform" == (t += "") ? Cn : $n; return null == e ? this.styleTween(t, function (t, e) { var n, r, i; return function () { var o = D(this, t), a = (this.style.removeProperty(t), D(this, t)); return o === a ? null : o === n && a === r ? i : i = e(n = o, r = a) } }(t, r)).on("end.style." + t, Xn(t)) : "function" == typeof e ? this.styleTween(t, function (t, e, n) { var r, i, o; return function () { var a = D(this, t), l = n(this), s = l + ""; return null == l && (this.style.removeProperty(t), s = l = D(this, t)), a === s ? null : a === r && s === i ? o : (i = s, o = e(r = a, l)) } }(t, r, Ln(this, "style." + t, e))).each(function (t, e) { var n, r, i, o, a = "style." + e, l = "end." + a; return function () { var s = Rt(this, t), u = s.on, c = null == s.value[a] ? o || (o = Xn(e)) : void 0; u === n && i === c || (r = (n = u).copy()).on(l, i = c), s.on = r } }(this._id, t)) : this.styleTween(t, function (t, e, n) { var r, i, o = n + ""; return function () { var a = D(this, t); return a === o ? null : a === r ? i : i = e(r = a, n) } }(t, r, e), n).on("end.style." + t, null) }, styleTween: function (t, e, n) { var r = "style." + (t += ""); if (arguments.length < 2) return (r = this.tween(r)) && r._value; if (null == e) return this.tween(r, null); if ("function" != typeof e) throw new Error; return this.tween(r, function (t, e, n) { var r, i; function o() { var o = e.apply(this, arguments); return o !== i && (r = (i = o) && function (t, e, n) { return function (r) { this.style.setProperty(t, e.call(this, r), n) } }(t, o, n)), r } return o._value = e, o }(t, e, null == n ? "" : n)) }, text: function (t) { return this.tween("text", "function" == typeof t ? function (t) { return function () { var e = t(this); this.textContent = null == e ? "" : e } }(Ln(this, "text", t)) : function (t) { return function () { this.textContent = t } }(null == t ? "" : t + "")) }, textTween: function (t) { var e = "text"; if (arguments.length < 1) return (e = this.tween(e)) && e._value; if (null == t) return this.tween(e, null); if ("function" != typeof t) throw new Error; return this.tween(e, function (t) { var e, n; function r() { var r = t.apply(this, arguments); return r !== n && (e = (n = r) && function (t) { return function (e) { this.textContent = t.call(this, e) } }(r)), e } return r._value = t, r }(t)) }, remove: function () { return this.on("end.remove", function (t) { return function () { var e = this.parentNode; for (var n in this.__transition) if (+n !== t) return; e && e.removeChild(this) } }(this._id)) }, tween: function (t, e) { var n = this._id; if (t += "", arguments.length < 2) { for (var r, i = It(this.node(), n).tween, o = 0, a = i.length; o < a; ++o)if ((r = i[o]).name === t) return r.value; return null } return this.each((null == e ? zn : Dn)(n, t, e)) }, delay: function (t) { var e = this._id; return arguments.length ? this.each(("function" == typeof t ? Rn : In)(e, t)) : It(this.node(), e).delay }, duration: function (t) { var e = this._id; return arguments.length ? this.each(("function" == typeof t ? Wn : Gn)(e, t)) : It(this.node(), e).duration }, ease: function (t) { var e = this._id; return arguments.length ? this.each(function (t, e) { if ("function" != typeof e) throw new Error; return function () { Rt(this, t).ease = e } }(e, t)) : It(this.node(), e).ease }, end: function () { var t, e, n = this, r = n._id, i = n.size(); return new Promise((function (o, a) { var l = { value: a }, s = { value: function () { 0 == --i && o() } }; n.each((function () { var n = Rt(this, r), i = n.on; i !== t && ((e = (t = i).copy())._.cancel.push(l), e._.interrupt.push(l), e._.end.push(s)), n.on = e })) })) } }; !function t(e) { function n(t) { return Math.pow(t, e) } return e = +e, n.exponent = t, n }(3), function t(e) { function n(t) { return 1 - Math.pow(1 - t, e) } return e = +e, n.exponent = t, n }(3); var er = function t(e) { function n(t) { return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2 } return e = +e, n.exponent = t, n }(3), nr = { time: null, delay: 0, duration: 250, ease: function (t) { return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2 } }; function rr(t, e) { for (var n; !(n = t.__transition) || !(n = n[e]);)if (!(t = t.parentNode)) return nr.time = Ft(), nr; return n } function ir(t, e, n) { t.prototype = e.prototype = n, n.constructor = t } function or(t, e) { var n = Object.create(t.prototype); for (var r in e) n[r] = e[r]; return n } function ar() { } pt.prototype.interrupt = function (t) { return this.each((function () { !function (t, e) { var n, r, i, o = t.__transition, a = !0; if (o) { for (i in e = null == e ? null : e + "", o) (n = o[i]).name === e ? (r = n.state > 2 && n.state < 5, n.state = 6, n.timer.stop(), n.on.call(r ? "interrupt" : "cancel", t, t.__data__, n.index, n.group), delete o[i]) : a = !1; a && delete t.__transition } }(this, t) })) }, pt.prototype.transition = function (t) { var e, n; t instanceof Qn ? (e = t._id, t = t._name) : (e = Jn(), (n = nr).time = Ft(), t = null == t ? null : t + ""); for (var r = this._groups, i = r.length, o = 0; o < i; ++o)for (var a, l = r[o], s = l.length, u = 0; u < s; ++u)(a = l[u]) && Bt(a, t, e, u, l, n || rr(a, e)); return new Qn(r, this._parents, t, e) }; var lr = .7, sr = 1 / lr, ur = "\\s*([+-]?\\d+)\\s*", cr = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", fr = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", dr = /^#([0-9a-f]{3,8})$/, hr = new RegExp(`^rgb\\(${ur},${ur},${ur}\\)$`), pr = new RegExp(`^rgb\\(${fr},${fr},${fr}\\)$`), gr = new RegExp(`^rgba\\(${ur},${ur},${ur},${cr}\\)$`), br = new RegExp(`^rgba\\(${fr},${fr},${fr},${cr}\\)$`), _r = new RegExp(`^hsl\\(${cr},${fr},${fr}\\)$`), mr = new RegExp(`^hsla\\(${cr},${fr},${fr},${cr}\\)$`), yr = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; function vr() { return this.rgb().formatHex() } function wr() { return this.rgb().formatRgb() } function xr(t) { var e, n; return t = (t + "").trim().toLowerCase(), (e = dr.exec(t)) ? (n = e[1].length, e = parseInt(e[1], 16), 6 === n ? kr(e) : 3 === n ? new Ar(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, (15 & e) << 4 | 15 & e, 1) : 8 === n ? Mr(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (255 & e) / 255) : 4 === n ? Mr(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, ((15 & e) << 4 | 15 & e) / 255) : null) : (e = hr.exec(t)) ? new Ar(e[1], e[2], e[3], 1) : (e = pr.exec(t)) ? new Ar(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, 1) : (e = gr.exec(t)) ? Mr(e[1], e[2], e[3], e[4]) : (e = br.exec(t)) ? Mr(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, e[4]) : (e = _r.exec(t)) ? zr(e[1], e[2] / 100, e[3] / 100, 1) : (e = mr.exec(t)) ? zr(e[1], e[2] / 100, e[3] / 100, e[4]) : yr.hasOwnProperty(t) ? kr(yr[t]) : "transparent" === t ? new Ar(NaN, NaN, NaN, 0) : null } function kr(t) { return new Ar(t >> 16 & 255, t >> 8 & 255, 255 & t, 1) } function Mr(t, e, n, r) { return r <= 0 && (t = e = n = NaN), new Ar(t, e, n, r) } function Cr(t) { return t instanceof ar || (t = xr(t)), t ? new Ar((t = t.rgb()).r, t.g, t.b, t.opacity) : new Ar } function Ar(t, e, n, r) { this.r = +t, this.g = +e, this.b = +n, this.opacity = +r } function Er() { return `#${Fr(this.r)}${Fr(this.g)}${Fr(this.b)}` } function Tr() { const t = Nr(this.opacity); return `${1 === t ? "rgb(" : "rgba("}${Sr(this.r)}, ${Sr(this.g)}, ${Sr(this.b)}${1 === t ? ")" : `, ${t})`}` } function Nr(t) { return isNaN(t) ? 1 : Math.max(0, Math.min(1, t)) } function Sr(t) { return Math.max(0, Math.min(255, Math.round(t) || 0)) } function Fr(t) { return ((t = Sr(t)) < 16 ? "0" : "") + t.toString(16) } function zr(t, e, n, r) { return r <= 0 ? t = e = n = NaN : n <= 0 || n >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new $r(t, e, n, r) } function Dr(t) { if (t instanceof $r) return new $r(t.h, t.s, t.l, t.opacity); if (t instanceof ar || (t = xr(t)), !t) return new $r; if (t instanceof $r) return t; var e = (t = t.rgb()).r / 255, n = t.g / 255, r = t.b / 255, i = Math.min(e, n, r), o = Math.max(e, n, r), a = NaN, l = o - i, s = (o + i) / 2; return l ? (a = e === o ? (n - r) / l + 6 * (n < r) : n === o ? (r - e) / l + 2 : (e - n) / l + 4, l /= s < .5 ? o + i : 2 - o - i, a *= 60) : l = s > 0 && s < 1 ? 0 : a, new $r(a, l, s, t.opacity) } function Lr(t, e, n, r) { return 1 === arguments.length ? Dr(t) : new $r(t, e, n, null == r ? 1 : r) } function $r(t, e, n, r) { this.h = +t, this.s = +e, this.l = +n, this.opacity = +r } function Or(t) { return (t = (t || 0) % 360) < 0 ? t + 360 : t } function Pr(t) { return Math.max(0, Math.min(1, t || 0)) } function Ur(t, e, n) { return 255 * (t < 60 ? e + (n - e) * t / 60 : t < 180 ? n : t < 240 ? e + (n - e) * (240 - t) / 60 : e) } ir(ar, xr, { copy(t) { return Object.assign(new this.constructor, this, t) }, displayable() { return this.rgb().displayable() }, hex: vr, formatHex: vr, formatHex8: function () { return this.rgb().formatHex8() }, formatHsl: function () { return Dr(this).formatHsl() }, formatRgb: wr, toString: wr }), ir(Ar, (function (t, e, n, r) { return 1 === arguments.length ? Cr(t) : new Ar(t, e, n, null == r ? 1 : r) }), or(ar, { brighter(t) { return t = null == t ? sr : Math.pow(sr, t), new Ar(this.r * t, this.g * t, this.b * t, this.opacity) }, darker(t) { return t = null == t ? lr : Math.pow(lr, t), new Ar(this.r * t, this.g * t, this.b * t, this.opacity) }, rgb() { return this }, clamp() { return new Ar(Sr(this.r), Sr(this.g), Sr(this.b), Nr(this.opacity)) }, displayable() { return -.5 <= this.r && this.r < 255.5 && -.5 <= this.g && this.g < 255.5 && -.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1 }, hex: Er, formatHex: Er, formatHex8: function () { return `#${Fr(this.r)}${Fr(this.g)}${Fr(this.b)}${Fr(255 * (isNaN(this.opacity) ? 1 : this.opacity))}` }, formatRgb: Tr, toString: Tr })), ir($r, Lr, or(ar, { brighter(t) { return t = null == t ? sr : Math.pow(sr, t), new $r(this.h, this.s, this.l * t, this.opacity) }, darker(t) { return t = null == t ? lr : Math.pow(lr, t), new $r(this.h, this.s, this.l * t, this.opacity) }, rgb() { var t = this.h % 360 + 360 * (this.h < 0), e = isNaN(t) || isNaN(this.s) ? 0 : this.s, n = this.l, r = n + (n < .5 ? n : 1 - n) * e, i = 2 * n - r; return new Ar(Ur(t >= 240 ? t - 240 : t + 120, i, r), Ur(t, i, r), Ur(t < 120 ? t + 240 : t - 120, i, r), this.opacity) }, clamp() { return new $r(Or(this.h), Pr(this.s), Pr(this.l), Nr(this.opacity)) }, displayable() { return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1 }, formatHsl() { const t = Nr(this.opacity); return `${1 === t ? "hsl(" : "hsla("}${Or(this.h)}, ${100 * Pr(this.s)}%, ${100 * Pr(this.l)}%${1 === t ? ")" : `, ${t})`}` } })); const jr = Math.PI / 180, Hr = 180 / Math.PI, qr = .96422, Br = .82521, Yr = 4 / 29, Rr = 6 / 29, Ir = 3 * Rr * Rr, Wr = Rr * Rr * Rr; function Gr(t) { if (t instanceof Vr) return new Vr(t.l, t.a, t.b, t.opacity); if (t instanceof ti) return ei(t); t instanceof Ar || (t = Cr(t)); var e, n, r = Jr(t.r), i = Jr(t.g), o = Jr(t.b), a = Xr((.2225045 * r + .7168786 * i + .0606169 * o) / 1); return r === i && i === o ? e = n = a : (e = Xr((.4360747 * r + .3850649 * i + .1430804 * o) / qr), n = Xr((.0139322 * r + .0971045 * i + .7141733 * o) / Br)), new Vr(116 * a - 16, 500 * (e - a), 200 * (a - n), t.opacity) } function Vr(t, e, n, r) { this.l = +t, this.a = +e, this.b = +n, this.opacity = +r } function Xr(t) { return t > Wr ? Math.pow(t, 1 / 3) : t / Ir + Yr } function Zr(t) { return t > Rr ? t * t * t : Ir * (t - Yr) } function Qr(t) { return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055) } function Jr(t) { return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4) } function Kr(t, e, n, r) { return 1 === arguments.length ? function (t) { if (t instanceof ti) return new ti(t.h, t.c, t.l, t.opacity); if (t instanceof Vr || (t = Gr(t)), 0 === t.a && 0 === t.b) return new ti(NaN, 0 < t.l && t.l < 100 ? 0 : NaN, t.l, t.opacity); var e = Math.atan2(t.b, t.a) * Hr; return new ti(e < 0 ? e + 360 : e, Math.sqrt(t.a * t.a + t.b * t.b), t.l, t.opacity) }(t) : new ti(t, e, n, null == r ? 1 : r) } function ti(t, e, n, r) { this.h = +t, this.c = +e, this.l = +n, this.opacity = +r } function ei(t) { if (isNaN(t.h)) return new Vr(t.l, 0, 0, t.opacity); var e = t.h * jr; return new Vr(t.l, Math.cos(e) * t.c, Math.sin(e) * t.c, t.opacity) } ir(Vr, (function (t, e, n, r) { return 1 === arguments.length ? Gr(t) : new Vr(t, e, n, null == r ? 1 : r) }), or(ar, { brighter(t) { return new Vr(this.l + 18 * (null == t ? 1 : t), this.a, this.b, this.opacity) }, darker(t) { return new Vr(this.l - 18 * (null == t ? 1 : t), this.a, this.b, this.opacity) }, rgb() { var t = (this.l + 16) / 116, e = isNaN(this.a) ? t : t + this.a / 500, n = isNaN(this.b) ? t : t - this.b / 200; return new Ar(Qr(3.1338561 * (e = qr * Zr(e)) - 1.6168667 * (t = 1 * Zr(t)) - .4906146 * (n = Br * Zr(n))), Qr(-.9787684 * e + 1.9161415 * t + .033454 * n), Qr(.0719453 * e - .2289914 * t + 1.4052427 * n), this.opacity) } })), ir(ti, Kr, or(ar, { brighter(t) { return new ti(this.h, this.c, this.l + 18 * (null == t ? 1 : t), this.opacity) }, darker(t) { return new ti(this.h, this.c, this.l - 18 * (null == t ? 1 : t), this.opacity) }, rgb() { return ei(this).rgb() } })); var ni = "$"; function ri() { } function ii(t, e) { var n = new ri; if (t instanceof ri) t.each((function (t, e) { n.set(e, t) })); else if (Array.isArray(t)) { var r, i = -1, o = t.length; if (null == e) for (; ++i < o;)n.set(i, t[i]); else for (; ++i < o;)n.set(e(r = t[i], i, t), r) } else if (t) for (var a in t) n.set(a, t[a]); return n } function oi() { var t, e, n, r = [], i = []; function o(n, i, a, l) { if (i >= r.length) return null != t && n.sort(t), null != e ? e(n) : n; for (var s, u, c, f = -1, d = n.length, h = r[i++], p = ii(), g = a(); ++f < d;)(c = p.get(s = h(u = n[f]) + "")) ? c.push(u) : p.set(s, [u]); return p.each((function (t, e) { l(g, e, o(t, i, a, l)) })), g } function a(t, n) { if (++n > r.length) return t; var o, l = i[n - 1]; return null != e && n >= r.length ? o = t.entries() : (o = [], t.each((function (t, e) { o.push({ key: e, values: a(t, n) }) }))), null != l ? o.sort((function (t, e) { return l(t.key, e.key) })) : o } return n = { object: function (t) { return o(t, 0, ai, li) }, map: function (t) { return o(t, 0, si, ui) }, entries: function (t) { return a(o(t, 0, si, ui), 0) }, key: function (t) { return r.push(t), n }, sortKeys: function (t) { return i[r.length - 1] = t, n }, sortValues: function (e) { return t = e, n }, rollup: function (t) { return e = t, n } } } function ai() { return {} } function li(t, e, n) { t[e] = n } function si() { return ii() } function ui(t, e, n) { t.set(e, n) } function ci() { } ri.prototype = ii.prototype = { constructor: ri, has: function (t) { return ni + t in this }, get: function (t) { return this[ni + t] }, set: function (t, e) { return this[ni + t] = e, this }, remove: function (t) { var e = ni + t; return e in this && delete this[e] }, clear: function () { for (var t in this) t[0] === ni && delete this[t] }, keys: function () { var t = []; for (var e in this) e[0] === ni && t.push(e.slice(1)); return t }, values: function () { var t = []; for (var e in this) e[0] === ni && t.push(this[e]); return t }, entries: function () { var t = []; for (var e in this) e[0] === ni && t.push({ key: e.slice(1), value: this[e] }); return t }, size: function () { var t = 0; for (var e in this) e[0] === ni && ++t; return t }, empty: function () { for (var t in this) if (t[0] === ni) return !1; return !0 }, each: function (t) { for (var e in this) e[0] === ni && t(this[e], e.slice(1), this) } }; var fi = ii.prototype; function di(t, e) { var n = new ci; if (t instanceof ci) t.each((function (t) { n.add(t) })); else if (t) { var r = -1, i = t.length; if (null == e) for (; ++r < i;)n.add(t[r]); else for (; ++r < i;)n.add(e(t[r], r, t)) } return n } function hi(t) { return "string" == typeof t && null != t.match(/^(https?:\/\/|data:)/i) } ci.prototype = di.prototype = { constructor: ci, has: fi.has, add: function (t) { return this[ni + (t += "")] = t, this }, remove: fi.remove, clear: fi.clear, values: fi.keys, size: fi.size, empty: fi.empty, each: fi.each }; const pi = "undefined" != typeof window && "undefined" != typeof document && "function" == typeof document.createElement && "function" == typeof document.body?.appendChild && "undefined" != typeof HTMLElement, gi = document.createElement("canvas"), bi = gi.getContext("2d"), _i = document.createElementNS("http://www.w3.org/2000/svg", "svg"), mi = document.createElementNS("http://www.w3.org/2000/svg", "text"); _i.appendChild(mi), pi && (gi.style.position = "fixed", gi.style.left = "1000vw", _i.style.position = "fixed", _i.style.left = "1000vw", document.body.appendChild(gi), document.body.appendChild(_i)); let yi = null; function vi() { return window.getComputedStyle(document.body).direction || "ltr" } function wi(t, e) { var n = function (t, e) { if ("string" != typeof t) return !1; var n = xr(t); return n.opacity = void 0 !== e ? e : 1, n }(t, e); return !!n && n.toString() } function xi(t, e, n, r) { let i = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4]; "string" != typeof t && (t = String(t)); const o = t => bi.measureTextWithTnums(t).width > r, a = (t, e) => { let n = bi.measureText(t).width; if (n <= e) return t; let r = 1, i = t; do { i = t.substring(0, t.length - r) + "â€¦", n = bi.measureTextWithTnums(i).width } while (n > e && ++r < t.length); return i.length < 1 && (i = t.substring(0, 1) + "â€¦"), i }; bi.font = e; let l = []; if (Object.defineProperty(l, "widest_line", { value: 0, enumerable: !0, writable: !0 }), Object.defineProperty(l, "has_truncated", { value: !1, enumerable: !0, writable: !0 }), void 0 === t || Number.isInteger(n) && n <= 0) return l; if (0 === t.length) return l.push(""), l; if (r <= 0) return t.length > 0 && (l.push(t.slice(0, 1) + "â€¦"), l.widest_line = bi.measureTextWithTnums(l[0]).width), l; if (!t || 0 === t.length || 0 === n || r <= 0) return l; const s = t.split(/\s+/g); if (!o(t)) return l.push(t), l.widest_line = bi.measureTextWithTnums(t).width, l.has_truncated = !1, l; let u = new String(s[0]); if (u && o(u)) return i ? u = a(u, r) : s.length > 1 && (u += "â€¦"), l.push(u), l.widest_line = bi.measureTextWithTnums(u).width, l.has_truncated = !0, l; let c = "", f = !1; if (s.forEach((t => { if (!f) if (o(c + (c ? " " : "") + t)) { if (c) { bi.measureTextWithTnums(c).width > r && (c = a(c, r), f = !0), l.push(c), c = "" } c = t } else c += (c ? " " : "") + t })), c && !f && l.push(a(c, r)), l.length > n) { if (l.length > n && Number.isInteger(n)) { l.splice(n, l.length - n); let t = l[l.length - 1]; o(t + "â€¦") && (t = a(t, r - bi.measureTextWithTnums("â€¦").width)), "â€¦" !== t.slice(-1) && (t += "â€¦"), l[l.length - 1] = t, f = !0 } } return l.widest_line = Math.max(...l.map((t => bi.measureTextWithTnums(t).width))), l.has_truncated = f, l } function ki(t, e, n) { if (void 0 === t.column_names[e]) return []; var r = Array.isArray(t.column_names[e]), i = di(t, (function (t) { return r ? t[e][0] : t[e] })), o = []; return i.each((function (t) { o.push(t) })), o } var Mi, Ci, Ai; function Ei(t) { try { return new URL(t, document.baseURI).href } catch { return t } } function Ti() { document.body.querySelector(".font-samples").innerHTML = "" } function Ni(t) { Ai || (Ai = t || ["normal", "bold"]); var e = "";["mobile_big", "tablet", "desktop", "big_screen"].forEach((function (t) { var n = "@media(min-width: " + nf["breakpoint_" + t] + "px) {\n", r = "html { font-size:" + nf["font_size_" + t] + "%; }"; e += n + r + "\n}\n\n" })); var n = "html { \n font-size:" + nf.font_size_mobile_small + "%; \n -webkit-font-smoothing: antialiased; \n -moz-osx-font-smoothing: auto; } \n\n\n"; Mi.innerHTML = n + e; var r = [nf.body_font, nf.title_font, nf.subtitle_font, nf.footer_font]; r.forEach((function (t) { if (t) { for (var e = !1, n = Ei(t.url), r = document.head.querySelectorAll("link.layout-font"), i = 0; i < r.length; i++) { r[i].href === n && (e = !0) } if (!e) { var o = document.createElement("link"); o.setAttribute("rel", "stylesheet"), o.setAttribute("href", t.url), o.className = "layout-font", document.head.appendChild(o), function (t) { document.body.querySelector(".font-samples") || ((Ci = document.createElement("div")).className = "font-samples", Ci.style.visibility = "hidden", Ci.style.overflow = "hidden", Ci.style.height = 0, document.body.appendChild(Ci)), Ai.forEach((function (e) { var n = document.createElement("div"); n.className = "font-sample-el", n.innerText = t.name, n.style.fontFamily = t.name, n.style.fontWeight = e, Ci.appendChild(n) })) }(t) } } })); for (var i = document.head.querySelectorAll("link.layout-font"), o = 0; o < i.length; o++) { var a = i[o], l = !1; r.forEach((function (t) { t && Ei(t.url) === a.href && (l = !0) })), l || a.parentElement.removeChild(a) } document.body.style.fontFamily = nf.body_font.name } bi.measureTextWithTnums = function (t) { if (!pi) return bi.measureText(t); const e = window.getComputedStyle(this.canvas); if (!((e.fontFeatureSettings || "").includes("tnum") || (e.fontVariantNumeric || "").includes("tabular-nums"))) return this.measureText(t); if (null === yi && function () { const t = "0123456789.,Â£", e = document.createElement("canvas"), n = document.createElement("canvas"), r = e.getContext("2d"), i = n.getContext("2d"); e.setAttribute("style", "font-feature-settings: normal; font-variant-numeric: normal; position: fixed; left: 1000vw;"), n.setAttribute("style", 'font-feature-settings: "tnum" 1; font-variant-numeric: tabular-nums; position: fixed; left: 1000vw;'), r.font = i.font = bi.font, document.body.appendChild(e), document.body.appendChild(n); const o = r.measureText(t).width, a = i.measureText(t).width; yi = o !== a, document.body.removeChild(e), document.body.removeChild(n) }(), yi) return this.measureText(t); mi.textContent = t, mi.setAttribute("style", `font: ${bi.font}; font-feature-settings: 'tnum' 1; font-variant-numeric: tabular-nums; position: fixed; left: 1000vw;`); let n = mi.getBBox().width; return { ...this.measureText(t), width: n } }; var Si, Fi, zi, Di, Li, $i, Oi, Pi, Ui, ji, Hi = Object.freeze({ "stack-default": ["header", "controls", "legend", "primary", "footer"], "stack-2": ["primary", "header", "controls", "legend", "footer"], "stack-3": ["header", "primary", "controls", "legend", "footer"], "stack-4": ["controls", "primary", "header", "legend", "footer"], "stack-5": ["header", "controls", "primary", "legend", "footer"], "stack-6": ["header", "legend", "primary", "controls", "footer"], "grid-1": { wrapper: { display: "grid", "grid-template-rows": "min-content min-content minmax(min-content,auto) min-content", "grid-template-columns": "1fr 2fr" }, header: { "grid-column-start": 1 }, legend: { "grid-column-start": 1 }, controls: { "grid-column-start": 1 }, primary: { "grid-column-start": 2, "grid-row": "1 / -1" }, footer: { "grid-column-start": "1", "grid-row-start": 4 } } }); function qi(t) { return window.innerWidth !== Si && (Si = window.innerWidth, Fi = parseFloat(getComputedStyle(document.documentElement).fontSize)), t * Fi } function Bi(t) { return "justify" == t ? "" : "left" == t ? "start" : "right" == t ? "end" : "center" == t ? "center" : void 0 } function Yi(t) { return 0 !== t.indexOf("http://") && 0 !== t.indexOf("https://") ? "http://" + t : t } function Ri() { return nf.header_logo_enabled && nf.header_logo_src } function Ii() { var t = "top" == nf.header_border || "top_and_bottom" == nf.header_border, e = "bottom" == nf.header_border || "top_and_bottom" == nf.header_border; zi.style.textAlign = Bi(nf.header_align), zi.style.margin = 0, zi.style.borderTop = t ? nf.header_border_width + "px " + nf.header_border_style + " " + nf.header_border_color : null, zi.style.borderBottom = e ? nf.header_border_width + "px " + nf.header_border_style + " " + nf.header_border_color : null, zi.style.paddingTop = t ? nf.header_border_space + "rem" : "", zi.style.paddingBottom = e ? nf.header_border_space + "rem" : "", Di.innerHTML = nf.title ? nf.title : "", Di.setAttribute("id", "flourish-header-title"), Di.style.fontFamily = nf.title_font ? nf.title_font.name : "inherit", Di.style.fontSize = ("custom" != nf.title_size ? nf.title_size : nf.title_size_custom) + "rem", Di.style.lineHeight = nf.title_line_height, Di.style.fontWeight = nf.title_weight, Di.style.color = nf.title_color || nf.font_color, Di.style.margin = 0, Di.style.paddingTop = nf.title ? ("custom" == nf.title_space_above ? nf.title_space_above_custom : nf.title_space_above) + "rem" : 0, Li.innerHTML = nf.subtitle ? nf.subtitle : "", Li.setAttribute("id", "flourish-header-subtitle"), Li.style.fontFamily = nf.subtitle_font ? nf.subtitle_font.name : "inherit", Li.style.fontSize = ("custom" != nf.subtitle_size ? nf.subtitle_size : nf.subtitle_size_custom) + "rem", Li.style.lineHeight = nf.subtitle_line_height, Li.style.fontWeight = nf.subtitle_weight, Li.style.color = nf.subtitle_color || nf.font_color, Li.style.margin = 0, Li.style.paddingTop = nf.subtitle ? ("custom" == nf.subtitle_space_above ? nf.subtitle_space_above_custom : nf.subtitle_space_above) + "rem" : 0, $i.innerHTML = nf.header_text ? nf.header_text : "", $i.setAttribute("id", "flourish-header-text"), $i.style.fontSize = ("custom" != nf.header_text_size ? nf.header_text_size : nf.header_text_size_custom) + "rem", $i.style.lineHeight = nf.header_text_line_height, $i.style.fontWeight = nf.header_text_weight, $i.style.margin = 0, $i.style.color = nf.header_text_color || nf.font_color, $i.style.paddingTop = nf.header_text ? ("custom" == nf.header_text_space_above ? nf.header_text_space_above_custom : nf.header_text_space_above) + "rem" : 0, Oi.style.clear = "both", Pi.innerHTML = "", Ri() && ((Ui = Ui || document.createElement("img")).className = "flourish-header-logo", Ui.src = Yi(nf.header_logo_src), Ui.alt = nf.header_logo_alt, Ui.style.position = "inside" == nf.header_logo_align ? "" : "fixed", Ui.style.height = nf.header_logo_height + "rem", Ui.style.top = "outside" == nf.header_logo_align ? 0 : "", Ui.style.left = "outside" == nf.header_logo_align && "left" == nf.header_logo_position_outside ? 0 : "", Ui.style.right = "outside" == nf.header_logo_align && "right" == nf.header_logo_position_outside ? 0 : "", Ui.style.marginTop = nf.header_logo_margin_top + "rem", Ui.style.marginBottom = nf.header_logo_margin_bottom + "rem", Ui.style.marginLeft = nf.header_logo_margin_left + "rem", Ui.style.marginRight = nf.header_logo_margin_right + "rem", Ui.style.float = "top" == nf.header_logo_position_inside || "outside" == nf.header_logo_align ? "" : nf.header_logo_position_inside, Ui.style.width = "auto", nf.header_logo_link_url ? ((ji = document.createElement("a")).target = "_blank", ji.appendChild(Ui), Pi.appendChild(ji), Ui.style.cursor = "pointer", ji.href = Yi(nf.header_logo_link_url)) : Pi.appendChild(Ui)) }
            /** @preserve
                /////    SAPC APCA - Advanced Perceptual Contrast Algorithm
                /////           Beta 0.1.9 W3 â€¢ contrast function only
                /////           DIST: W3 â€¢ Revision date: July 3, 2022
                /////    Function to parse color values and determine Lc contrast
                /////    Copyright Â© 2019-2022 by Andrew Somers. All Rights Reserved.
                /////    LICENSE: W3 LICENSE
                /////    CONTACT: Please use the ISSUES or DISCUSSIONS tab at:
                /////    https://github.com/Myndex/SAPC-APCA/
                /////
                ///////////////////////////////////////////////////////////////////////////////
                /////
                /////    MINIMAL IMPORTS:
                /////      import { APCAcontrast, sRGBtoY, displayP3toY,
                /////               calcAPCA, fontLookupAPCA } from 'apca-w3';
                /////      import { colorParsley } from 'colorparsley';
                /////
                /////    FORWARD CONTRAST USAGE:
                /////      Lc = APCAcontrast( sRGBtoY( TEXTcolor ) , sRGBtoY( BACKGNDcolor ) );
                /////    Where the colors are sent as an rgba array [255,255,255,1]
                /////
                /////    Retrieving an array of font sizes for the contrast:
                /////      fontArray = fontLookupAPCA(Lc);
                /////
                /////    Live Demonstrator at https://www.myndex.com/APCA/
                // */
            const Wi = { mainTRC: 2.4, get mainTRCencode() { return 1 / this.mainTRC }, sRco: .2126729, sGco: .7151522, sBco: .072175, normBG: .56, normTXT: .57, revTXT: .62, revBG: .65, blkThrs: .022, blkClmp: 1.414, scaleBoW: 1.14, scaleWoB: 1.14, loBoWoffset: .027, loWoBoffset: .027, deltaYmin: 5e-4, loClip: .1, mFactor: 1.9468554433171, get mFactInv() { return 1 / this.mFactor }, mOffsetIn: .0387393816571401, mExpAdj: .283343396420869, get mExp() { return this.mExpAdj / this.blkClmp }, mOffsetOut: .312865795870758 }; function Gi() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [0, 0, 0]; function e(t) { return Math.pow(t / 255, Wi.mainTRC) } return Wi.sRco * e(t[0]) + Wi.sGco * e(t[1]) + Wi.sBco * e(t[2]) } function Vi(t, e) { if ("string" != typeof t) return !1; var n = xr(t); return n.opacity = 1, n } function Xi(t, e) { if (!t || !e) return void console.warn("No valid color", t, e); const n = Gi(Object.values(Vi(t))), r = Gi(Object.values(Vi(e))); return Math.abs(function (t, e) { let n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : -1; const r = [0, 1.1]; if (isNaN(t) || isNaN(e) || Math.min(t, e) < r[0] || Math.max(t, e) > r[1]) return 0; let i = 0, o = 0, a = "BoW"; return t = t > Wi.blkThrs ? t : t + Math.pow(Wi.blkThrs - t, Wi.blkClmp), e = e > Wi.blkThrs ? e : e + Math.pow(Wi.blkThrs - e, Wi.blkClmp), Math.abs(e - t) < Wi.deltaYmin ? 0 : (e > t ? (i = (Math.pow(e, Wi.normBG) - Math.pow(t, Wi.normTXT)) * Wi.scaleBoW, o = i < Wi.loClip ? 0 : i - Wi.loBoWoffset) : (a = "WoB", i = (Math.pow(e, Wi.revBG) - Math.pow(t, Wi.revTXT)) * Wi.scaleWoB, o = i > -Wi.loClip ? 0 : i + Wi.loWoBoffset), n < 0 ? 100 * o : 0 == n ? Math.round(100 * Math.abs(o)) + "<sub>" + a + "</sub>" : Number.isInteger(n) ? (100 * o).toFixed(n) : 0) }(n, r)) } const Zi = new Date, Qi = new Date; function Ji(t, e, n, r) { function i(e) { return t(e = 0 === arguments.length ? new Date : new Date(+e)), e } return i.floor = e => (t(e = new Date(+e)), e), i.ceil = n => (t(n = new Date(n - 1)), e(n, 1), t(n), n), i.round = t => { const e = i(t), n = i.ceil(t); return t - e < n - t ? e : n }, i.offset = (t, n) => (e(t = new Date(+t), null == n ? 1 : Math.floor(n)), t), i.range = (n, r, o) => { const a = []; if (n = i.ceil(n), o = null == o ? 1 : Math.floor(o), !(n < r && o > 0)) return a; let l; do { a.push(l = new Date(+n)), e(n, o), t(n) } while (l < n && n < r); return a }, i.filter = n => Ji((e => { if (e >= e) for (; t(e), !n(e);)e.setTime(e - 1) }), ((t, r) => { if (t >= t) if (r < 0) for (; ++r <= 0;)for (; e(t, -1), !n(t);); else for (; --r >= 0;)for (; e(t, 1), !n(t);); })), n && (i.count = (e, r) => (Zi.setTime(+e), Qi.setTime(+r), t(Zi), t(Qi), Math.floor(n(Zi, Qi))), i.every = t => (t = Math.floor(t), isFinite(t) && t > 0 ? t > 1 ? i.filter(r ? e => r(e) % t == 0 : e => i.count(0, e) % t == 0) : i : null)), i } const Ki = 6e4, to = 864e5, eo = 6048e5, no = Ji((t => t.setHours(0, 0, 0, 0)), ((t, e) => t.setDate(t.getDate() + e)), ((t, e) => (e - t - (e.getTimezoneOffset() - t.getTimezoneOffset()) * Ki) / to), (t => t.getDate() - 1)); no.range; const ro = Ji((t => { t.setUTCHours(0, 0, 0, 0) }), ((t, e) => { t.setUTCDate(t.getUTCDate() + e) }), ((t, e) => (e - t) / to), (t => t.getUTCDate() - 1)); ro.range; const io = Ji((t => { t.setUTCHours(0, 0, 0, 0) }), ((t, e) => { t.setUTCDate(t.getUTCDate() + e) }), ((t, e) => (e - t) / to), (t => Math.floor(t / to))); function oo(t) { return Ji((e => { e.setDate(e.getDate() - (e.getDay() + 7 - t) % 7), e.setHours(0, 0, 0, 0) }), ((t, e) => { t.setDate(t.getDate() + 7 * e) }), ((t, e) => (e - t - (e.getTimezoneOffset() - t.getTimezoneOffset()) * Ki) / eo)) } io.range; const ao = oo(0), lo = oo(1), so = oo(2), uo = oo(3), co = oo(4), fo = oo(5), ho = oo(6); function po(t) { return Ji((e => { e.setUTCDate(e.getUTCDate() - (e.getUTCDay() + 7 - t) % 7), e.setUTCHours(0, 0, 0, 0) }), ((t, e) => { t.setUTCDate(t.getUTCDate() + 7 * e) }), ((t, e) => (e - t) / eo)) } ao.range, lo.range, so.range, uo.range, co.range, fo.range, ho.range; const go = po(0), bo = po(1), _o = po(2), mo = po(3), yo = po(4), vo = po(5), wo = po(6); go.range, bo.range, _o.range, mo.range, yo.range, vo.range, wo.range; const xo = Ji((t => { t.setMonth(0, 1), t.setHours(0, 0, 0, 0) }), ((t, e) => { t.setFullYear(t.getFullYear() + e) }), ((t, e) => e.getFullYear() - t.getFullYear()), (t => t.getFullYear())); xo.every = t => isFinite(t = Math.floor(t)) && t > 0 ? Ji((e => { e.setFullYear(Math.floor(e.getFullYear() / t) * t), e.setMonth(0, 1), e.setHours(0, 0, 0, 0) }), ((e, n) => { e.setFullYear(e.getFullYear() + n * t) })) : null, xo.range; const ko = Ji((t => { t.setUTCMonth(0, 1), t.setUTCHours(0, 0, 0, 0) }), ((t, e) => { t.setUTCFullYear(t.getUTCFullYear() + e) }), ((t, e) => e.getUTCFullYear() - t.getUTCFullYear()), (t => t.getUTCFullYear())); function Mo(t) { if (0 <= t.y && t.y < 100) { var e = new Date(-1, t.m, t.d, t.H, t.M, t.S, t.L); return e.setFullYear(t.y), e } return new Date(t.y, t.m, t.d, t.H, t.M, t.S, t.L) } function Co(t) { if (0 <= t.y && t.y < 100) { var e = new Date(Date.UTC(-1, t.m, t.d, t.H, t.M, t.S, t.L)); return e.setUTCFullYear(t.y), e } return new Date(Date.UTC(t.y, t.m, t.d, t.H, t.M, t.S, t.L)) } function Ao(t, e, n) { return { y: t, m: e, d: n, H: 0, M: 0, S: 0, L: 0 } } ko.every = t => isFinite(t = Math.floor(t)) && t > 0 ? Ji((e => { e.setUTCFullYear(Math.floor(e.getUTCFullYear() / t) * t), e.setUTCMonth(0, 1), e.setUTCHours(0, 0, 0, 0) }), ((e, n) => { e.setUTCFullYear(e.getUTCFullYear() + n * t) })) : null, ko.range; var Eo, To, No = { "-": "", _: " ", 0: "0" }, So = /^\s*\d+/, Fo = /^%/, zo = /[\\^$*+?|[\]().{}]/g; function Do(t, e, n) { var r = t < 0 ? "-" : "", i = (r ? -t : t) + "", o = i.length; return r + (o < n ? new Array(n - o + 1).join(e) + i : i) } function Lo(t) { return t.replace(zo, "\\$&") } function $o(t) { return new RegExp("^(?:" + t.map(Lo).join("|") + ")", "i") } function Oo(t) { return new Map(t.map(((t, e) => [t.toLowerCase(), e]))) } function Po(t, e, n) { var r = So.exec(e.slice(n, n + 1)); return r ? (t.w = +r[0], n + r[0].length) : -1 } function Uo(t, e, n) { var r = So.exec(e.slice(n, n + 1)); return r ? (t.u = +r[0], n + r[0].length) : -1 } function jo(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.U = +r[0], n + r[0].length) : -1 } function Ho(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.V = +r[0], n + r[0].length) : -1 } function qo(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.W = +r[0], n + r[0].length) : -1 } function Bo(t, e, n) { var r = So.exec(e.slice(n, n + 4)); return r ? (t.y = +r[0], n + r[0].length) : -1 } function Yo(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.y = +r[0] + (+r[0] > 68 ? 1900 : 2e3), n + r[0].length) : -1 } function Ro(t, e, n) { var r = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n, n + 6)); return r ? (t.Z = r[1] ? 0 : -(r[2] + (r[3] || "00")), n + r[0].length) : -1 } function Io(t, e, n) { var r = So.exec(e.slice(n, n + 1)); return r ? (t.q = 3 * r[0] - 3, n + r[0].length) : -1 } function Wo(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.m = r[0] - 1, n + r[0].length) : -1 } function Go(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.d = +r[0], n + r[0].length) : -1 } function Vo(t, e, n) { var r = So.exec(e.slice(n, n + 3)); return r ? (t.m = 0, t.d = +r[0], n + r[0].length) : -1 } function Xo(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.H = +r[0], n + r[0].length) : -1 } function Zo(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.M = +r[0], n + r[0].length) : -1 } function Qo(t, e, n) { var r = So.exec(e.slice(n, n + 2)); return r ? (t.S = +r[0], n + r[0].length) : -1 } function Jo(t, e, n) { var r = So.exec(e.slice(n, n + 3)); return r ? (t.L = +r[0], n + r[0].length) : -1 } function Ko(t, e, n) { var r = So.exec(e.slice(n, n + 6)); return r ? (t.L = Math.floor(r[0] / 1e3), n + r[0].length) : -1 } function ta(t, e, n) { var r = Fo.exec(e.slice(n, n + 1)); return r ? n + r[0].length : -1 } function ea(t, e, n) { var r = So.exec(e.slice(n)); return r ? (t.Q = +r[0], n + r[0].length) : -1 } function na(t, e, n) { var r = So.exec(e.slice(n)); return r ? (t.s = +r[0], n + r[0].length) : -1 } function ra(t, e) { return Do(t.getDate(), e, 2) } function ia(t, e) { return Do(t.getHours(), e, 2) } function oa(t, e) { return Do(t.getHours() % 12 || 12, e, 2) } function aa(t, e) { return Do(1 + no.count(xo(t), t), e, 3) } function la(t, e) { return Do(t.getMilliseconds(), e, 3) } function sa(t, e) { return la(t, e) + "000" } function ua(t, e) { return Do(t.getMonth() + 1, e, 2) } function ca(t, e) { return Do(t.getMinutes(), e, 2) } function fa(t, e) { return Do(t.getSeconds(), e, 2) } function da(t) { var e = t.getDay(); return 0 === e ? 7 : e } function ha(t, e) { return Do(ao.count(xo(t) - 1, t), e, 2) } function pa(t) { var e = t.getDay(); return e >= 4 || 0 === e ? co(t) : co.ceil(t) } function ga(t, e) { return t = pa(t), Do(co.count(xo(t), t) + (4 === xo(t).getDay()), e, 2) } function ba(t) { return t.getDay() } function _a(t, e) { return Do(lo.count(xo(t) - 1, t), e, 2) } function ma(t, e) { return Do(t.getFullYear() % 100, e, 2) } function ya(t, e) { return Do((t = pa(t)).getFullYear() % 100, e, 2) } function va(t, e) { return Do(t.getFullYear() % 1e4, e, 4) } function wa(t, e) { var n = t.getDay(); return Do((t = n >= 4 || 0 === n ? co(t) : co.ceil(t)).getFullYear() % 1e4, e, 4) } function xa(t) { var e = t.getTimezoneOffset(); return (e > 0 ? "-" : (e *= -1, "+")) + Do(e / 60 | 0, "0", 2) + Do(e % 60, "0", 2) } function ka(t, e) { return Do(t.getUTCDate(), e, 2) } function Ma(t, e) { return Do(t.getUTCHours(), e, 2) } function Ca(t, e) { return Do(t.getUTCHours() % 12 || 12, e, 2) } function Aa(t, e) { return Do(1 + ro.count(ko(t), t), e, 3) } function Ea(t, e) { return Do(t.getUTCMilliseconds(), e, 3) } function Ta(t, e) { return Ea(t, e) + "000" } function Na(t, e) { return Do(t.getUTCMonth() + 1, e, 2) } function Sa(t, e) { return Do(t.getUTCMinutes(), e, 2) } function Fa(t, e) { return Do(t.getUTCSeconds(), e, 2) } function za(t) { var e = t.getUTCDay(); return 0 === e ? 7 : e } function Da(t, e) { return Do(go.count(ko(t) - 1, t), e, 2) } function La(t) { var e = t.getUTCDay(); return e >= 4 || 0 === e ? yo(t) : yo.ceil(t) } function $a(t, e) { return t = La(t), Do(yo.count(ko(t), t) + (4 === ko(t).getUTCDay()), e, 2) } function Oa(t) { return t.getUTCDay() } function Pa(t, e) { return Do(bo.count(ko(t) - 1, t), e, 2) } function Ua(t, e) { return Do(t.getUTCFullYear() % 100, e, 2) } function ja(t, e) { return Do((t = La(t)).getUTCFullYear() % 100, e, 2) } function Ha(t, e) { return Do(t.getUTCFullYear() % 1e4, e, 4) } function qa(t, e) { var n = t.getUTCDay(); return Do((t = n >= 4 || 0 === n ? yo(t) : yo.ceil(t)).getUTCFullYear() % 1e4, e, 4) } function Ba() { return "+0000" } function Ya() { return "%" } function Ra(t) { return +t } function Ia(t) { return Math.floor(+t / 1e3) } Eo = function (t) { var e = t.dateTime, n = t.date, r = t.time, i = t.periods, o = t.days, a = t.shortDays, l = t.months, s = t.shortMonths, u = $o(i), c = Oo(i), f = $o(o), d = Oo(o), h = $o(a), p = Oo(a), g = $o(l), b = Oo(l), _ = $o(s), m = Oo(s), y = { a: function (t) { return a[t.getDay()] }, A: function (t) { return o[t.getDay()] }, b: function (t) { return s[t.getMonth()] }, B: function (t) { return l[t.getMonth()] }, c: null, d: ra, e: ra, f: sa, g: ya, G: wa, H: ia, I: oa, j: aa, L: la, m: ua, M: ca, p: function (t) { return i[+(t.getHours() >= 12)] }, q: function (t) { return 1 + ~~(t.getMonth() / 3) }, Q: Ra, s: Ia, S: fa, u: da, U: ha, V: ga, w: ba, W: _a, x: null, X: null, y: ma, Y: va, Z: xa, "%": Ya }, v = { a: function (t) { return a[t.getUTCDay()] }, A: function (t) { return o[t.getUTCDay()] }, b: function (t) { return s[t.getUTCMonth()] }, B: function (t) { return l[t.getUTCMonth()] }, c: null, d: ka, e: ka, f: Ta, g: ja, G: qa, H: Ma, I: Ca, j: Aa, L: Ea, m: Na, M: Sa, p: function (t) { return i[+(t.getUTCHours() >= 12)] }, q: function (t) { return 1 + ~~(t.getUTCMonth() / 3) }, Q: Ra, s: Ia, S: Fa, u: za, U: Da, V: $a, w: Oa, W: Pa, x: null, X: null, y: Ua, Y: Ha, Z: Ba, "%": Ya }, w = { a: function (t, e, n) { var r = h.exec(e.slice(n)); return r ? (t.w = p.get(r[0].toLowerCase()), n + r[0].length) : -1 }, A: function (t, e, n) { var r = f.exec(e.slice(n)); return r ? (t.w = d.get(r[0].toLowerCase()), n + r[0].length) : -1 }, b: function (t, e, n) { var r = _.exec(e.slice(n)); return r ? (t.m = m.get(r[0].toLowerCase()), n + r[0].length) : -1 }, B: function (t, e, n) { var r = g.exec(e.slice(n)); return r ? (t.m = b.get(r[0].toLowerCase()), n + r[0].length) : -1 }, c: function (t, n, r) { return M(t, e, n, r) }, d: Go, e: Go, f: Ko, g: Yo, G: Bo, H: Xo, I: Xo, j: Vo, L: Jo, m: Wo, M: Zo, p: function (t, e, n) { var r = u.exec(e.slice(n)); return r ? (t.p = c.get(r[0].toLowerCase()), n + r[0].length) : -1 }, q: Io, Q: ea, s: na, S: Qo, u: Uo, U: jo, V: Ho, w: Po, W: qo, x: function (t, e, r) { return M(t, n, e, r) }, X: function (t, e, n) { return M(t, r, e, n) }, y: Yo, Y: Bo, Z: Ro, "%": ta }; function x(t, e) { return function (n) { var r, i, o, a = [], l = -1, s = 0, u = t.length; for (n instanceof Date || (n = new Date(+n)); ++l < u;)37 === t.charCodeAt(l) && (a.push(t.slice(s, l)), null != (i = No[r = t.charAt(++l)]) ? r = t.charAt(++l) : i = "e" === r ? " " : "0", (o = e[r]) && (r = o(n, i)), a.push(r), s = l + 1); return a.push(t.slice(s, l)), a.join("") } } function k(t, e) { return function (n) { var r, i, o = Ao(1900, void 0, 1); if (M(o, t, n += "", 0) != n.length) return null; if ("Q" in o) return new Date(o.Q); if ("s" in o) return new Date(1e3 * o.s + ("L" in o ? o.L : 0)); if (e && !("Z" in o) && (o.Z = 0), "p" in o && (o.H = o.H % 12 + 12 * o.p), void 0 === o.m && (o.m = "q" in o ? o.q : 0), "V" in o) { if (o.V < 1 || o.V > 53) return null; "w" in o || (o.w = 1), "Z" in o ? (i = (r = Co(Ao(o.y, 0, 1))).getUTCDay(), r = i > 4 || 0 === i ? bo.ceil(r) : bo(r), r = ro.offset(r, 7 * (o.V - 1)), o.y = r.getUTCFullYear(), o.m = r.getUTCMonth(), o.d = r.getUTCDate() + (o.w + 6) % 7) : (i = (r = Mo(Ao(o.y, 0, 1))).getDay(), r = i > 4 || 0 === i ? lo.ceil(r) : lo(r), r = no.offset(r, 7 * (o.V - 1)), o.y = r.getFullYear(), o.m = r.getMonth(), o.d = r.getDate() + (o.w + 6) % 7) } else ("W" in o || "U" in o) && ("w" in o || (o.w = "u" in o ? o.u % 7 : "W" in o ? 1 : 0), i = "Z" in o ? Co(Ao(o.y, 0, 1)).getUTCDay() : Mo(Ao(o.y, 0, 1)).getDay(), o.m = 0, o.d = "W" in o ? (o.w + 6) % 7 + 7 * o.W - (i + 5) % 7 : o.w + 7 * o.U - (i + 6) % 7); return "Z" in o ? (o.H += o.Z / 100 | 0, o.M += o.Z % 100, Co(o)) : Mo(o) } } function M(t, e, n, r) { for (var i, o, a = 0, l = e.length, s = n.length; a < l;) { if (r >= s) return -1; if (37 === (i = e.charCodeAt(a++))) { if (i = e.charAt(a++), !(o = w[i in No ? e.charAt(a++) : i]) || (r = o(t, n, r)) < 0) return -1 } else if (i != n.charCodeAt(r++)) return -1 } return r } return y.x = x(n, y), y.X = x(r, y), y.c = x(e, y), v.x = x(n, v), v.X = x(r, v), v.c = x(e, v), { format: function (t) { var e = x(t += "", y); return e.toString = function () { return t }, e }, parse: function (t) { var e = k(t += "", !1); return e.toString = function () { return t }, e }, utcFormat: function (t) { var e = x(t += "", v); return e.toString = function () { return t }, e }, utcParse: function (t) { var e = k(t += "", !0); return e.toString = function () { return t }, e } } }({ dateTime: "%x, %X", date: "%-m/%-d/%Y", time: "%-I:%M:%S %p", periods: ["AM", "PM"], days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] }), To = Eo.format, Eo.parse, Eo.utcFormat, Eo.utcParse; var Wa = Uint8Array, Ga = Uint16Array, Va = Int32Array, Xa = new Wa([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]), Za = new Wa([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]), Qa = new Wa([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), Ja = function (t, e) { for (var n = new Ga(31), r = 0; r < 31; ++r)n[r] = e += 1 << t[r - 1]; var i = new Va(n[30]); for (r = 1; r < 30; ++r)for (var o = n[r]; o < n[r + 1]; ++o)i[o] = o - n[r] << 5 | r; return { b: n, r: i } }, Ka = Ja(Xa, 2), tl = Ka.b, el = Ka.r; tl[28] = 258, el[258] = 28; for (var nl = Ja(Za, 0).r, rl = new Ga(32768), il = 0; il < 32768; ++il) { var ol = (43690 & il) >> 1 | (21845 & il) << 1; ol = (61680 & (ol = (52428 & ol) >> 2 | (13107 & ol) << 2)) >> 4 | (3855 & ol) << 4, rl[il] = ((65280 & ol) >> 8 | (255 & ol) << 8) >> 1 } var al = function (t, e, n) { for (var r = t.length, i = 0, o = new Ga(e); i < r; ++i)t[i] && ++o[t[i] - 1]; var a, l = new Ga(e); for (i = 1; i < e; ++i)l[i] = l[i - 1] + o[i - 1] << 1; if (n) { a = new Ga(1 << e); var s = 15 - e; for (i = 0; i < r; ++i)if (t[i]) for (var u = i << 4 | t[i], c = e - t[i], f = l[t[i] - 1]++ << c, d = f | (1 << c) - 1; f <= d; ++f)a[rl[f] >> s] = u } else for (a = new Ga(r), i = 0; i < r; ++i)t[i] && (a[i] = rl[l[t[i] - 1]++] >> 15 - t[i]); return a }, ll = new Wa(288); for (il = 0; il < 144; ++il)ll[il] = 8; for (il = 144; il < 256; ++il)ll[il] = 9; for (il = 256; il < 280; ++il)ll[il] = 7; for (il = 280; il < 288; ++il)ll[il] = 8; var sl = new Wa(32); for (il = 0; il < 32; ++il)sl[il] = 5; var ul = al(ll, 9, 0), cl = al(sl, 5, 0), fl = function (t) { return (t + 7) / 8 | 0 }, dl = function (t, e, n) { return (null == n || n > t.length) && (n = t.length), new Wa(t.subarray(e, n)) }, hl = ["unexpected EOF", "invalid block type", "invalid length/literal", "invalid distance", "stream finished", "no stream handler", , "no callback", "invalid UTF-8 data", "extra field too long", "date not in range 1980-2099", "filename too long", "stream finishing", "invalid zip data"], pl = function (t, e, n) { var r = new Error(e || hl[t]); if (r.code = t, Error.captureStackTrace && Error.captureStackTrace(r, pl), !n) throw r; return r }, gl = function (t, e, n) { n <<= 7 & e; var r = e / 8 | 0; t[r] |= n, t[r + 1] |= n >> 8 }, bl = function (t, e, n) { n <<= 7 & e; var r = e / 8 | 0; t[r] |= n, t[r + 1] |= n >> 8, t[r + 2] |= n >> 16 }, _l = function (t, e) { for (var n = [], r = 0; r < t.length; ++r)t[r] && n.push({ s: r, f: t[r] }); var i = n.length, o = n.slice(); if (!i) return { t: Ml, l: 0 }; if (1 == i) { var a = new Wa(n[0].s + 1); return a[n[0].s] = 1, { t: a, l: 1 } } n.sort((function (t, e) { return t.f - e.f })), n.push({ s: -1, f: 25001 }); var l = n[0], s = n[1], u = 0, c = 1, f = 2; for (n[0] = { s: -1, f: l.f + s.f, l: l, r: s }; c != i - 1;)l = n[n[u].f < n[f].f ? u++ : f++], s = n[u != c && n[u].f < n[f].f ? u++ : f++], n[c++] = { s: -1, f: l.f + s.f, l: l, r: s }; var d = o[0].s; for (r = 1; r < i; ++r)o[r].s > d && (d = o[r].s); var h = new Ga(d + 1), p = ml(n[c - 1], h, 0); if (p > e) { r = 0; var g = 0, b = p - e, _ = 1 << b; for (o.sort((function (t, e) { return h[e.s] - h[t.s] || t.f - e.f })); r < i; ++r) { var m = o[r].s; if (!(h[m] > e)) break; g += _ - (1 << p - h[m]), h[m] = e } for (g >>= b; g > 0;) { var y = o[r].s; h[y] < e ? g -= 1 << e - h[y]++ - 1 : ++r } for (; r >= 0 && g; --r) { var v = o[r].s; h[v] == e && (--h[v], ++g) } p = e } return { t: new Wa(h), l: p } }, ml = function (t, e, n) { return -1 == t.s ? Math.max(ml(t.l, e, n + 1), ml(t.r, e, n + 1)) : e[t.s] = n }, yl = function (t) { for (var e = t.length; e && !t[--e];); for (var n = new Ga(++e), r = 0, i = t[0], o = 1, a = function (t) { n[r++] = t }, l = 1; l <= e; ++l)if (t[l] == i && l != e) ++o; else { if (!i && o > 2) { for (; o > 138; o -= 138)a(32754); o > 2 && (a(o > 10 ? o - 11 << 5 | 28690 : o - 3 << 5 | 12305), o = 0) } else if (o > 3) { for (a(i), --o; o > 6; o -= 6)a(8304); o > 2 && (a(o - 3 << 5 | 8208), o = 0) } for (; o--;)a(i); o = 1, i = t[l] } return { c: n.subarray(0, r), n: e } }, vl = function (t, e) { for (var n = 0, r = 0; r < e.length; ++r)n += t[r] * e[r]; return n }, wl = function (t, e, n) { var r = n.length, i = fl(e + 2); t[i] = 255 & r, t[i + 1] = r >> 8, t[i + 2] = 255 ^ t[i], t[i + 3] = 255 ^ t[i + 1]; for (var o = 0; o < r; ++o)t[i + o + 4] = n[o]; return 8 * (i + 4 + r) }, xl = function (t, e, n, r, i, o, a, l, s, u, c) { gl(e, c++, n), ++i[256]; for (var f = _l(i, 15), d = f.t, h = f.l, p = _l(o, 15), g = p.t, b = p.l, _ = yl(d), m = _.c, y = _.n, v = yl(g), w = v.c, x = v.n, k = new Ga(19), M = 0; M < m.length; ++M)++k[31 & m[M]]; for (M = 0; M < w.length; ++M)++k[31 & w[M]]; for (var C = _l(k, 7), A = C.t, E = C.l, T = 19; T > 4 && !A[Qa[T - 1]]; --T); var N, S, F, z, D = u + 5 << 3, L = vl(i, ll) + vl(o, sl) + a, $ = vl(i, d) + vl(o, g) + a + 14 + 3 * T + vl(k, A) + 2 * k[16] + 3 * k[17] + 7 * k[18]; if (s >= 0 && D <= L && D <= $) return wl(e, c, t.subarray(s, s + u)); if (gl(e, c, 1 + ($ < L)), c += 2, $ < L) { N = al(d, h, 0), S = d, F = al(g, b, 0), z = g; var O = al(A, E, 0); gl(e, c, y - 257), gl(e, c + 5, x - 1), gl(e, c + 10, T - 4), c += 14; for (M = 0; M < T; ++M)gl(e, c + 3 * M, A[Qa[M]]); c += 3 * T; for (var P = [m, w], U = 0; U < 2; ++U) { var j = P[U]; for (M = 0; M < j.length; ++M) { var H = 31 & j[M]; gl(e, c, O[H]), c += A[H], H > 15 && (gl(e, c, j[M] >> 5 & 127), c += j[M] >> 12) } } } else N = ul, S = ll, F = cl, z = sl; for (M = 0; M < l; ++M) { var q = r[M]; if (q > 255) { bl(e, c, N[(H = q >> 18 & 31) + 257]), c += S[H + 257], H > 7 && (gl(e, c, q >> 23 & 31), c += Xa[H]); var B = 31 & q; bl(e, c, F[B]), c += z[B], B > 3 && (bl(e, c, q >> 5 & 8191), c += Za[B]) } else bl(e, c, N[q]), c += S[q] } return bl(e, c, N[256]), c + S[256] }, kl = new Va([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]), Ml = new Wa(0), Cl = function () { for (var t = new Int32Array(256), e = 0; e < 256; ++e) { for (var n = e, r = 9; --r;)n = (1 & n && -306674912) ^ n >>> 1; t[e] = n } return t }(), Al = function () { var t = -1; return { p: function (e) { for (var n = t, r = 0; r < e.length; ++r)n = Cl[255 & n ^ e[r]] ^ n >>> 8; t = n }, d: function () { return ~t } } }, El = function (t, e, n, r, i) { if (!i && (i = { l: 1 }, e.dictionary)) { var o = e.dictionary.subarray(-32768), a = new Wa(o.length + t.length); a.set(o), a.set(t, o.length), t = a, i.w = o.length } return function (t, e, n, r, i, o) { var a = o.z || t.length, l = new Wa(r + a + 5 * (1 + Math.ceil(a / 7e3)) + i), s = l.subarray(r, l.length - i), u = o.l, c = 7 & (o.r || 0); if (e) { c && (s[0] = o.r >> 3); for (var f = kl[e - 1], d = f >> 13, h = 8191 & f, p = (1 << n) - 1, g = o.p || new Ga(32768), b = o.h || new Ga(p + 1), _ = Math.ceil(n / 3), m = 2 * _, y = function (e) { return (t[e] ^ t[e + 1] << _ ^ t[e + 2] << m) & p }, v = new Va(25e3), w = new Ga(288), x = new Ga(32), k = 0, M = 0, C = o.i || 0, A = 0, E = o.w || 0, T = 0; C + 2 < a; ++C) { var N = y(C), S = 32767 & C, F = b[N]; if (g[S] = F, b[N] = S, E <= C) { var z = a - C; if ((k > 7e3 || A > 24576) && (z > 423 || !u)) { c = xl(t, s, 0, v, w, x, M, A, T, C - T, c), A = k = M = 0, T = C; for (var D = 0; D < 286; ++D)w[D] = 0; for (D = 0; D < 30; ++D)x[D] = 0 } var L = 2, $ = 0, O = h, P = S - F & 32767; if (z > 2 && N == y(C - P)) for (var U = Math.min(d, z) - 1, j = Math.min(32767, C), H = Math.min(258, z); P <= j && --O && S != F;) { if (t[C + L] == t[C + L - P]) { for (var q = 0; q < H && t[C + q] == t[C + q - P]; ++q); if (q > L) { if (L = q, $ = P, q > U) break; var B = Math.min(P, q - 2), Y = 0; for (D = 0; D < B; ++D) { var R = C - P + D & 32767, I = R - g[R] & 32767; I > Y && (Y = I, F = R) } } } P += (S = F) - (F = g[S]) & 32767 } if ($) { v[A++] = 268435456 | el[L] << 18 | nl[$]; var W = 31 & el[L], G = 31 & nl[$]; M += Xa[W] + Za[G], ++w[257 + W], ++x[G], E = C + L, ++k } else v[A++] = t[C], ++w[t[C]] } } for (C = Math.max(C, E); C < a; ++C)v[A++] = t[C], ++w[t[C]]; c = xl(t, s, u, v, w, x, M, A, T, C - T, c), u || (o.r = 7 & c | s[c / 8 | 0] << 3, c -= 7, o.h = b, o.p = g, o.i = C, o.w = E) } else { for (C = o.w || 0; C < a + u; C += 65535) { var V = C + 65535; V >= a && (s[c / 8 | 0] = u, V = a), c = wl(s, c + 1, t.subarray(C, V)) } o.i = a } return dl(l, 0, r + fl(c) + i) }(t, null == e.level ? 6 : e.level, null == e.mem ? i.l ? Math.ceil(1.5 * Math.max(8, Math.min(13, Math.log(t.length)))) : 20 : 12 + e.mem, n, r, i) }, Tl = function (t, e) { var n = {}; for (var r in t) n[r] = t[r]; for (var r in e) n[r] = e[r]; return n }, Nl = function (t, e, n) { for (; n; ++e)t[e] = n, n >>>= 8 }; function Sl(t, e) { return El(t, e || {}, 0, 0) } var Fl = function (t, e, n, r) { for (var i in t) { var o = t[i], a = e + i, l = r; Array.isArray(o) && (l = Tl(r, o[1]), o = o[0]), o instanceof Wa ? n[a] = [o, l] : (n[a += "/"] = [new Wa(0), l], Fl(o, a, n, r)) } }, zl = "undefined" != typeof TextEncoder && new TextEncoder, Dl = "undefined" != typeof TextDecoder && new TextDecoder; try { Dl.decode(Ml, { stream: !0 }) } catch (t) { } function Ll(t, e) { if (zl) return zl.encode(t); for (var n = t.length, r = new Wa(t.length + (t.length >> 1)), i = 0, o = function (t) { r[i++] = t }, a = 0; a < n; ++a) { if (i + 5 > r.length) { var l = new Wa(i + 8 + (n - a << 1)); l.set(r), r = l } var s = t.charCodeAt(a); s < 128 || e ? o(s) : s < 2048 ? (o(192 | s >> 6), o(128 | 63 & s)) : s > 55295 && s < 57344 ? (o(240 | (s = 65536 + (1047552 & s) | 1023 & t.charCodeAt(++a)) >> 18), o(128 | s >> 12 & 63), o(128 | s >> 6 & 63), o(128 | 63 & s)) : (o(224 | s >> 12), o(128 | s >> 6 & 63), o(128 | 63 & s)) } return dl(r, 0, i) } var $l = function (t) { var e = 0; if (t) for (var n in t) { var r = t[n].length; r > 65535 && pl(9), e += r + 4 } return e }, Ol = function (t, e, n, r, i, o, a, l) { var s = r.length, u = n.extra, c = l && l.length, f = $l(u); Nl(t, e, null != a ? 33639248 : 67324752), e += 4, null != a && (t[e++] = 20, t[e++] = n.os), t[e] = 20, e += 2, t[e++] = n.flag << 1 | (o < 0 && 8), t[e++] = i && 8, t[e++] = 255 & n.compression, t[e++] = n.compression >> 8; var d = new Date(null == n.mtime ? Date.now() : n.mtime), h = d.getFullYear() - 1980; if ((h < 0 || h > 119) && pl(10), Nl(t, e, h << 25 | d.getMonth() + 1 << 21 | d.getDate() << 16 | d.getHours() << 11 | d.getMinutes() << 5 | d.getSeconds() >> 1), e += 4, -1 != o && (Nl(t, e, n.crc), Nl(t, e + 4, o < 0 ? -o - 2 : o), Nl(t, e + 8, n.size)), Nl(t, e + 12, s), Nl(t, e + 14, f), e += 16, null != a && (Nl(t, e, c), Nl(t, e + 6, n.attrs), Nl(t, e + 10, a), e += 14), t.set(r, e), e += s, f) for (var p in u) { var g = u[p], b = g.length; Nl(t, e, +p), Nl(t, e + 2, b), t.set(g, e + 4), e += 4 + b } return c && (t.set(l, e), e += c), e }; function Pl(t, e) { e || (e = {}); var n = {}, r = []; Fl(t, "", n, e); var i = 0, o = 0; for (var a in n) { var l = n[a], s = l[0], u = l[1], c = 0 == u.level ? 0 : 8, f = (k = Ll(a)).length, d = u.comment, h = d && Ll(d), p = h && h.length, g = $l(u.extra); f > 65535 && pl(11); var b = c ? Sl(s, u) : s, _ = b.length, m = Al(); m.p(s), r.push(Tl(u, { size: s.length, crc: m.d(), c: b, f: k, m: h, u: f != a.length || h && d.length != p, o: i, compression: c })), i += 30 + f + g + _, o += 76 + 2 * (f + g) + (p || 0) + _ } for (var y = new Wa(o + 22), v = i, w = o - i, x = 0; x < r.length; ++x) { var k = r[x]; Ol(y, k.o, k, k.f, k.u, k.c.length); var M = 30 + k.f.length + $l(k.extra); y.set(k.c, k.o + M), Ol(y, i, k, k.f, k.u, k.c.length, k.o, k.m), i += 16 + M + (k.m ? k.m.length : 0) } return function (t, e, n, r, i) { Nl(t, e, 101010256), Nl(t, e + 8, n), Nl(t, e + 10, n), Nl(t, e + 12, r), Nl(t, e + 16, i) }(y, i, r.length, w, v), y } var Ul = new Date, jl = new Date; function Hl(t, e, n, r) { function i(e) { return t(e = 0 === arguments.length ? new Date : new Date(+e)), e } return i.floor = function (e) { return t(e = new Date(+e)), e }, i.ceil = function (n) { return t(n = new Date(n - 1)), e(n, 1), t(n), n }, i.round = function (t) { var e = i(t), n = i.ceil(t); return t - e < n - t ? e : n }, i.offset = function (t, n) { return e(t = new Date(+t), null == n ? 1 : Math.floor(n)), t }, i.range = function (n, r, o) { var a, l = []; if (n = i.ceil(n), o = null == o ? 1 : Math.floor(o), !(n < r && o > 0)) return l; do { l.push(a = new Date(+n)), e(n, o), t(n) } while (a < n && n < r); return l }, i.filter = function (n) { return Hl((function (e) { if (e >= e) for (; t(e), !n(e);)e.setTime(e - 1) }), (function (t, r) { if (t >= t) if (r < 0) for (; ++r <= 0;)for (; e(t, -1), !n(t);); else for (; --r >= 0;)for (; e(t, 1), !n(t);); })) }, n && (i.count = function (e, r) { return Ul.setTime(+e), jl.setTime(+r), t(Ul), t(jl), Math.floor(n(Ul, jl)) }, i.every = function (t) { return t = Math.floor(t), isFinite(t) && t > 0 ? t > 1 ? i.filter(r ? function (e) { return r(e) % t == 0 } : function (e) { return i.count(0, e) % t == 0 }) : i : null }), i } var ql = 864e5, Bl = 6048e5, Yl = Hl((function (t) { t.setHours(0, 0, 0, 0) }), (function (t, e) { t.setDate(t.getDate() + e) }), (function (t, e) { return (e - t - 6e4 * (e.getTimezoneOffset() - t.getTimezoneOffset())) / ql }), (function (t) { return t.getDate() - 1 })); function Rl(t) { return Hl((function (e) { e.setDate(e.getDate() - (e.getDay() + 7 - t) % 7), e.setHours(0, 0, 0, 0) }), (function (t, e) { t.setDate(t.getDate() + 7 * e) }), (function (t, e) { return (e - t - 6e4 * (e.getTimezoneOffset() - t.getTimezoneOffset())) / Bl })) } Yl.range; var Il = Rl(0), Wl = Rl(1), Gl = Rl(2), Vl = Rl(3), Xl = Rl(4), Zl = Rl(5), Ql = Rl(6); Il.range, Wl.range, Gl.range, Vl.range, Xl.range, Zl.range, Ql.range; var Jl = Hl((function (t) { t.setMonth(0, 1), t.setHours(0, 0, 0, 0) }), (function (t, e) { t.setFullYear(t.getFullYear() + e) }), (function (t, e) { return e.getFullYear() - t.getFullYear() }), (function (t) { return t.getFullYear() })); Jl.every = function (t) { return isFinite(t = Math.floor(t)) && t > 0 ? Hl((function (e) { e.setFullYear(Math.floor(e.getFullYear() / t) * t), e.setMonth(0, 1), e.setHours(0, 0, 0, 0) }), (function (e, n) { e.setFullYear(e.getFullYear() + n * t) })) : null }, Jl.range; var Kl = Hl((function (t) { t.setUTCHours(0, 0, 0, 0) }), (function (t, e) { t.setUTCDate(t.getUTCDate() + e) }), (function (t, e) { return (e - t) / ql }), (function (t) { return t.getUTCDate() - 1 })); function ts(t) { return Hl((function (e) { e.setUTCDate(e.getUTCDate() - (e.getUTCDay() + 7 - t) % 7), e.setUTCHours(0, 0, 0, 0) }), (function (t, e) { t.setUTCDate(t.getUTCDate() + 7 * e) }), (function (t, e) { return (e - t) / Bl })) } Kl.range; var es = ts(0), ns = ts(1), rs = ts(2), is = ts(3), os = ts(4), as = ts(5), ls = ts(6); es.range, ns.range, rs.range, is.range, os.range, as.range, ls.range; var ss = Hl((function (t) { t.setUTCMonth(0, 1), t.setUTCHours(0, 0, 0, 0) }), (function (t, e) { t.setUTCFullYear(t.getUTCFullYear() + e) }), (function (t, e) { return e.getUTCFullYear() - t.getUTCFullYear() }), (function (t) { return t.getUTCFullYear() })); function us(t) { if (0 <= t.y && t.y < 100) { var e = new Date(-1, t.m, t.d, t.H, t.M, t.S, t.L); return e.setFullYear(t.y), e } return new Date(t.y, t.m, t.d, t.H, t.M, t.S, t.L) } function cs(t) { if (0 <= t.y && t.y < 100) { var e = new Date(Date.UTC(-1, t.m, t.d, t.H, t.M, t.S, t.L)); return e.setUTCFullYear(t.y), e } return new Date(Date.UTC(t.y, t.m, t.d, t.H, t.M, t.S, t.L)) } function fs(t, e, n) { return { y: t, m: e, d: n, H: 0, M: 0, S: 0, L: 0 } } ss.every = function (t) { return isFinite(t = Math.floor(t)) && t > 0 ? Hl((function (e) { e.setUTCFullYear(Math.floor(e.getUTCFullYear() / t) * t), e.setUTCMonth(0, 1), e.setUTCHours(0, 0, 0, 0) }), (function (e, n) { e.setUTCFullYear(e.getUTCFullYear() + n * t) })) : null }, ss.range; var ds, hs, ps, gs = { "-": "", _: " ", 0: "0" }, bs = /^\s*\d+/, _s = /^%/, ms = /[\\^$*+?|[\]().{}]/g; function ys(t, e, n) { var r = t < 0 ? "-" : "", i = (r ? -t : t) + "", o = i.length; return r + (o < n ? new Array(n - o + 1).join(e) + i : i) } function vs(t) { return t.replace(ms, "\\$&") } function ws(t) { return new RegExp("^(?:" + t.map(vs).join("|") + ")", "i") } function xs(t) { for (var e = {}, n = -1, r = t.length; ++n < r;)e[t[n].toLowerCase()] = n; return e } function ks(t, e, n) { var r = bs.exec(e.slice(n, n + 1)); return r ? (t.w = +r[0], n + r[0].length) : -1 } function Ms(t, e, n) { var r = bs.exec(e.slice(n, n + 1)); return r ? (t.u = +r[0], n + r[0].length) : -1 } function Cs(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.U = +r[0], n + r[0].length) : -1 } function As(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.V = +r[0], n + r[0].length) : -1 } function Es(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.W = +r[0], n + r[0].length) : -1 } function Ts(t, e, n) { var r = bs.exec(e.slice(n, n + 4)); return r ? (t.y = +r[0], n + r[0].length) : -1 } function Ns(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.y = +r[0] + (+r[0] > 68 ? 1900 : 2e3), n + r[0].length) : -1 } function Ss(t, e, n) { var r = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n, n + 6)); return r ? (t.Z = r[1] ? 0 : -(r[2] + (r[3] || "00")), n + r[0].length) : -1 } function Fs(t, e, n) { var r = bs.exec(e.slice(n, n + 1)); return r ? (t.q = 3 * r[0] - 3, n + r[0].length) : -1 } function zs(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.m = r[0] - 1, n + r[0].length) : -1 } function Ds(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.d = +r[0], n + r[0].length) : -1 } function Ls(t, e, n) { var r = bs.exec(e.slice(n, n + 3)); return r ? (t.m = 0, t.d = +r[0], n + r[0].length) : -1 } function $s(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.H = +r[0], n + r[0].length) : -1 } function Os(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.M = +r[0], n + r[0].length) : -1 } function Ps(t, e, n) { var r = bs.exec(e.slice(n, n + 2)); return r ? (t.S = +r[0], n + r[0].length) : -1 } function Us(t, e, n) { var r = bs.exec(e.slice(n, n + 3)); return r ? (t.L = +r[0], n + r[0].length) : -1 } function js(t, e, n) { var r = bs.exec(e.slice(n, n + 6)); return r ? (t.L = Math.floor(r[0] / 1e3), n + r[0].length) : -1 } function Hs(t, e, n) { var r = _s.exec(e.slice(n, n + 1)); return r ? n + r[0].length : -1 } function qs(t, e, n) { var r = bs.exec(e.slice(n)); return r ? (t.Q = +r[0], n + r[0].length) : -1 } function Bs(t, e, n) { var r = bs.exec(e.slice(n)); return r ? (t.s = +r[0], n + r[0].length) : -1 } function Ys(t, e) { return ys(t.getDate(), e, 2) } function Rs(t, e) { return ys(t.getHours(), e, 2) } function Is(t, e) { return ys(t.getHours() % 12 || 12, e, 2) } function Ws(t, e) { return ys(1 + Yl.count(Jl(t), t), e, 3) } function Gs(t, e) { return ys(t.getMilliseconds(), e, 3) } function Vs(t, e) { return Gs(t, e) + "000" } function Xs(t, e) { return ys(t.getMonth() + 1, e, 2) } function Zs(t, e) { return ys(t.getMinutes(), e, 2) } function Qs(t, e) { return ys(t.getSeconds(), e, 2) } function Js(t) { var e = t.getDay(); return 0 === e ? 7 : e } function Ks(t, e) { return ys(Il.count(Jl(t) - 1, t), e, 2) } function tu(t) { var e = t.getDay(); return e >= 4 || 0 === e ? Xl(t) : Xl.ceil(t) } function eu(t, e) { return t = tu(t), ys(Xl.count(Jl(t), t) + (4 === Jl(t).getDay()), e, 2) } function nu(t) { return t.getDay() } function ru(t, e) { return ys(Wl.count(Jl(t) - 1, t), e, 2) } function iu(t, e) { return ys(t.getFullYear() % 100, e, 2) } function ou(t, e) { return ys((t = tu(t)).getFullYear() % 100, e, 2) } function au(t, e) { return ys(t.getFullYear() % 1e4, e, 4) } function lu(t, e) { var n = t.getDay(); return ys((t = n >= 4 || 0 === n ? Xl(t) : Xl.ceil(t)).getFullYear() % 1e4, e, 4) } function su(t) { var e = t.getTimezoneOffset(); return (e > 0 ? "-" : (e *= -1, "+")) + ys(e / 60 | 0, "0", 2) + ys(e % 60, "0", 2) } function uu(t, e) { return ys(t.getUTCDate(), e, 2) } function cu(t, e) { return ys(t.getUTCHours(), e, 2) } function fu(t, e) { return ys(t.getUTCHours() % 12 || 12, e, 2) } function du(t, e) { return ys(1 + Kl.count(ss(t), t), e, 3) } function hu(t, e) { return ys(t.getUTCMilliseconds(), e, 3) } function pu(t, e) { return hu(t, e) + "000" } function gu(t, e) { return ys(t.getUTCMonth() + 1, e, 2) } function bu(t, e) { return ys(t.getUTCMinutes(), e, 2) } function _u(t, e) { return ys(t.getUTCSeconds(), e, 2) } function mu(t) { var e = t.getUTCDay(); return 0 === e ? 7 : e } function yu(t, e) { return ys(es.count(ss(t) - 1, t), e, 2) } function vu(t) { var e = t.getUTCDay(); return e >= 4 || 0 === e ? os(t) : os.ceil(t) } function wu(t, e) { return t = vu(t), ys(os.count(ss(t), t) + (4 === ss(t).getUTCDay()), e, 2) } function xu(t) { return t.getUTCDay() } function ku(t, e) { return ys(ns.count(ss(t) - 1, t), e, 2) } function Mu(t, e) { return ys(t.getUTCFullYear() % 100, e, 2) } function Cu(t, e) { return ys((t = vu(t)).getUTCFullYear() % 100, e, 2) } function Au(t, e) { return ys(t.getUTCFullYear() % 1e4, e, 4) } function Eu(t, e) { var n = t.getUTCDay(); return ys((t = n >= 4 || 0 === n ? os(t) : os.ceil(t)).getUTCFullYear() % 1e4, e, 4) } function Tu() { return "+0000" } function Nu() { return "%" } function Su(t) { return +t } function Fu(t) { return Math.floor(+t / 1e3) } function zu(t) { throw new TypeError("Expected a value of type string but got a value of type " + typeof t) } function Du(t) { return function (e) { return "string" != typeof e && zu(e), (e = e.trim()) ? t(e) : null } } !function (t) { ds = function (t) { var e = t.dateTime, n = t.date, r = t.time, i = t.periods, o = t.days, a = t.shortDays, l = t.months, s = t.shortMonths, u = ws(i), c = xs(i), f = ws(o), d = xs(o), h = ws(a), p = xs(a), g = ws(l), b = xs(l), _ = ws(s), m = xs(s), y = { a: function (t) { return a[t.getDay()] }, A: function (t) { return o[t.getDay()] }, b: function (t) { return s[t.getMonth()] }, B: function (t) { return l[t.getMonth()] }, c: null, d: Ys, e: Ys, f: Vs, g: ou, G: lu, H: Rs, I: Is, j: Ws, L: Gs, m: Xs, M: Zs, p: function (t) { return i[+(t.getHours() >= 12)] }, q: function (t) { return 1 + ~~(t.getMonth() / 3) }, Q: Su, s: Fu, S: Qs, u: Js, U: Ks, V: eu, w: nu, W: ru, x: null, X: null, y: iu, Y: au, Z: su, "%": Nu }, v = { a: function (t) { return a[t.getUTCDay()] }, A: function (t) { return o[t.getUTCDay()] }, b: function (t) { return s[t.getUTCMonth()] }, B: function (t) { return l[t.getUTCMonth()] }, c: null, d: uu, e: uu, f: pu, g: Cu, G: Eu, H: cu, I: fu, j: du, L: hu, m: gu, M: bu, p: function (t) { return i[+(t.getUTCHours() >= 12)] }, q: function (t) { return 1 + ~~(t.getUTCMonth() / 3) }, Q: Su, s: Fu, S: _u, u: mu, U: yu, V: wu, w: xu, W: ku, x: null, X: null, y: Mu, Y: Au, Z: Tu, "%": Nu }, w = { a: function (t, e, n) { var r = h.exec(e.slice(n)); return r ? (t.w = p[r[0].toLowerCase()], n + r[0].length) : -1 }, A: function (t, e, n) { var r = f.exec(e.slice(n)); return r ? (t.w = d[r[0].toLowerCase()], n + r[0].length) : -1 }, b: function (t, e, n) { var r = _.exec(e.slice(n)); return r ? (t.m = m[r[0].toLowerCase()], n + r[0].length) : -1 }, B: function (t, e, n) { var r = g.exec(e.slice(n)); return r ? (t.m = b[r[0].toLowerCase()], n + r[0].length) : -1 }, c: function (t, n, r) { return M(t, e, n, r) }, d: Ds, e: Ds, f: js, g: Ns, G: Ts, H: $s, I: $s, j: Ls, L: Us, m: zs, M: Os, p: function (t, e, n) { var r = u.exec(e.slice(n)); return r ? (t.p = c[r[0].toLowerCase()], n + r[0].length) : -1 }, q: Fs, Q: qs, s: Bs, S: Ps, u: Ms, U: Cs, V: As, w: ks, W: Es, x: function (t, e, r) { return M(t, n, e, r) }, X: function (t, e, n) { return M(t, r, e, n) }, y: Ns, Y: Ts, Z: Ss, "%": Hs }; function x(t, e) { return function (n) { var r, i, o, a = [], l = -1, s = 0, u = t.length; for (n instanceof Date || (n = new Date(+n)); ++l < u;)37 === t.charCodeAt(l) && (a.push(t.slice(s, l)), null != (i = gs[r = t.charAt(++l)]) ? r = t.charAt(++l) : i = "e" === r ? " " : "0", (o = e[r]) && (r = o(n, i)), a.push(r), s = l + 1); return a.push(t.slice(s, l)), a.join("") } } function k(t, e) { return function (n) { var r, i, o = fs(1900, void 0, 1); if (M(o, t, n += "", 0) != n.length) return null; if ("Q" in o) return new Date(o.Q); if ("s" in o) return new Date(1e3 * o.s + ("L" in o ? o.L : 0)); if (e && !("Z" in o) && (o.Z = 0), "p" in o && (o.H = o.H % 12 + 12 * o.p), void 0 === o.m && (o.m = "q" in o ? o.q : 0), "V" in o) { if (o.V < 1 || o.V > 53) return null; "w" in o || (o.w = 1), "Z" in o ? (i = (r = cs(fs(o.y, 0, 1))).getUTCDay(), r = i > 4 || 0 === i ? ns.ceil(r) : ns(r), r = Kl.offset(r, 7 * (o.V - 1)), o.y = r.getUTCFullYear(), o.m = r.getUTCMonth(), o.d = r.getUTCDate() + (o.w + 6) % 7) : (i = (r = us(fs(o.y, 0, 1))).getDay(), r = i > 4 || 0 === i ? Wl.ceil(r) : Wl(r), r = Yl.offset(r, 7 * (o.V - 1)), o.y = r.getFullYear(), o.m = r.getMonth(), o.d = r.getDate() + (o.w + 6) % 7) } else ("W" in o || "U" in o) && ("w" in o || (o.w = "u" in o ? o.u % 7 : "W" in o ? 1 : 0), i = "Z" in o ? cs(fs(o.y, 0, 1)).getUTCDay() : us(fs(o.y, 0, 1)).getDay(), o.m = 0, o.d = "W" in o ? (o.w + 6) % 7 + 7 * o.W - (i + 5) % 7 : o.w + 7 * o.U - (i + 6) % 7); return "Z" in o ? (o.H += o.Z / 100 | 0, o.M += o.Z % 100, cs(o)) : us(o) } } function M(t, e, n, r) { for (var i, o, a = 0, l = e.length, s = n.length; a < l;) { if (r >= s) return -1; if (37 === (i = e.charCodeAt(a++))) { if (i = e.charAt(a++), !(o = w[i in gs ? e.charAt(a++) : i]) || (r = o(t, n, r)) < 0) return -1 } else if (i != n.charCodeAt(r++)) return -1 } return r } return y.x = x(n, y), y.X = x(r, y), y.c = x(e, y), v.x = x(n, v), v.X = x(r, v), v.c = x(e, v), { format: function (t) { var e = x(t += "", y); return e.toString = function () { return t }, e }, parse: function (t) { var e = k(t += "", !1); return e.toString = function () { return t }, e }, utcFormat: function (t) { var e = x(t += "", v); return e.toString = function () { return t }, e }, utcParse: function (t) { var e = k(t += "", !0); return e.toString = function () { return t }, e } } }(t), ds.format, ds.parse, hs = ds.utcFormat, ps = ds.utcParse }({ dateTime: "%x, %X", date: "%-m/%-d/%Y", time: "%-I:%M:%S %p", periods: ["AM", "PM"], days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] }); var Lu = new Date(1972, 3, 27, 19, 45, 5), $u = { "%b %d": [{ regex: /^june\s(30|[12][0-9]|0?[1-9])$/i, toDate: function (t) { return new Date(null, 5, t.split(/\s/)[1]) } }, { regex: /^july\s(3[01]|[12][0-9]|0?[1-9])$/i, toDate: function (t) { return new Date(null, 6, t.split(/\s/)[1]) } }, { regex: /^sept\s(30|[12][0-9]|0?[1-9])$/i, toDate: function (t) { return new Date(null, 8, t.split(/\s/)[1]) } }], "%d %b": [{ regex: /^(0?[1-9]|[1-9][0-9])\sjune$/i, toDate: function (t) { return new Date(null, 5, t.split(/\s/)[0]) } }, { regex: /^(0?[1-9]|[1-9][0-9])\sjuly$/i, toDate: function (t) { return new Date(null, 6, t.split(/\s/)[0]) } }, { regex: /^(0?[1-9]|[1-9][0-9])\ssept$/i, toDate: function (t) { return new Date(null, 8, t.split(/\s/)[0]) } }] }; function Ou(t) { return function (e) { var n = null; return t.forEach((function (t) { e.match(t.regex) && (n = t.toDate(e)) })), n } } function Pu(t, e) { var n, r = ps(t), i = hs(t); return n = Du("function" == typeof e ? function (t) { return e(t, null !== r(t)) } : function (t) { return null !== r(t) }), Object.freeze({ test: n, parse: Du((function (e) { return r(e) || ($u[t] ? Ou($u[t])(e) : null) })), format: function (t) { return i(t) }, type: "datetime", description: t, id: "datetime$" + t, example: i(Lu) }) } var Uu = Object.freeze([Pu("%Y-%m-%dT%H:%M:%S.%LZ"), Pu("%Y-%m-%d %H:%M:%S"), Pu("%Y-%m-%dT%H:%M:%S"), Pu("%Y-%m-%dT%H:%M:%SZ"), Pu("%d/%m/%Y", (function (t, e) { if (!e) return !1; var n = t.split("/").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[1] > 0 && n[1] <= 12 && n[2] >= 1e3 })), Pu("%d/%m/%Y %H:%M", (function (t, e) { if (!e) return !1; var n = t.split(/[/ :]/).map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[1] > 0 && n[1] <= 12 && n[2] >= 1e3 && n[3] >= 0 && n[3] < 24 && n[4] >= 0 && n[4] < 60 })), Pu("%d/%m/%y", (function (t, e) { if (!e) return !1; var n = t.split("/").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[1] > 0 && n[1] <= 12 && !isNaN(n[2]) })), Pu("%m/%d/%Y", (function (t, e) { if (!e) return !1; var n = t.split("/").map(parseFloat); return n[0] > 0 && n[0] <= 12 && n[1] > 0 && n[1] <= 31 && n[2] >= 1e3 })), Pu("%m/%d/%Y %H:%M", (function (t, e) { if (!e) return !1; var n = t.split(/[/ :]/).map(parseFloat); return n[0] > 0 && n[0] <= 12 && n[1] > 0 && n[1] <= 31 && n[2] >= 1e3 && n[3] >= 0 && n[3] < 24 && n[4] >= 0 && n[4] < 60 })), Pu("%m/%d/%y", (function (t, e) { if (!e) return !1; var n = t.split("/").map(parseFloat); return n[0] > 0 && n[0] <= 12 && n[1] > 0 && n[1] <= 31 && !isNaN(n[2]) })), Pu("%Y/%m/%d", (function (t, e) { if (!e) return !1; var n = t.split("/").map(parseFloat); return n[0] >= 1e3 && n[1] > 0 && n[1] <= 12 && n[2] > 0 && n[2] <= 31 })), Pu("%d-%m-%Y", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[1] > 0 && n[1] <= 12 && n[2] >= 1e3 })), Pu("%d-%m-%y", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[1] > 0 && n[1] <= 12 && !isNaN(n[2]) })), Pu("%d.%m.%Y", (function (t, e) { if (!e) return !1; var n = t.split(".").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[1] > 0 && n[1] <= 12 && n[2] >= 1e3 })), Pu("%m.%d.%y", (function (t, e) { if (!e) return !1; var n = t.split(".").map(parseFloat); return n[0] > 0 && n[0] <= 12 && n[1] > 0 && n[1] <= 31 && !isNaN(n[2]) })), Pu("%m-%d-%Y", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] > 0 && n[0] <= 12 && n[1] > 0 && n[1] <= 31 && n[2] >= 1e3 })), Pu("%m-%d-%y", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] > 0 && n[0] <= 12 && n[1] > 0 && n[1] <= 31 && !isNaN(n[2]) })), Pu("%Y-%m-%d", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] >= 1e3 && n[1] > 0 && n[1] <= 12 && n[2] > 0 && n[2] <= 31 })), Pu("%Y-%m", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] >= 1e3 && n[1] > 0 && n[1] <= 12 })), Pu("%d %b %Y", (function (t, e) { if (!e) return !1; var n = t.split(" ").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[2] >= 1e3 })), Pu("%d %B %Y", (function (t, e) { if (!e) return !1; var n = t.split(" ").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[2] >= 1e3 })), Pu("%d %b %y"), Pu("%-d %b â€™%y"), Pu("%d %B %y"), Pu("%d-%b-%Y", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[2] >= 1e3 })), Pu("%d-%B-%Y", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[2] >= 1e3 })), Pu("%d-%b-%y"), Pu("%d-%B-%y"), Pu("%m/%Y", (function (t, e) { if (!e) return !1; var n = t.split("/").map(parseFloat); return n[0] > 0 && n[0] <= 12 && n[1] >= 1e3 })), Pu("%m/%y"), Pu("%b %Y", (function (t, e) { return !!e && t.split(" ").map(parseFloat)[1] >= 1e3 })), Pu("%B %Y", (function (t, e) { return !!e && t.split(" ").map(parseFloat)[1] >= 1e3 })), Pu("%b-%y"), Pu("%b %y"), Pu("%B %y"), Pu("%b '%y"), Pu("%b â€™%y"), Pu("%B %-d %Y"), Pu("%d %b", (function (t, e) { return !!e || !!Ou($u["%d %b"])(t) })), Pu("%d %B"), Pu("%b %d", (function (t, e) { return !!e || !!Ou($u["%b %d"])(t) })), Pu("%B %d"), Pu("%d-%m", (function (t, e) { if (!e) return !1; var n = t.split("-").map(parseFloat); return n[0] > 0 && n[0] <= 31 && n[1] > 0 && n[1] <= 12 })), Pu("%m-%d"), Pu("%d/%m"), Pu("%m/%d"), Pu("%b %d %Y"), Pu("%b %d %Y, %-I.%M%p"), Pu("%B"), Pu("%b"), Pu("%X"), Pu("%I:%M %p"), Pu("%-I.%M%p"), Pu("%H:%M", (function (t, e) { if (!e) return !1; var n = t.split(":").map(parseFloat); return n[0] >= 0 && n[0] < 24 })), Pu("%H:%M:%S"), Pu("%M:%S"), Pu("%-I%p"), Pu("Q%q %Y", (function (t, e) { return !!e && 6 === t.replace(/\s/g, "").length })), Pu("%Y Q%q", (function (t, e) { return !!e && 6 === t.replace(/\s/g, "").length })), Pu("%YM%m", (function (t, e) { if (!e) return !1; var n = t.split("M").map(parseFloat); return n[0] >= 1e3 && n[1] > 0 && n[1] <= 12 })), Pu("%YQ%q", (function (t, e) { if (!e) return !1; var n = t.split("Q").map(parseFloat); return n[0] >= 1e3 && n[1] > 0 && n[1] <= 4 })), Pu("%YÃ%q", (function (t, e) { if (!e) return !1; var n = t.split("Ã").map(parseFloat); return n[0] >= 1e3 && n[1] > 0 && n[1] <= 4 }))]), ju = Object.freeze([Pu("%Y", (function (t, e) { if (!e) return !1; var n = parseFloat(t); return n > 1499 && n < 2200 })), Pu("%Y%m", (function (t, e) { if (!e) return !1; var n = parseFloat(t.slice(0, 4)), r = parseFloat(t.slice(4)); return n > 1e3 && r > 0 && r <= 12 }))]); function Hu(t, e) { if ((n = (t = e ? t.toExponential(e - 1) : t.toExponential()).indexOf("e")) < 0) return null; var n, r = t.slice(0, n); return [r.length > 1 ? r[0] + r.slice(2) : r, +t.slice(n + 1)] } function qu(t) { return (t = Hu(Math.abs(t))) ? t[1] : NaN } var Bu, Yu = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i; function Ru(t) { if (!(e = Yu.exec(t))) throw new Error("invalid format: " + t); var e; return new Iu({ fill: e[1], align: e[2], sign: e[3], symbol: e[4], zero: e[5], width: e[6], comma: e[7], precision: e[8] && e[8].slice(1), trim: e[9], type: e[10] }) } function Iu(t) { this.fill = void 0 === t.fill ? " " : t.fill + "", this.align = void 0 === t.align ? ">" : t.align + "", this.sign = void 0 === t.sign ? "-" : t.sign + "", this.symbol = void 0 === t.symbol ? "" : t.symbol + "", this.zero = !!t.zero, this.width = void 0 === t.width ? void 0 : +t.width, this.comma = !!t.comma, this.precision = void 0 === t.precision ? void 0 : +t.precision, this.trim = !!t.trim, this.type = void 0 === t.type ? "" : t.type + "" } function Wu(t, e) { var n = Hu(t, e); if (!n) return t + ""; var r = n[0], i = n[1]; return i < 0 ? "0." + new Array(-i).join("0") + r : r.length > i + 1 ? r.slice(0, i + 1) + "." + r.slice(i + 1) : r + new Array(i - r.length + 2).join("0") } Ru.prototype = Iu.prototype, Iu.prototype.toString = function () { return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (void 0 === this.width ? "" : Math.max(1, 0 | this.width)) + (this.comma ? "," : "") + (void 0 === this.precision ? "" : "." + Math.max(0, 0 | this.precision)) + (this.trim ? "~" : "") + this.type }; var Gu = { "%": function (t, e) { return (100 * t).toFixed(e) }, b: function (t) { return Math.round(t).toString(2) }, c: function (t) { return t + "" }, d: function (t) { return Math.abs(t = Math.round(t)) >= 1e21 ? t.toLocaleString("en").replace(/,/g, "") : t.toString(10) }, e: function (t, e) { return t.toExponential(e) }, f: function (t, e) { return t.toFixed(e) }, g: function (t, e) { return t.toPrecision(e) }, o: function (t) { return Math.round(t).toString(8) }, p: function (t, e) { return Wu(100 * t, e) }, r: Wu, s: function (t, e) { var n = Hu(t, e); if (!n) return t + ""; var r = n[0], i = n[1], o = i - (Bu = 3 * Math.max(-8, Math.min(8, Math.floor(i / 3)))) + 1, a = r.length; return o === a ? r : o > a ? r + new Array(o - a + 1).join("0") : o > 0 ? r.slice(0, o) + "." + r.slice(o) : "0." + new Array(1 - o).join("0") + Hu(t, Math.max(0, e + o - 1))[0] }, X: function (t) { return Math.round(t).toString(16).toUpperCase() }, x: function (t) { return Math.round(t).toString(16) } }; function Vu(t) { return t } var Xu, Zu, Qu, Ju = Array.prototype.map, Ku = ["y", "z", "a", "f", "p", "n", "Âµ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"]; function tc(t) { var e, n, r = void 0 === t.grouping || void 0 === t.thousands ? Vu : (e = Ju.call(t.grouping, Number), n = t.thousands + "", function (t, r) { for (var i = t.length, o = [], a = 0, l = e[0], s = 0; i > 0 && l > 0 && (s + l + 1 > r && (l = Math.max(1, r - s)), o.push(t.substring(i -= l, i + l)), !((s += l + 1) > r));)l = e[a = (a + 1) % e.length]; return o.reverse().join(n) }), i = void 0 === t.currency ? "" : t.currency[0] + "", o = void 0 === t.currency ? "" : t.currency[1] + "", a = void 0 === t.decimal ? "." : t.decimal + "", l = void 0 === t.numerals ? Vu : function (t) { return function (e) { return e.replace(/[0-9]/g, (function (e) { return t[+e] })) } }(Ju.call(t.numerals, String)), s = void 0 === t.percent ? "%" : t.percent + "", u = void 0 === t.minus ? "-" : t.minus + "", c = void 0 === t.nan ? "NaN" : t.nan + ""; function f(t) { var e = (t = Ru(t)).fill, n = t.align, f = t.sign, d = t.symbol, h = t.zero, p = t.width, g = t.comma, b = t.precision, _ = t.trim, m = t.type; "n" === m ? (g = !0, m = "g") : Gu[m] || (void 0 === b && (b = 12), _ = !0, m = "g"), (h || "0" === e && "=" === n) && (h = !0, e = "0", n = "="); var y = "$" === d ? i : "#" === d && /[boxX]/.test(m) ? "0" + m.toLowerCase() : "", v = "$" === d ? o : /[%p]/.test(m) ? s : "", w = Gu[m], x = /[defgprs%]/.test(m); function k(t) { var i, o, s, d = y, k = v; if ("c" === m) k = w(t) + k, t = ""; else { var M = (t = +t) < 0 || 1 / t < 0; if (t = isNaN(t) ? c : w(Math.abs(t), b), _ && (t = function (t) { t: for (var e, n = t.length, r = 1, i = -1; r < n; ++r)switch (t[r]) { case ".": i = e = r; break; case "0": 0 === i && (i = r), e = r; break; default: if (!+t[r]) break t; i > 0 && (i = 0) }return i > 0 ? t.slice(0, i) + t.slice(e + 1) : t }(t)), M && 0 == +t && "+" !== f && (M = !1), d = (M ? "(" === f ? f : u : "-" === f || "(" === f ? "" : f) + d, k = ("s" === m ? Ku[8 + Bu / 3] : "") + k + (M && "(" === f ? ")" : ""), x) for (i = -1, o = t.length; ++i < o;)if (48 > (s = t.charCodeAt(i)) || s > 57) { k = (46 === s ? a + t.slice(i + 1) : t.slice(i)) + k, t = t.slice(0, i); break } } g && !h && (t = r(t, 1 / 0)); var C = d.length + t.length + k.length, A = C < p ? new Array(p - C + 1).join(e) : ""; switch (g && h && (t = r(A + t, A.length ? p - k.length : 1 / 0), A = ""), n) { case "<": t = d + t + k + A; break; case "=": t = d + A + t + k; break; case "^": t = A.slice(0, C = A.length >> 1) + d + t + k + A.slice(C); break; default: t = A + d + t + k }return l(t) } return b = void 0 === b ? 6 : /[gprs]/.test(m) ? Math.max(1, Math.min(21, b)) : Math.max(0, Math.min(20, b)), k.toString = function () { return t + "" }, k } return { format: f, formatPrefix: function (t, e) { var n = f(((t = Ru(t)).type = "f", t)), r = 3 * Math.max(-8, Math.min(8, Math.floor(qu(e) / 3))), i = Math.pow(10, -r), o = Ku[8 + r / 3]; return function (t) { return n(i * t) + o } } } } function ec(t) { return Math.max(0, -qu(Math.abs(t))) } function nc(t, e) { return Math.max(0, 3 * Math.max(-8, Math.min(8, Math.floor(qu(e) / 3))) - qu(Math.abs(t))) } function rc(t, e) { return t = Math.abs(t), e = Math.abs(e) - t, Math.max(0, qu(e) - qu(t)) + 1 } !function (t) { Xu = tc(t), Zu = Xu.format, Qu = Xu.formatPrefix }({ decimal: ".", thousands: ",", grouping: [3], currency: ["$", ""], minus: "-" }); var ic = { test: Du((function (t) { return /^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim()) })), parse: Du((function (t) { return parseFloat(t.replace(/,/g, "")) })), description: "Comma thousand separator, point decimal mark", thousand_separator: ",", decimal_mark: ".", id: "number$comma_point", example: "12,235.56" }, oc = { test: Du((function (t) { return /^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim()) })), parse: Du((function (t) { return parseFloat(t.replace(/\s/g, "")) })), description: "Space thousand separator, point decimal mark", thousand_separator: " ", decimal_mark: ".", id: "number$space_point", example: "12 235.56" }, ac = { test: Du((function (t) { return /^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim()) })), parse: Du((function (t) { return parseFloat(t) })), description: "No thousand separator, point decimal mark", thousand_separator: "", decimal_mark: ".", id: "number$none_point", example: "12235.56" }, lc = { test: Du((function (t) { return /^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim()) })), parse: Du((function (t) { return parseFloat(t.replace(/\./g, "").replace(/,/, ".")) })), description: "Point thousand separator, comma decimal mark", thousand_separator: ".", decimal_mark: ",", id: "number$point_comma", example: "12.235,56" }, sc = { test: Du((function (t) { return /^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim()) })), parse: Du((function (t) { return parseFloat(t.replace(/\s/g, "").replace(/,/, ".")) })), description: "Space thousand separator, comma decimal mark", thousand_separator: " ", decimal_mark: ",", id: "number$space_comma", example: "12 235,56" }, uc = { test: Du((function (t) { return /^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim()) })), parse: Du((function (t) { return parseFloat(t.replace(/,/, ".")) })), description: "No thousand separator, comma decimal mark", thousand_separator: "", decimal_mark: ",", id: "number$none_comma", example: "12235,56" }, cc = Object.freeze([ic, oc, lc, sc, ac, uc]); cc.forEach((function (t) { t.type = "number", t.format = function (t) { var e, n, r = tc({ decimal: t.decimal_mark, thousands: t.thousand_separator, grouping: [3], currency: ["", ""] }); return function (t, i) { return null === t ? "" : (i || (i = ",.2f"), i !== n && (n = i, e = r.format(n)), e(t)) } }(t), Object.freeze(t) })); var fc, dc = Object.freeze({ test: function (t) { return "string" == typeof t || zu(t) }, parse: function (t) { return "string" == typeof t ? t : zu(t) }, format: function (t) { if ("string" == typeof t) return t }, type: "string", description: "Arbitrary string", id: "string$arbitrary_string" }), hc = Object.freeze({ datetime: Uu, number: cc }), pc = Object.freeze(["datetime", "number", "string"]), gc = Object.freeze({ n_max: 250, n_failing_values: 0, failure_fraction: .05, sort: !0 }), bc = Object.freeze(Object.keys(gc)); function _c(t, e) { return t.index - e.index } function mc(t, e) { return e.n_success - t.n_success || _c(t, e) } function yc(t) { return ("" + t).trim() } function vc(t) { return void 0 === t ? function (t) { return yc(t) } : "function" == typeof t ? function (e, n) { return yc(t(e, n)) } : function (e) { return yc(e["" + t]) } } function wc(t) { t ? Array.isArray(t) || (t = [t]) : t = pc; var e = t.reduce((function (t, e) { var n = hc[e]; return n && Array.prototype.push.apply(t, n), t }), []), n = -1 !== t.indexOf("string"), r = bc.reduce((function (t, e) { return t[e] = gc[e], t }), {}), i = function (t, i) { i = vc(i); var o = t.map(i).filter(Boolean); if (!o.length) return n ? [dc] : []; var a = Math.min(r.n_max, o.length), l = Math.floor(a * r.failure_fraction), s = r.n_failing_values, u = r.sort ? mc : _c, c = e.slice().reduce((function (t, e, n) { for (var r = c = 0, i = [], u = !1, c = 0; c < a; c++) { var f = o[c]; if (!e.test(f) && (++r > l ? u = !0 : -1 === i.indexOf(f) && (i.push(f), i.length > s && (u = !0)), u)) break } return u || t.push({ interp: e, n_success: a - r, index: n }), t }), []).sort(u).map((function (t) { return t.interp })); return n && c.push(dc), c }; return bc.forEach((function (t) { var e; i[(e = t, e.replace(/_(\w)/g, (function (t, e) { return e.toUpperCase() })))] = function (e) { return void 0 === e ? r[t] : (r[t] = e, i) } })), i } wc.DATETIME_IDS = Object.freeze(Uu.concat(ju).map((function (t) { return t.id }))), wc.NUMBER_IDS = Object.freeze(cc.map((function (t) { return t.id }))), wc.STRING_IDS = Object.freeze([dc.id]), wc.DATETIME_FORMAT_ONLY_IDS = Object.freeze(ju.map((function (t) { return t.id }))), wc.getInterpretation = (fc = Uu.concat(ju, cc, dc).reduce((function (t, e) { return t[e.id] = e, t }), {}), function (t) { return fc[t] }), wc._createAccessorFunction = vc; const xc = wc.getInterpretation, kc = Object.freeze({ transform_labels: !1, transform: "multiply", multiply_divide_constant: 1, exponentiate_constant: 0, multiplier: 1, prefix: "", n_dec: 2, suffix: "", strip_zeros: !0, strip_separator: !0, negative_sign: "-$nk", show_positive_sign: !1 }); function Mc(t, e) { const n = xc(e); if (!n) throw new Error(`format_id ${e} not recognised`); if ("number" !== n.type) throw new Error(`format_id ${e}not a number format`); const r = n.format, i = n.decimal_mark, o = n.thousand_separator, a = Math.trunc(t.n_dec), l = (o ? "," : "") + "." + Math.max(0, a) + "f", s = t.strip_zeros && a > 0 ? new RegExp("\\" + i + "?0+$") : null, u = t.strip_separator && o, c = t.negative_sign, f = t.show_positive_sign, d = function (t) { let e = 1; return t.transform_labels && (e = "multiply" === t.transform ? t.multiply_divide_constant : "divide" === t.transform ? 1 / t.multiply_divide_constant : Math.pow(10, t.exponentiate_constant)), function (t) { return t * e } }(t); return function (e) { if (null === e) return ""; const n = function (t, e) { const n = t => Math.round(Math.abs(t)) * Math.sign(t); if (!(e = e > 0 ? Math.floor(e) : Math.ceil(e))) return n(t); const r = Math.pow(10, Math.abs(e)); return e > 0 ? n(t * r) / r : n(t / r) * r }(d(e), a), i = n < 0, h = Math.abs(n), p = u && o && h >= 1e3 && h < 1e4; let g = function (t) { return r(t, l) }(h); return s && (g = g.replace(s, "")), p && (g = g.replace(o, "")), !i && "$-nk" === c && f ? t.prefix + "+" + g + t.suffix : !i && "-$nk" === c && f ? "+" + t.prefix + g + t.suffix : i && "none" !== c ? "-$nk" === c ? "-" + t.prefix + g + t.suffix : "$-nk" === c ? t.prefix + "-" + g + t.suffix : "($nk)" === c ? "(" + t.prefix + g + t.suffix + ")" : t.prefix + "(" + g + ")" + t.suffix : t.prefix + g + t.suffix } } function Cc(t) { const e = wc.getInterpretation(t); if (!e) throw new Error(`format_id ${t} not recognised`); return function () { return e.format(...arguments) } } function Ac(t) { let e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, r = t; return "datetime" === e && Boolean(r) && (r = function (t, e) { let n = e; /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(e) ? n = new Date(e) : "string" == typeof e && (n = wc.getInterpretation(t).parse(n)); return Cc(t)(n) }(n, r)), "number" === e && Boolean(r) && (r = function (t, e) { const n = parseFloat(e), r = `,.${(e.toString().split(".")[1] || "").length}f`; let i = Cc(t)(e, r); const o = { none: "", comma: ",", point: ".", space: " " }, a = t.split("$")[1].split("_")[1]; return Number.isInteger(n) && (i = i.split(o[a])[0]), i }(n, r)), (String(r).includes(",") || String(r).includes('"') || String(r).includes("\r") || String(r).includes("\n")) && (r = `"${String(r).replace(/"/g, '""')}"`), r } function Ec(t) { const e = Object.keys(t); let n = {}; const r = ["lines", "order", "labels", "colors", "regions_geometry", "geo_regions"], i = e.filter((e => !r.includes(e) && 0 !== t[e].length)); return i.forEach((e => { const r = function (t, e) { const n = JSON.parse(JSON.stringify(t[e])); return n.column_names = t[e].column_names || {}, n.metadata = t[e].metadata || {}, n.forEach((t => { Object.keys(t).forEach((e => { Object.keys(n.column_names).includes(e) || delete t[e] })) })), n }(t, e); n[e] = r })), { formatted_datasets: n, datasets_to_download: i } } function Tc(t, e) { const n = t[e], { headers: r, header_index_lookup: i } = function (t) { const e = [], n = {}; for (const r in t.column_names) t.column_names[r] && ((Array.isArray(t.column_names[r]) ? t.column_names[r] : [t.column_names[r]]).forEach((t => { let n = Ac(t); e.includes(n) || e.push(n) })), Array.isArray(t.column_names[r]) ? n[r] = t.column_names[r].map((t => e.indexOf(Ac(t)))) : n[r] = e.indexOf(Ac(t.column_names[r]))); return { headers: e, header_index_lookup: n } }(n), o = function (t, e, n) { const r = []; return t.forEach((e => { const i = []; for (const r in e) { const o = e[r], a = n[r]; let l = t.metadata ? t.metadata[r]?.type : null, s = t.metadata ? t.metadata[r]?.type_id : null; Array.isArray(o) ? o.forEach(((e, n) => { l = t.metadata[r][n]?.type, s = t.metadata[r][n]?.type_id, i[a[n]] = Ac(e, l, s) })) : i[a] = Ac(o, l, s) } r.push(i) })), [e.join(",")].concat(r.map((t => t.join(",")))).join("\n") }(n, r, i); return o } function Nc() { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "csv"; const e = window.template?.metadata?.visualization_title, n = function (t) { return t.replace(/^\.+/, "").replace(/[\/\\]/g, "_").replace(/[<>:"|?*\x00-\x1f]/g, "_").replace(/^(con|prn|aux|nul|com[0-9]|lpt[0-9])$/i, "_$1").trim().replace(/[\s.]+$/, "").slice(0, 255) }(e || "Untitled_Visualization"); return `${n}.${t}` } var Sc = "object" == typeof window && window.window === window ? window : "object" == typeof self && self.self === self ? self : "object" == typeof global && global.global === global ? global : void 0; function Fc(t, e, n) { var r = new XMLHttpRequest; r.open("GET", t), r.responseType = "blob", r.onload = function () { $c(r.response, e, n) }, r.onerror = function () { console.error("could not download file") }, r.send() } function zc(t) { var e = new XMLHttpRequest; e.open("HEAD", t, !1); try { e.send() } catch (t) { } return e.status >= 200 && e.status <= 299 } function Dc(t) { try { t.dispatchEvent(new MouseEvent("click")) } catch (n) { var e = document.createEvent("MouseEvents"); e.initMouseEvent("click", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), t.dispatchEvent(e) } } var Lc = Sc.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent), $c = Sc.saveAs || ("object" != typeof window || window !== Sc ? function () { } : "download" in HTMLAnchorElement.prototype && !Lc ? function (t, e, n) { var r = Sc.URL || Sc.webkitURL, i = document.createElement("a"); e = e || t.name || "download", i.download = e, i.rel = "noopener", "string" == typeof t ? (i.href = t, i.origin !== location.origin ? zc(i.href) ? Fc(t, e, n) : Dc(i, i.target = "_blank") : Dc(i)) : (i.href = r.createObjectURL(t), setTimeout((function () { r.revokeObjectURL(i.href) }), 4e4), setTimeout((function () { Dc(i) }), 0)) } : "msSaveOrOpenBlob" in navigator ? function (t, e, n) { if (e = e || t.name || "download", "string" == typeof t) if (zc(t)) Fc(t, e, n); else { var r = document.createElement("a"); r.href = t, r.target = "_blank", setTimeout((function () { Dc(r) })) } else navigator.msSaveOrOpenBlob(function (t, e) { return void 0 === e ? e = { autoBom: !1 } : "object" != typeof e && (console.warn("Deprecated: Expected third argument to be a object"), e = { autoBom: !e }), e.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type) ? new Blob([String.fromCharCode(65279), t], { type: t.type }) : t }(t, n), e) } : function (t, e, n, r) { if ((r = r || open("", "_blank")) && (r.document.title = r.document.body.innerText = "downloading..."), "string" == typeof t) return Fc(t, e, n); var i = "application/octet-stream" === t.type, o = /constructor/i.test(Sc.HTMLElement) || Sc.safari, a = /CriOS\/[\d]+/.test(navigator.userAgent); if ((a || i && o || Lc) && "undefined" != typeof FileReader) { var l = new FileReader; l.onloadend = function () { var t = l.result; t = a ? t : t.replace(/^data:[^;]*;/, "data:attachment/file;"), r ? r.location.href = t : location = t, r = null }, l.readAsDataURL(t) } else { var s = Sc.URL || Sc.webkitURL, u = s.createObjectURL(t); r ? r.location = u : location.href = u, r = null, setTimeout((function () { s.revokeObjectURL(u) }), 4e4) } }); let Oc, Pc, Uc, jc, Hc; Sc.saveAs = $c.saveAs = $c; let qc = !1; function Bc() { var t; return (t = document.createElement("style")).type = "text/css", t.innerHTML = ".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }", document.head.appendChild(t), Oc = document.createElement("footer"), Oc.className = "flourish-footer", Pc = document.createElement("div"), Pc.className = "flourish-footer-text", Pc.setAttribute("id", "flourish-footer-text"), Uc = document.createElement("div"), Uc.className = "flourish-footer-logo-container", Oc.appendChild(Pc), Oc.appendChild(Uc), Oc } function Yc() { return nf.background_color_enabled && !function (t) { if (!t) return void console.warn("No valid color", t); const e = Xi("#000000", t); return Xi("#ffffff", t) < e }(nf.background_color) } function Rc() { var t = nf.footer_logo_src ? nf.footer_logo_src : ""; return nf.footer_logo_src_light && Yc() && (t = nf.footer_logo_src_light), t } function Ic() { return nf.footer_logo_enabled && Rc() } function Wc() { var t = [{ name: nf.source_name, url: nf.source_url }, { name: nf.multiple_sources ? nf.source_name_2 : "", url: nf.multiple_sources ? nf.source_url_2 : "" }, { name: nf.multiple_sources ? nf.source_name_3 : "", url: nf.multiple_sources ? nf.source_url_3 : "" }].filter((function (t) { return t.name || t.url })); qc = t.length > 0 || nf.footer_note || nf.footer_note_secondary || Ic(); var e, n = "top" == nf.footer_border || "top_and_bottom" == nf.footer_border, r = "bottom" == nf.footer_border || "top_and_bottom" == nf.footer_border; Oc.style.display = "flex", Oc.style.height = qc ? null : 0, Oc.style.width = "100%", Oc.style.paddingTop = n ? nf.footer_border_space + "rem" : "", Oc.style.paddingBottom = r ? nf.footer_border_space + "rem" : "", Oc.style.borderTop = n ? nf.footer_border_width + "px " + nf.footer_border_style + " " + nf.footer_border_color : "", Oc.style.borderBottom = r ? nf.footer_border_width + "px " + nf.footer_border_style + " " + nf.footer_border_color : "", Oc.style.fontFamily = nf.footer_font ? nf.footer_font.name : "inherit", Oc.style.fontWeight = nf.footer_text_weight, Oc.style.justifyContent = "justify" == (e = nf.footer_align) ? "space-between" : "left" == e ? "flex-start" : "right" == e ? "flex-end" : "center" == e ? "center" : void 0, Oc.style.fontSize = nf.footer_text_size + "rem", Oc.style.color = nf.footer_text_color || nf.font_color, Oc.style.alignItems = nf.footer_align_vertical; var i = document.createElement("span"); t.forEach((function (t, e) { var n = document.createElement("p"); if (e > 0 && (n.innerText = ", "), t.url) { var r = document.createElement("a"); r.innerText = t.name || t.url, r.href = Yi(t.url), r.target = "_blank", n.appendChild(r) } else n.innerText += t.name || t.url; i.innerHTML += n.innerHTML })), Pc.style.order = "left" == nf.footer_logo_order ? 2 : "", Pc.style.textAlign = Bi(nf.footer_align); const o = "" !== i.innerHTML ? `${nf.source_label} ${i.innerHTML}` : "", a = nf.footer_note ? ("" !== i.innerHTML ? " â€¢ " : "") + Gc("primary") : "", l = nf.footer_note_secondary ? `<br /><p>${Gc("secondary")}</p>` : ""; Pc.innerHTML = `<p>${o}${a}</p>${l}`, Uc.innerHTML = "", Ic() && (jc = jc || document.createElement("img"), jc.className = "flourish-footer-logo", jc.src = Yi(Rc()), jc.alt = nf.footer_logo_alt, jc.style.height = nf.footer_logo_height + "rem", jc.style.marginRight = "left" == nf.footer_logo_order ? nf.footer_logo_margin + "rem" : "", jc.style.marginLeft = "right" == nf.footer_logo_order ? nf.footer_logo_margin + "rem" : "", jc.style.verticalAlign = nf.footer_align_vertical, jc.style.display = Ic() ? "" : "none", nf.footer_logo_link_url ? (Hc = document.createElement("a"), Hc.target = "_blank", Hc.appendChild(jc), Uc.appendChild(Hc), jc.style.cursor = "pointer", Hc.href = Yi(nf.footer_logo_link_url)) : Uc.appendChild(jc)), document.querySelectorAll(".fl-data-download-button").forEach((t => { t.addEventListener("click", (async t => { t.preventDefault(); const { file_name: e, blob: n } = await async function () { const t = {}, { formatted_datasets: e, datasets_to_download: n } = Ec(window.template?.data); if (1 === n.length) { const t = n[0], r = Nc("csv"), i = Tc(e, t); return { file_name: r, blob: new Blob(["\ufeff" + i], { type: "text/csv" }) } } if (n.length > 1) { n.forEach((n => { const r = Tc(e, n); t[`${n}.csv`] = Ll("\ufeff" + r) })); const r = Nc("zip"), i = Pl(t); return { file_name: r, blob: new Blob([i], { type: "application/zip" }) } } return Flourish.warn("There is no data to download"), null }(); try { $c(n, e) } catch (t) { console.error("An error occurred while saving the file:", t) } })) })) } function Gc(t) { const e = ("primary" === t ? nf.footer_note : nf.footer_note_secondary).replace(/{{([^}]+)}}/g, ((t, e) => { if ("data_last_updated" === e) { return function (t, e) { let n = "n/a"; null !== t && (n = To(e)(t)); return n }(function (t) { const e = "data_last_updated" === t ? "last_updated" : t, n = Object.keys(window.template?.data); if (n.length > 0) { const t = n.map((t => window.template.data[t].timestamps?.[e] || null)).filter((t => null !== t)); if (0 === t.length) return null; return Math.max(...t) } return null }(e), nf.footer_timestamp_format) } if (e.includes("download_data")) { return !!window.template.data && (window.template.data.length || Object.keys(window.template.data).length) ? function (t) { const e = [...document.querySelectorAll(".fl-data-download-button")], n = [...document.querySelectorAll("#flourish-header-title, #flourish-header-subtitle, #flourish-header-text")].find((t => Boolean(t.textContent.trim()))), r = `fl-data-download-button-${e.length}`, i = n ? `aria-labelledby='${n.id} ${r}'` : ""; let o = "Download data"; if (t.includes('"')) { const e = t.indexOf('"'), n = t.lastIndexOf('"'); o = t.slice(e + 1, n) } return `<a id='${r}' ${i} href='#' class='fl-data-download-button'>${o}</a>` }(e) : (Flourish.warn("There is no data to download"), "") } return "" })); return e } function Vc() { Ni(), Ii(), Wc(), document.body.style.backgroundColor = nf.background_color_enabled ? nf.background_color : "transparent", document.body.style.backgroundImage = nf.background_image_enabled ? "url(" + nf.background_image_src + ")" : "", document.body.style.backgroundSize = nf.background_image_size, document.body.style.backgroundRepeat = "no-repeat", document.body.style.backgroundPosition = nf.background_image_position; var t = af.wrapper.style; t.display = "flex", t.height = "100vh", t.color = nf.font_color, t.maxWidth = "wrapper" == nf.max_width_target ? nf.max_width + "px" : "", t.marginLeft = "wrapper" == nf.max_width_target && "left" != nf.max_width_align ? "auto" : "", t.marginRight = "wrapper" == nf.max_width_target && "right" != nf.max_width_align ? "auto" : "", t.padding = nf.margin_top + "rem " + nf.margin_right + "rem " + nf.margin_bottom + "rem " + nf.margin_left + "rem", t.borderTop = nf.border.enabled ? nf.border.top.width + "px " + nf.border.top.style + " " + nf.border.top.color : "", t.borderRight = nf.border.enabled ? nf.border.right.width + "px " + nf.border.right.style + " " + nf.border.right.color : "", t.borderBottom = nf.border.enabled ? nf.border.bottom.width + "px " + nf.border.bottom.style + " " + nf.border.bottom.color : "", t.borderLeft = nf.border.enabled ? nf.border.left.width + "px " + nf.border.left.style + " " + nf.border.left.color : ""; var e = af.primary.outer.style, n = af.legend.outer.style, r = Xc(); if ("stack" == r.mode) r.elements.forEach((function (t, e) { af[t].outer.style.order = 10 * e })); else for (var i in r.elements) for (var o in r.elements[i]) { var a = af[i].outer || af[i]; a.style[o] = r.elements[i][o], a.style.order = "" } af.header.outer.style.display = "", af.footer.outer.style.display = "", af.controls.outer.style.display = "", e.display = "flex", n.display = "", e.flex = "1 1 auto", e.height = null, af.primary.outer.style.maxWidth = "primary" == nf.max_width_target ? nf.max_width + "px" : "", af.primary.outer.style.marginLeft = "primary" == nf.max_width_target && "left" != nf.max_width_align ? "auto" : "", af.primary.outer.style.marginRight = "primary" == nf.max_width_target && "right" != nf.max_width_align ? "auto" : ""; var l = "" != nf.screenreader_text_primary.trim(), s = document.getElementById("fl-layout-primary-description"); af.primary.outer.setAttribute("aria-label", "primary visualisation container"), s.innerText = nf.screenreader_text_primary, l ? af.primary.outer.setAttribute("aria-describedBy", "fl-layout-primary-description") : af.primary.outer.removeAttribute("aria-describedBy"), nf.screenreader_hide_primary ? af.primary.inner.setAttribute("aria-hidden", !0) : af.primary.inner.removeAttribute("aria-hidden"), "" != nf.screenreader_label.trim() ? cf().setAttribute("aria-label", nf.screenreader_label) : cf().removeAttribute("aria-label"), of.map((function (t) { var e = af[t], n = e.outer.style; return { name: t, height: sf(e.inner), order: parseFloat(n.order), style: n } })).sort((function (t, e) { return t.order - e.order })).filter((function (t) { if (t.height || "primary" == t.name) return !0; t.style.paddingBottom = "", t.style.paddingTop = "", t.style.display = "none" })).forEach((function (t, e, n) { t.style.width = "100%", t.style.paddingTop = e ? Zc("padding") : "", t.style.paddingBottom = e < n.length - 1 ? Zc("padding") : "" })), af.wrapper.style.gridColumnGap = Zc("gap"), af.wrapper.style.gridRowGap = Zc("gap"), document.body.setAttribute("dir", nf.read_direction), af.wrapper.setAttribute("dir", nf.read_direction), document.getElementById("fl-layout-wrapper-outer").setAttribute("dir", "ltr") } function Xc() { var t = window.innerWidth < nf.breakpoint_mobile_big, e = nf.layout_order.indexOf("grid") > -1, n = { id: nf.layout_order, mode: e ? "grid" : "stack", elements: Hi[nf.layout_order] }; return t && e && (n.id = "stack-default", n.mode = "stack", n.elements = Hi["stack-default"]), n } function Zc(t) { var e, n = Xc(); return e = "custom" == nf.space_between_sections ? nf.space_between_sections_custom : nf.space_between_sections, "grid" == n.mode ? "gap" == t ? e + "rem" : "" : "gap" == t ? "" : e / 2 + "rem" } var Qc = Object.freeze({ body_font: { name: "Canva Sans Variable", url: "https://public.flourish.studio/resources/fonts/canva-sans.css" }, title_font: null, subtitle_font: null, footer_font: null, read_direction: "ltr", border: { enabled: !1, top: { width: 1, color: "#dddddd", style: "solid" }, right: { width: 1, color: "#dddddd", style: "solid" }, bottom: { width: 1, color: "#dddddd", style: "solid" }, left: { width: 1, color: "#dddddd", style: "solid" } }, layout_order: "stack-default", margin_top: .75, margin_right: .75, margin_bottom: .75, margin_left: .75, space_between_sections: 1, space_between_sections_custom: 1, background_color_enabled: !0, background_color: "#ffffff", background_image_enabled: !1, background_image_src: "", background_image_size: "cover", background_image_position: "center center", max_width: 600, max_width_target: "none", max_width_align: "center", breakpoint_mobile_small: 0, breakpoint_mobile_big: 380, breakpoint_tablet: 580, breakpoint_desktop: 1080, breakpoint_big_screen: 1280, font_color: "#333333", font_size_mobile_small: 62.5, font_size_mobile_big: 75, font_size_tablet: 87.5, font_size_desktop: 100, font_size_big_screen: 120, header_align: "left", header_border: "none", header_border_width: 1, header_border_color: "#dddddd", header_border_style: "solid", header_border_space: .5, header_logo_enabled: !1, header_logo_align: "inside", header_logo_src: "", header_logo_alt: "Header logo", header_logo_link_url: "", header_logo_height: 3, header_logo_position_inside: "left", header_logo_position_outside: "left", header_logo_margin_top: .25, header_logo_margin_right: .5, header_logo_margin_bottom: 0, header_logo_margin_left: 0, title: "", title_size: 2, title_size_custom: 1.6, title_line_height: 1.2, title_color: null, title_weight: "bold", title_space_above: 0, title_space_above_custom: 1.5, title_styling: !1, subtitle: "", subtitle_size: 1.4, subtitle_size_custom: 1.6, subtitle_line_height: 1.2, subtitle_color: null, subtitle_weight: "normal", subtitle_space_above: .5, subtitle_space_above_custom: 1.5, subtitle_styling: !1, header_text: "", header_text_size: 1.2, header_text_size_custom: 1.2, header_text_line_height: 1.2, header_text_color: null, header_text_weight: "normal", header_text_space_above: .5, header_text_space_above_custom: 1.5, source_label: "Source: ", source_name: "", source_url: "", source_name_2: "", source_url_2: "", source_name_3: "", source_url_3: "", footer_note: "", footer_note_secondary: "", footer_text_size: 1, footer_text_color: null, footer_styling: !1, footer_text_weight: "normal", footer_align: "justify", footer_align_vertical: "center", footer_border: "none", footer_border_width: 1, footer_border_color: "#dddddd", footer_border_style: "solid", footer_border_space: .5, footer_logo_enabled: !1, footer_logo_src: "", footer_logo_src_light: "", footer_logo_alt: "Footer logo", footer_logo_link_url: "", footer_logo_height: 1.5, footer_logo_margin: .25, footer_logo_order: "right", footer_timestamp_format: "%H:%M:%S", screenreader_hide_primary: !0, screenreader_text_primary: "", screenreader_label: "" }); function Jc(t, e, n) { Ni(n), t = function (t) { return function () { return document.body.classList.add("fl-fonts-loaded"), t.apply(this, arguments) } }(t = t || window.template.update); var r = setTimeout(t, isNaN(e) ? 500 : e), i = []; document.fonts && i.push(document.fonts.ready), Ic() && i.push(function () { if (Ic()) return new Promise((function (t) { var e = Yi(Rc()); function n() { "undefined" != typeof Flourish && Flourish.warn && Flourish.warn("flourish-layout unable to load image: " + e), t() } jc = jc || document.createElement("img"), jc.onload = function () { t() }, jc.onerror = n, jc.oncancel = n, jc.src = e })) }()), Ri() && i.push(function () { if (Ri()) return new Promise((function (t) { var e = Yi(nf.header_logo_src); function n() { "undefined" != typeof Flourish && Flourish.warn && Flourish.warn("flourish-layout unable to load image: " + e), t() } (Ui = Ui || document.createElement("img")).onload = function () { t() }, Ui.onerror = n, Ui.oncancel = n, Ui.src = e })) }()), i.length && (document.fonts || i.push(new Promise((function (t) { setTimeout(t, 500) }))), Promise.all(i).then((function (e) { document.fonts && e[0].size && (clearTimeout(r), t(), Ti()), document.fonts.addEventListener("loadingdone", (function () { clearTimeout(r), t(), Ti() })) }))) } let Kc = null; function tf() { const t = function () { const t = "undefined" != typeof Flourish && Flourish.metadata || {}; return { credit_url: t.credit_url || "https://flourish.studio", credit_text: t.credit_text || "Made with Flourish â€¢ Create your own" } }(), e = t.credit_url, n = t.credit_text, r = document.createElement("div"); r.setAttribute("class", "flourish-credit"), r.setAttribute("style", "margin:4px 8px;text-align:right;font-family:system-ui,sans-serif;color:inherit;opacity:0.8;font-size:12px;font-weight:normal;font-style:normal;-webkit-font-smoothing:antialiased;box-shadow:none;order:50;"); const i = n.split("â€¢"), o = i.length > 1 ? i[0].trim() + " â€¢ " : "", a = i.length > 1 ? i[1].trim() : n; if (o) { const t = document.createElement("span"); t.setAttribute("style", "font:inherit;color:inherit;vertical-align:middle;display:inline-block;box-shadow:none;"), t.appendChild(document.createTextNode(o)), r.appendChild(t) } const l = document.createElement("a"); l.setAttribute("href", e + "?utm_source=embed&utm_campaign=visualisation"), l.setAttribute("target", "_blank"), l.setAttribute("aria-label", a + " (opens in new tab)"), l.setAttribute("rel", "noopener noreferrer"), l.setAttribute("style", "display:inline-block;text-decoration:none;font:inherit;color:inherit;border:none;box-shadow:none;"), r.appendChild(l); const s = document.createElement("span"); return s.setAttribute("style", "font:inherit;color:inherit;vertical-align:middle;display:inline-block;box-shadow:none;"), s.appendChild(document.createTextNode(a)), l.appendChild(s), s.addEventListener("mouseover", (function () { s.style.textDecoration = "underline" })), s.addEventListener("mouseout", (function () { s.style.textDecoration = "none" })), r } function ef() { if (Kc) return; if ("undefined" == typeof Flourish || !0 !== (Flourish.metadata || {}).show_internal_credit) return; Kc = tf(); const t = document.getElementById("fl-layout-footer-container"), e = document.getElementById("fl-layout-wrapper"); t && t.parentNode ? t.parentNode.insertBefore(Kc, t.nextSibling) : e ? e.appendChild(Kc) : document.body.appendChild(Kc) } var nf, rf, of = ["header", "controls", "legend", "primary", "footer"], af = {}; function lf(t) { return t.getBoundingClientRect().width } function sf(t) { return t.getBoundingClientRect().height } function uf(t, e) { var n = "fl-layout-" + t, r = document.createElement("section"); r.className = "fl-layout-container", r.id = n + "-container", r.style.width = "100%", r.style.position = "relative", r.style.order = e; var i = document.createElement("div"); return i.className = "fl-layout-inner", i.id = n, i.style.width = "100%", i.style.position = "relative", "primary" == t && (r.style.display = "flex", function (t) { var e = document.createElement("p"); e.id = "fl-layout-primary-description"; var n = e.style; n.border = "0", n.height = "1px", n.width = "1px", n.margin = "-1px", n.overflow = "hidden", n.padding = "0", n.position = "absolute", n.clip = "rect(0 0 0 0)", t.appendChild(e) }(r)), r.appendChild(i), af.wrapper.appendChild(r), { outer: r, inner: i } } function cf() { return af.wrapper } function ff() { return af.sidebar } function df(t) { return -1 !== of.indexOf(t) ? af[t].inner : null } function hf(t) { return af[t] || void 0 === t ? lf("wrapper" == t || void 0 === t ? af.wrapper : af[t].outer) : null } function pf(t) { return af[t] || void 0 === t ? "wrapper" == t || void 0 === t ? lf(af.wrapper) - xf("horizontal") - kf("horizontal") : lf(af[t].inner) : null } function gf(t) { return af[t] || void 0 === t ? sf("wrapper" == t || void 0 === t ? af.wrapper : af[t].outer) : null } function bf(t) { return af[t] || void 0 === t ? "wrapper" == t || void 0 === t ? sf(af.wrapper) - xf("vertical") - kf("vertical") : sf(af[t].inner) : null } function _f() { var t = "grid" == Xc().mode ? 0 : vf(af.primary.outer); return sf(af.primary.outer) - t } function mf() { return lf(af.primary.inner) } function yf() { return nf.screenreader_hide_primary ? "hidden" : "readable" } function vf(t) { return "grid" == Xc().mode ? parseFloat(getComputedStyle(af.wrapper).gap) || 0 : (parseFloat(getComputedStyle(t).paddingTop) || 0) + (parseFloat(getComputedStyle(t).paddingBottom) || 0) } function wf() { var t = function () { if (Flourish.fixed_height) return window.innerHeight; var t = window.innerWidth; return t > 999 ? 650 : t > 599 ? 575 : 400 }() - xf("vertical") - kf("vertical"), e = function () { var t = Xc(), e = "grid-1" == t.id ? [] : ["header", "controls", "legend", "footer"]; return e.reduce((function (e, n) { var r = gf(n); return r > 0 && "grid" == t.mode && (r += vf()), e + r }), 0) }(); return t - e - ("grid" == Xc().mode ? 0 : vf(af.primary.outer)) } function xf(t) { var e; return "left" == t ? e = nf.margin_left : "right" == t ? e = nf.margin_right : "top" == t ? e = nf.margin_top : "bottom" == t ? e = nf.margin_bottom : "horizontal" == t ? e = nf.margin_left + nf.margin_right : "vertical" == t && (e = nf.margin_top + nf.margin_bottom), qi(e) } function kf(t) { return nf.border.enabled ? "vertical" == t ? nf.border.top.width + nf.border.bottom.width : "horizontal" == t ? nf.border.left.width + nf.border.right.width : null : 0 } function Mf(t) { var e = af.primary; if (Flourish.fixed_height || void 0 === Flourish.fixed_height) e.inner.style.height = ""; else { var n = null === t, r = n ? wf() : t; r + vf(af.primary.outer) !== parseFloat(e.outer.style.height) && (af.wrapper.style.height = "", e.outer.style.flex = "", e.inner.style.height = r + "px", Flourish.setHeight(n ? null : gf())) } } function Cf(t) { var e = rf.querySelector(".fl-layout-overlay-message"); if (t) { rf.style.display = "block"; var n = "string" == typeof t ? t : "Your web browser does not support the features used by this content. Consider updating to a modern browser."; e.innerHTML = n } else e.textContent = "", rf.style.display = "none" } function Af() { return rf } let Ef; function Tf() { Ef && Nf(), Ef = function (t, e) { if ("string" == typeof t && (t = document.querySelector(t)), !t) return console.error("No valid target in createScreenshotSVG"), null; const { width: n, height: r, x: i, y: o } = t.getBoundingClientRect(), a = document.createElementNS("http://www.w3.org/2000/svg", "svg"); return a.id = e, a.classList.add("flourish-screenshot-svg-container"), a.style.left = i + "px", a.style.top = o + "px", a.style.width = n + "px", a.style.height = r + "px", a.style.position = "absolute", t.appendChild(a), { addTextElements: function (e) { if ("string" == typeof e && (e = t.querySelectorAll(e)), !e) return console.error("No valid els inside addTextElements"), null; for (const t of e) { const { x: e, y: n, width: r } = t.getBoundingClientRect(), i = document.createElementNS("http://www.w3.org/2000/svg", "text"), { color: o, "font-family": l, "font-size": s, "font-weight": u, "line-height": c, "padding-left": f, "padding-top": d } = window.getComputedStyle(t), h = `${u} ${s} ${l}`, p = xi(t.innerText, h, null, Math.ceil(r)), g = isNaN(parseFloat(c)) ? 1.2 * parseFloat(s) + "px" : c, b = window.getComputedStyle(t.closest("[style*='opacity']") || t).opacity; p.forEach(((t, n) => { const r = document.createElementNS("http://www.w3.org/2000/svg", "tspan"); r.innerHTML = t, r.setAttribute("dy", 0 === n ? parseFloat(d) : g), r.setAttribute("dx", parseFloat(f)), r.setAttribute("x", e), r.setAttribute("opacity", b), i.appendChild(r) })), i.style.dominantBaseline = "text-before-edge", i.setAttribute("x", e + "px"), i.setAttribute("y", n + "px"), i.setAttribute("font-family", l), i.setAttribute("font-size", s), i.setAttribute("font-weight", u), i.setAttribute("fill", o), a.appendChild(i) } return this }, addCircleElements: function (e) { if ("string" == typeof e && (e = t.querySelectorAll(e)), !e) return console.error("No valid els inside addCircleElements"), null; for (const t of e) { const e = document.createElementNS("http://www.w3.org/2000/svg", "circle"), { x: n, y: r, width: i } = t.getBoundingClientRect(), o = window.getComputedStyle(t)["background-color"], l = window.getComputedStyle(t.closest("[style*='opacity']") || t).opacity, s = i / 2; e.setAttribute("cx", n + s + "px"), e.setAttribute("cy", r + s + "px"), e.setAttribute("r", s + "px"), e.setAttribute("opacity", l), e.setAttribute("fill", o), "rgba(0, 0, 0, 0)" === o && e.setAttribute("stroke", "#CCC"), a.appendChild(e) } return this }, addSwatchElements: function (e, n) { if ("string" == typeof e && (e = t.querySelectorAll(e)), !e) return console.error("No valid els inside addSwatchElements"), null; "string" == typeof n && (n = t.querySelectorAll(n)); for (const [t, r] of e.entries()) { const e = document.createElementNS("http://www.w3.org/2000/svg", "rect"), { x: i, y: o, width: l, height: s } = r.getBoundingClientRect(), u = n[t]?.getBoundingClientRect()?.y, c = window.getComputedStyle(r)["background-color"], f = window.getComputedStyle(r).border, [, d, h, p, g] = f.replace(/\s/g, "").match(/rgba?\((\d+(?:\.\d+)?),(\d+(?:\.\d+)?),(\d+(?:\.\d+)?)(?:,(\d+(?:\.\d+)?))?\)/i), b = g ? `rgba(${d},${h},${p},${g})` : `rgb(${d},${h},${p})` || "#000", _ = f.split(" ")[0] || 0; let m = window.getComputedStyle(r)["border-radius"] || 0; m = parseFloat(m); const y = window.getComputedStyle(r.closest("[style*='opacity']") || r).opacity; e.setAttribute("x", i), e.setAttribute("y", u || o), e.setAttribute("width", `${l}px`), e.setAttribute("height", `${s}px`), e.setAttribute("rx", m), e.setAttribute("ry", m), e.setAttribute("opacity", y), e.setAttribute("fill", c), e.setAttribute("stroke", b), e.setAttribute("stroke-width", _), "rgba(0, 0, 0, 0)" === c && e.setAttribute("stroke", "#CCC"), a.appendChild(e) } return this }, addGradient: function (e, n, r) { if ("string" == typeof e && (e = t.querySelector(e)), !e) return console.error("No valid els inside addCircleElements"), null; const i = document.createElementNS("http://www.w3.org/2000/svg", "g"), { x: o, y: l, width: s, height: u } = e.getBoundingClientRect(), { max: c, min: f } = r, d = c - f; for (let t = 0; t <= s; t++) { const e = document.createElementNS("http://www.w3.org/2000/svg", "line"); e.setAttribute("stroke", n(f + t * d / s)), e.setAttribute("x1", t + o), e.setAttribute("y1", l), e.setAttribute("x2", t + o), e.setAttribute("y2", u + l), i.appendChild(e) } return a.appendChild(i), this }, remove: function () { a.remove() } } }(this.getWrapper(), "fl-layout-svg-screenshot-container"), Ef.addTextElements("#fl-layout-header-container h2"), Ef.addTextElements("#fl-layout-header-container h3"), Ef.addTextElements("#fl-layout-header-container p"), Ef.addTextElements("#fl-layout-footer .flourish-footer-text") } function Nf() { Ef.remove(), Ef = null } var Sf = Object.freeze({ categorical_type: "palette", categorical_palette: ["#135ae1", "#2197ff", "#9852d9", "#f54e8b", "#fa6502", "#f2b90f", "#058896", "#09aa64", "#de2c35", "#a7abaf", "#808080"], categorical_extend: !0, categorical_custom_palette: "", numeric_type: "sequential", sequential_palette: "FlourishBlues", sequential_custom_min: "#F5F7FF", sequential_custom_max: "#002196", sequential_color_space: "rgb", sequential_reverse: !1, sequential_custom_domain: !1, sequential_domain_min: 0, sequential_domain_max: 1, diverging_palette: "RdBu", diverging_custom_min: "#1AA7EE", diverging_custom_mid: "#F7F7F7", diverging_custom_max: "#FF6283", diverging_color_space: "rgb", diverging_reverse: !1, diverging_custom_domain: !1, diverging_domain_min: 0, diverging_domain_mid: .5, diverging_domain_max: 1, binning: !1, bin_count: 4, bin_mode: "fixed", bin_thresholds: "" }), Ff = 360 / ((1 + Math.sqrt(5)) / 2), zf = "#FF0000"; function Df(t, e, n) { return function (r, i) { Array.isArray(r) || (r = r ? [r] : [zf]), i = void 0 !== i ? i : Ff; var o = r.map((function (e) { return t(e) })).filter((function (t) { return !isNaN(t[e]) && !isNaN(t[n]) })); o.length || (o = [t(zf)]); var a, l = o.length, s = o.reduce((function (t, n) { return t + n[e] }), 0) / l, u = o.reduce((function (t, e) { return t + e[n] }), 0) / l, c = l; do { a = o[--c].h } while (isNaN(a) && c > 0); var f = 0; return function () { var e = ++f * i; return xr(t((a + e) % 360, s, u)).hex() } } } var Lf = { hcl: Df(Kr, "c", "l"), hsl: Df(Lr, "s", "l") }; function $f(t, e) { return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN } var Of, Pf, Uf = (1 === (Of = $f).length && (Pf = Of, Of = function (t, e) { return $f(Pf(t), e) }), { left: function (t, e, n, r) { for (null == n && (n = 0), null == r && (r = t.length); n < r;) { var i = n + r >>> 1; Of(t[i], e) < 0 ? n = i + 1 : r = i } return n }, right: function (t, e, n, r) { for (null == n && (n = 0), null == r && (r = t.length); n < r;) { var i = n + r >>> 1; Of(t[i], e) > 0 ? r = i : n = i + 1 } return n } }), jf = Uf.right; function Hf(t) { return null === t ? NaN : +t } function qf(t, e, n) { t = +t, e = +e, n = (i = arguments.length) < 2 ? (e = t, t = 0, 1) : i < 3 ? 1 : +n; for (var r = -1, i = 0 | Math.max(0, Math.ceil((e - t) / n)), o = new Array(i); ++r < i;)o[r] = t + r * n; return o } var Bf = Math.sqrt(50), Yf = Math.sqrt(10), Rf = Math.sqrt(2); function If(t, e, n) { var r = (e - t) / Math.max(0, n), i = Math.floor(Math.log(r) / Math.LN10), o = r / Math.pow(10, i); return i >= 0 ? (o >= Bf ? 10 : o >= Yf ? 5 : o >= Rf ? 2 : 1) * Math.pow(10, i) : -Math.pow(10, -i) / (o >= Bf ? 10 : o >= Yf ? 5 : o >= Rf ? 2 : 1) } function Wf(t, e, n) { if (null == n && (n = Hf), r = t.length) { if ((e = +e) <= 0 || r < 2) return +n(t[0], 0, t); if (e >= 1) return +n(t[r - 1], r - 1, t); var r, i = (r - 1) * e, o = Math.floor(i), a = +n(t[o], o, t); return a + (+n(t[o + 1], o + 1, t) - a) * (i - o) } } function Gf(t, e) { var n, r, i = t.length, o = -1; if (null == e) { for (; ++o < i;)if (null != (n = t[o]) && n >= n) for (r = n; ++o < i;)null != (n = t[o]) && r > n && (r = n) } else for (; ++o < i;)if (null != (n = e(t[o], o, t)) && n >= n) for (r = n; ++o < i;)null != (n = e(t[o], o, t)) && r > n && (r = n); return r } function Vf(t, e) { var n, r = t.length, i = -1, o = 0; if (null == e) for (; ++i < r;)(n = +t[i]) && (o += n); else for (; ++i < r;)(n = +e(t[i], i, t)) && (o += n); return o } function Xf(t, e) { switch (arguments.length) { case 0: break; case 1: this.range(t); break; default: this.range(e).domain(t) }return this } function Zf(t, e) { switch (arguments.length) { case 0: break; case 1: this.interpolator(t); break; default: this.interpolator(e).domain(t) }return this } var Qf = Array.prototype, Jf = Qf.map, Kf = Qf.slice; function td(t) { return +t } var ed = [0, 1]; function nd(t) { return t } function rd(t, e) { return (e -= t = +t) ? function (n) { return (n - t) / e } : function (t) { return function () { return t } }(isNaN(e) ? NaN : .5) } function id(t) { var e, n = t[0], r = t[t.length - 1]; return n > r && (e = n, n = r, r = e), function (t) { return Math.max(n, Math.min(r, t)) } } function od(t, e, n) { var r = t[0], i = t[1], o = e[0], a = e[1]; return i < r ? (r = rd(i, r), o = n(a, o)) : (r = rd(r, i), o = n(o, a)), function (t) { return o(r(t)) } } function ad(t, e, n) { var r = Math.min(t.length, e.length) - 1, i = new Array(r), o = new Array(r), a = -1; for (t[r] < t[0] && (t = t.slice().reverse(), e = e.slice().reverse()); ++a < r;)i[a] = rd(t[a], t[a + 1]), o[a] = n(e[a], e[a + 1]); return function (e) { var n = jf(t, e, 1, r) - 1; return o[n](i[n](e)) } } function ld(t, e) { return function () { var t, e, n, r, i, o, a = ed, l = ed, s = gn, u = nd; function c() { return r = Math.min(a.length, l.length) > 2 ? ad : od, i = o = null, f } function f(e) { return isNaN(e = +e) ? n : (i || (i = r(a.map(t), l, s)))(t(u(e))) } return f.invert = function (n) { return u(e((o || (o = r(l, a.map(t), cn)))(n))) }, f.domain = function (t) { return arguments.length ? (a = Jf.call(t, td), u === nd || (u = id(a)), c()) : a.slice() }, f.range = function (t) { return arguments.length ? (l = Kf.call(t), c()) : l.slice() }, f.rangeRound = function (t) { return l = Kf.call(t), s = bn, c() }, f.clamp = function (t) { return arguments.length ? (u = t ? id(a) : nd, f) : u !== nd }, f.interpolate = function (t) { return arguments.length ? (s = t, c()) : s }, f.unknown = function (t) { return arguments.length ? (n = t, f) : n }, function (n, r) { return t = n, e = r, c() } }()(t, e) } function sd(t, e, n, r) { var i, o = function (t, e, n) { var r = Math.abs(e - t) / Math.max(0, n), i = Math.pow(10, Math.floor(Math.log(r) / Math.LN10)), o = r / i; return o >= Bf ? i *= 10 : o >= Yf ? i *= 5 : o >= Rf && (i *= 2), e < t ? -i : i }(t, e, n); switch ((r = Ru(null == r ? ",f" : r)).type) { case "s": var a = Math.max(Math.abs(t), Math.abs(e)); return null != r.precision || isNaN(i = nc(o, a)) || (r.precision = i), Qu(r, a); case "": case "e": case "g": case "p": case "r": null != r.precision || isNaN(i = rc(o, Math.max(Math.abs(t), Math.abs(e)))) || (r.precision = i - ("e" === r.type)); break; case "f": case "%": null != r.precision || isNaN(i = ec(o)) || (r.precision = i - 2 * ("%" === r.type)) }return Zu(r) } function ud(t) { var e = t.domain; return t.ticks = function (t) { var n = e(); return function (t, e, n) { var r, i, o, a, l = -1; if (n = +n, (t = +t) == (e = +e) && n > 0) return [t]; if ((r = e < t) && (i = t, t = e, e = i), 0 === (a = If(t, e, n)) || !isFinite(a)) return []; if (a > 0) for (t = Math.ceil(t / a), e = Math.floor(e / a), o = new Array(i = Math.ceil(e - t + 1)); ++l < i;)o[l] = (t + l) * a; else for (t = Math.floor(t * a), e = Math.ceil(e * a), o = new Array(i = Math.ceil(t - e + 1)); ++l < i;)o[l] = (t - l) / a; return r && o.reverse(), o }(n[0], n[n.length - 1], null == t ? 10 : t) }, t.tickFormat = function (t, n) { var r = e(); return sd(r[0], r[r.length - 1], null == t ? 10 : t, n) }, t.nice = function (n) { null == n && (n = 10); var r, i = e(), o = 0, a = i.length - 1, l = i[o], s = i[a]; return s < l && (r = l, l = s, s = r, r = o, o = a, a = r), (r = If(l, s, n)) > 0 ? r = If(l = Math.floor(l / r) * r, s = Math.ceil(s / r) * r, n) : r < 0 && (r = If(l = Math.ceil(l * r) / r, s = Math.floor(s * r) / r, n)), r > 0 ? (i[o] = Math.floor(l / r) * r, i[a] = Math.ceil(s / r) * r, e(i)) : r < 0 && (i[o] = Math.ceil(l * r) / r, i[a] = Math.floor(s * r) / r, e(i)), t }, t } function cd() { var t = ld(nd, nd); return t.copy = function () { return e = t, cd().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown()); var e }, Xf.apply(t, arguments), ud(t) } function fd() { var t, e = [], n = [], r = []; function i() { var t = 0, i = Math.max(1, n.length); for (r = new Array(i - 1); ++t < i;)r[t - 1] = Wf(e, t / i); return o } function o(e) { return isNaN(e = +e) ? t : n[jf(r, e)] } return o.invertExtent = function (t) { var i = n.indexOf(t); return i < 0 ? [NaN, NaN] : [i > 0 ? r[i - 1] : e[0], i < r.length ? r[i] : e[e.length - 1]] }, o.domain = function (t) { if (!arguments.length) return e.slice(); e = []; for (var n, r = 0, o = t.length; r < o; ++r)null == (n = t[r]) || isNaN(n = +n) || e.push(n); return e.sort($f), i() }, o.range = function (t) { return arguments.length ? (n = Kf.call(t), i()) : n.slice() }, o.unknown = function (e) { return arguments.length ? (t = e, o) : t }, o.quantiles = function () { return r.slice() }, o.copy = function () { return fd().domain(e).range(n).unknown(t) }, Xf.apply(o, arguments) } function dd() { var t, e = 0, n = 1, r = 1, i = [.5], o = [0, 1]; function a(e) { return e <= e ? o[jf(i, e, 0, r)] : t } function l() { var t = -1; for (i = new Array(r); ++t < r;)i[t] = ((t + 1) * n - (t - r) * e) / (r + 1); return a } return a.domain = function (t) { return arguments.length ? (e = +t[0], n = +t[1], l()) : [e, n] }, a.range = function (t) { return arguments.length ? (r = (o = Kf.call(t)).length - 1, l()) : o.slice() }, a.invertExtent = function (t) { var a = o.indexOf(t); return a < 0 ? [NaN, NaN] : a < 1 ? [e, i[0]] : a >= r ? [i[r - 1], n] : [i[a - 1], i[a]] }, a.unknown = function (e) { return arguments.length ? (t = e, a) : a }, a.thresholds = function () { return i.slice() }, a.copy = function () { return dd().domain([e, n]).range(o).unknown(t) }, Xf.apply(ud(a), arguments) } function hd() { var t, e = [.5], n = [0, 1], r = 1; function i(i) { return i <= i ? n[jf(e, i, 0, r)] : t } return i.domain = function (t) { return arguments.length ? (e = Kf.call(t), r = Math.min(e.length, n.length - 1), i) : e.slice() }, i.range = function (t) { return arguments.length ? (n = Kf.call(t), r = Math.min(e.length, n.length - 1), i) : n.slice() }, i.invertExtent = function (t) { var r = n.indexOf(t); return [e[r - 1], e[r]] }, i.unknown = function (e) { return arguments.length ? (t = e, i) : t }, i.copy = function () { return hd().domain(e).range(n).unknown(t) }, Xf.apply(i, arguments) } function pd(t, e) { return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown()) } function gd() { var t = ud(function () { var t, e, n, r, i, o = 0, a = 1, l = nd, s = !1; function u(e) { return isNaN(e = +e) ? i : l(0 === n ? .5 : (e = (r(e) - t) * n, s ? Math.max(0, Math.min(1, e)) : e)) } return u.domain = function (i) { return arguments.length ? (t = r(o = +i[0]), e = r(a = +i[1]), n = t === e ? 0 : 1 / (e - t), u) : [o, a] }, u.clamp = function (t) { return arguments.length ? (s = !!t, u) : s }, u.interpolator = function (t) { return arguments.length ? (l = t, u) : l }, u.unknown = function (t) { return arguments.length ? (i = t, u) : i }, function (i) { return r = i, t = i(o), e = i(a), n = t === e ? 0 : 1 / (e - t), u } }()(nd)); return t.copy = function () { return pd(t, gd()) }, Zf.apply(t, arguments) } function bd() { var t = ud(function () { var t, e, n, r, i, o, a, l = 0, s = .5, u = 1, c = nd, f = !1; function d(t) { return isNaN(t = +t) ? a : (t = .5 + ((t = +o(t)) - e) * (t < e ? r : i), c(f ? Math.max(0, Math.min(1, t)) : t)) } return d.domain = function (a) { return arguments.length ? (t = o(l = +a[0]), e = o(s = +a[1]), n = o(u = +a[2]), r = t === e ? 0 : .5 / (e - t), i = e === n ? 0 : .5 / (n - e), d) : [l, s, u] }, d.clamp = function (t) { return arguments.length ? (f = !!t, d) : f }, d.interpolator = function (t) { return arguments.length ? (c = t, d) : c }, d.unknown = function (t) { return arguments.length ? (a = t, d) : a }, function (a) { return o = a, t = a(l), e = a(s), n = a(u), r = t === e ? 0 : .5 / (e - t), i = e === n ? 0 : .5 / (n - e), d } }()(nd)); return t.copy = function () { return pd(t, bd()) }, Zf.apply(t, arguments) } function _d(t) { for (var e = t.length / 6 | 0, n = new Array(e), r = 0; r < e;)n[r] = "#" + t.slice(6 * r, 6 * ++r); return n } function md(t) { return an(t[t.length - 1]) } var yd = md(new Array(3).concat("d8b365f5f5f55ab4ac", "a6611adfc27d80cdc1018571", "a6611adfc27df5f5f580cdc1018571", "8c510ad8b365f6e8c3c7eae55ab4ac01665e", "8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e", "8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e", "8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e", "5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30", "5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(_d)), vd = md(new Array(3).concat("af8dc3f7f7f77fbf7b", "7b3294c2a5cfa6dba0008837", "7b3294c2a5cff7f7f7a6dba0008837", "762a83af8dc3e7d4e8d9f0d37fbf7b1b7837", "762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837", "762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837", "762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837", "40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b", "40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(_d)), wd = md(new Array(3).concat("e9a3c9f7f7f7a1d76a", "d01c8bf1b6dab8e1864dac26", "d01c8bf1b6daf7f7f7b8e1864dac26", "c51b7de9a3c9fde0efe6f5d0a1d76a4d9221", "c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221", "c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221", "c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221", "8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419", "8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(_d)), xd = md(new Array(3).concat("998ec3f7f7f7f1a340", "5e3c99b2abd2fdb863e66101", "5e3c99b2abd2f7f7f7fdb863e66101", "542788998ec3d8daebfee0b6f1a340b35806", "542788998ec3d8daebf7f7f7fee0b6f1a340b35806", "5427888073acb2abd2d8daebfee0b6fdb863e08214b35806", "5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806", "2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08", "2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(_d)), kd = md(new Array(3).concat("ef8a62f7f7f767a9cf", "ca0020f4a58292c5de0571b0", "ca0020f4a582f7f7f792c5de0571b0", "b2182bef8a62fddbc7d1e5f067a9cf2166ac", "b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac", "b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac", "b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac", "67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061", "67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(_d)), Md = md(new Array(3).concat("ef8a62ffffff999999", "ca0020f4a582bababa404040", "ca0020f4a582ffffffbababa404040", "b2182bef8a62fddbc7e0e0e09999994d4d4d", "b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d", "b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d", "b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d", "67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a", "67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(_d)), Cd = md(new Array(3).concat("fc8d59ffffbf91bfdb", "d7191cfdae61abd9e92c7bb6", "d7191cfdae61ffffbfabd9e92c7bb6", "d73027fc8d59fee090e0f3f891bfdb4575b4", "d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4", "d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4", "d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4", "a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695", "a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(_d)), Ad = md(new Array(3).concat("fc8d59ffffbf91cf60", "d7191cfdae61a6d96a1a9641", "d7191cfdae61ffffbfa6d96a1a9641", "d73027fc8d59fee08bd9ef8b91cf601a9850", "d73027fc8d59fee08bffffbfd9ef8b91cf601a9850", "d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850", "d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850", "a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837", "a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(_d)), Ed = md(new Array(3).concat("fc8d59ffffbf99d594", "d7191cfdae61abdda42b83ba", "d7191cfdae61ffffbfabdda42b83ba", "d53e4ffc8d59fee08be6f59899d5943288bd", "d53e4ffc8d59fee08bffffbfe6f59899d5943288bd", "d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd", "d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd", "9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2", "9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(_d)), Td = md(new Array(3).concat("e5f5f999d8c92ca25f", "edf8fbb2e2e266c2a4238b45", "edf8fbb2e2e266c2a42ca25f006d2c", "edf8fbccece699d8c966c2a42ca25f006d2c", "edf8fbccece699d8c966c2a441ae76238b45005824", "f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824", "f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(_d)), Nd = md(new Array(3).concat("e0ecf49ebcda8856a7", "edf8fbb3cde38c96c688419d", "edf8fbb3cde38c96c68856a7810f7c", "edf8fbbfd3e69ebcda8c96c68856a7810f7c", "edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b", "f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b", "f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(_d)), Sd = md(new Array(3).concat("e0f3dba8ddb543a2ca", "f0f9e8bae4bc7bccc42b8cbe", "f0f9e8bae4bc7bccc443a2ca0868ac", "f0f9e8ccebc5a8ddb57bccc443a2ca0868ac", "f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e", "f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e", "f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(_d)), Fd = md(new Array(3).concat("fee8c8fdbb84e34a33", "fef0d9fdcc8afc8d59d7301f", "fef0d9fdcc8afc8d59e34a33b30000", "fef0d9fdd49efdbb84fc8d59e34a33b30000", "fef0d9fdd49efdbb84fc8d59ef6548d7301f990000", "fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000", "fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(_d)), zd = md(new Array(3).concat("ece2f0a6bddb1c9099", "f6eff7bdc9e167a9cf02818a", "f6eff7bdc9e167a9cf1c9099016c59", "f6eff7d0d1e6a6bddb67a9cf1c9099016c59", "f6eff7d0d1e6a6bddb67a9cf3690c002818a016450", "fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450", "fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(_d)), Dd = md(new Array(3).concat("ece7f2a6bddb2b8cbe", "f1eef6bdc9e174a9cf0570b0", "f1eef6bdc9e174a9cf2b8cbe045a8d", "f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d", "f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b", "fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b", "fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(_d)), Ld = md(new Array(3).concat("e7e1efc994c7dd1c77", "f1eef6d7b5d8df65b0ce1256", "f1eef6d7b5d8df65b0dd1c77980043", "f1eef6d4b9dac994c7df65b0dd1c77980043", "f1eef6d4b9dac994c7df65b0e7298ace125691003f", "f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f", "f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(_d)), $d = md(new Array(3).concat("fde0ddfa9fb5c51b8a", "feebe2fbb4b9f768a1ae017e", "feebe2fbb4b9f768a1c51b8a7a0177", "feebe2fcc5c0fa9fb5f768a1c51b8a7a0177", "feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177", "fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177", "fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(_d)), Od = md(new Array(3).concat("edf8b17fcdbb2c7fb8", "ffffcca1dab441b6c4225ea8", "ffffcca1dab441b6c42c7fb8253494", "ffffccc7e9b47fcdbb41b6c42c7fb8253494", "ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84", "ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84", "ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(_d)), Pd = md(new Array(3).concat("f7fcb9addd8e31a354", "ffffccc2e69978c679238443", "ffffccc2e69978c67931a354006837", "ffffccd9f0a3addd8e78c67931a354006837", "ffffccd9f0a3addd8e78c67941ab5d238443005a32", "ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32", "ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(_d)), Ud = md(new Array(3).concat("fff7bcfec44fd95f0e", "ffffd4fed98efe9929cc4c02", "ffffd4fed98efe9929d95f0e993404", "ffffd4fee391fec44ffe9929d95f0e993404", "ffffd4fee391fec44ffe9929ec7014cc4c028c2d04", "ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04", "ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(_d)), jd = md(new Array(3).concat("ffeda0feb24cf03b20", "ffffb2fecc5cfd8d3ce31a1c", "ffffb2fecc5cfd8d3cf03b20bd0026", "ffffb2fed976feb24cfd8d3cf03b20bd0026", "ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026", "ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026", "ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(_d)), Hd = Fn(Ze(300, .5, 0), Ze(-240, .5, 1)), qd = Fn(Ze(-100, .75, .35), Ze(80, 1.5, .8)), Bd = Fn(Ze(260, .75, .35), Ze(80, 1.5, .8)); function Yd(t) { var e = t.length; return function (n) { return t[Math.max(0, Math.min(e - 1, Math.floor(n * e)))] } } Ze(); var Rd = Yd(_d("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")), Id = Yd(_d("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")), Wd = Yd(_d("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")), Gd = Yd(_d("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")); function Vd(t, e) { return t - e } function Xd(t, e) { var n = e[0], r = e[e.length - 1], i = dd().domain([n, r]), o = Math.floor(t.bin_count); return i.range(qf(o)), i.thresholds() } function Zd(t, e, n) { var r; return r = "fixed" == t.bin_mode ? Xd(t, e) : "quantile" == t.bin_mode ? function (t, e, n) { var r = fd().domain(n), i = Math.floor(t.bin_count); return r.range(qf(i)), r.quantiles() }(t, 0, n) : function (t) { return t.bin_thresholds.split(";").map(parseFloat).filter((function (t) { return !isNaN(t) && null !== t })).sort(Vd) }(t), r } function Qd(t, e, n, r, i) { for (var o = 1 + e; o <= t + e; o++)i.push(r(n(o))) } function Jd(t, e, n) { var r = e.length, i = cd(), o = []; if (1 === r) o.push(n(.5)); else if (2 === t.length) i.domain([1, r]).range([0, 1]), Qd(r, 0, i, n, o); else if (2 === r) o.push(n(0)), o.push(n(1)); else { var a, l, s = t[1], u = function (t, e) { var n; return t.forEach((function (t, r) { Math.abs(t - e) < .001 && (n = r) })), n }(e, s); u ? (a = u, l = r - u - 1, i.domain([1, a + 1]).range([0, .5]), Qd(a, 0, i, n, o), o.push(n(.5)), i.domain([1, l + 1]).range([.5, 1]), Qd(l, 1, i, n, o)) : (a = function (t, e) { var n = 0; return t.forEach((function (t) { t < e && n++ })), n }(e, s), l = r - a, i.domain([1, a + 1]).range([0, .5]), Qd(a, 0, i, n, o), i.domain([1, l + 1]).range([.5, 1]), Qd(l, 1, i, n, o)) } return o } function Kd(t, e, n, r) { var i, o = Zd(t, e, n), a = function (t, e, n) { var r = []; if (0 === e.length) return [.5 * (t + n)]; r.push(.5 * (t + e[0])); for (var i = 0; i < e.length - 1; i++)r.push(.5 * (e[i] + e[i + 1])); return r.push(.5 * (n + e[e.length - 1])), r }(e[0], o, e[e.length - 1]), l = Jd(e, a, r); (i = "quantile" == t.bin_mode ? fd().domain(n) : hd().domain(o)).range(l); var s = function (t) { return isNaN(t) || null === t ? null : i(t) }; return s.domain = Object.freeze(e), s.thresholds = Object.freeze(o), s.centers = Object.freeze(a), s } function th(t) { var e = Array.isArray(t) ? function (t) { for (var e, n, r, i = t.length, o = -1; ++o < i;)if (null != (e = t[o]) && e >= e) for (n = r = e; ++o < i;)null != (e = t[o]) && (n > e && (n = e), r < e && (r = e)); return [n, r] }(t) : [0, 1]; return e } const eh = Object.freeze(["#efeca4", "#e9e28f", "#dccf64", "#e3b23c", "#e49547", "#e37746", "#dc5b36", "#cb4144", "#bb2244", "#972545", "#6a2c4f"]), nh = Object.freeze(["rgb(245, 247, 255)", "rgb(242, 245, 254)", "rgb(239, 243, 254)", "rgb(237, 242, 254)", "rgb(234, 240, 254)", "rgb(231, 239, 254)", "rgb(228, 237, 254)", "rgb(225, 236, 254)", "rgb(222, 234, 254)", "rgb(219, 233, 254)", "rgb(216, 231, 254)", "rgb(213, 230, 254)", "rgb(210, 228, 254)", "rgb(207, 227, 254)", "rgb(204, 225, 254)", "rgb(200, 224, 253)", "rgb(198, 222, 253)", "rgb(195, 221, 253)", "rgb(192, 219, 253)", "rgb(189, 217, 253)", "rgb(186, 216, 253)", "rgb(183, 214, 253)", "rgb(180, 212, 253)", "rgb(177, 211, 253)", "rgb(174, 209, 253)", "rgb(171, 207, 253)", "rgb(168, 206, 253)", "rgb(165, 204, 253)", "rgb(162, 202, 253)", "rgb(159, 201, 253)", "rgb(156, 199, 253)", "rgb(152, 197, 253)", "rgb(149, 195, 253)", "rgb(146, 193, 253)", "rgb(143, 192, 253)", "rgb(140, 190, 253)", "rgb(137, 188, 253)", "rgb(134, 186, 253)", "rgb(130, 184, 253)", "rgb(127, 183, 253)", "rgb(124, 181, 253)", "rgb(121, 179, 253)", "rgb(117, 177, 253)", "rgb(114, 175, 253)", "rgb(111, 173, 253)", "rgb(107, 171, 253)", "rgb(104, 169, 253)", "rgb(100, 167, 253)", "rgb(97, 165, 253)", "rgb(93, 163, 253)", "rgb(90, 161, 252)", "rgb(87, 159, 251)", "rgb(84, 157, 250)", "rgb(81, 155, 248)", "rgb(78, 153, 247)", "rgb(75, 151, 245)", "rgb(72, 149, 244)", "rgb(68, 147, 243)", "rgb(65, 145, 241)", "rgb(61, 143, 240)", "rgb(58, 141, 239)", "rgb(55, 139, 237)", "rgb(51, 136, 236)", "rgb(48, 134, 235)", "rgb(44, 132, 234)", "rgb(41, 130, 233)", "rgb(37, 127, 231)", "rgb(32, 125, 230)", "rgb(28, 123, 229)", "rgb(24, 120, 228)", "rgb(23, 117, 228)", "rgb(21, 114, 227)", "rgb(20, 111, 227)", "rgb(19, 108, 226)", "rgb(18, 105, 226)", "rgb(17, 102, 225)", "rgb(17, 99, 225)", "rgb(17, 96, 225)", "rgb(17, 93, 223)", "rgb(16, 90, 220)", "rgb(16, 88, 217)", "rgb(15, 85, 214)", "rgb(14, 82, 211)", "rgb(13, 80, 208)", "rgb(12, 77, 205)", "rgb(12, 74, 202)", "rgb(10, 71, 198)", "rgb(9, 69, 195)", "rgb(7, 66, 191)", "rgb(6, 63, 187)", "rgb(5, 61, 184)", "rgb(4, 58, 180)", "rgb(3, 55, 176)", "rgb(2, 52, 172)", "rgb(1, 49, 168)", "rgb(1, 46, 164)", "rgb(0, 43, 160)", "rgb(0, 40, 157)", "rgb(0, 36, 153)", "rgb(0, 33, 150)"]), rh = Object.freeze(["rgb(224, 255, 236)", "rgb(220, 253, 233)", "rgb(216, 252, 230)", "rgb(213, 251, 227)", "rgb(209, 250, 225)", "rgb(206, 249, 222)", "rgb(202, 247, 219)", "rgb(198, 246, 216)", "rgb(195, 245, 213)", "rgb(191, 244, 210)", "rgb(187, 242, 207)", "rgb(184, 241, 204)", "rgb(180, 240, 201)", "rgb(176, 238, 198)", "rgb(173, 237, 195)", "rgb(169, 236, 192)", "rgb(165, 234, 188)", "rgb(161, 233, 186)", "rgb(157, 232, 183)", "rgb(153, 230, 180)", "rgb(149, 229, 178)", "rgb(145, 228, 175)", "rgb(141, 226, 172)", "rgb(137, 225, 169)", "rgb(132, 223, 167)", "rgb(128, 222, 164)", "rgb(123, 221, 161)", "rgb(119, 219, 158)", "rgb(114, 218, 156)", "rgb(111, 216, 153)", "rgb(107, 214, 151)", "rgb(104, 212, 148)", "rgb(101, 210, 146)", "rgb(97, 209, 143)", "rgb(94, 207, 141)", "rgb(90, 205, 138)", "rgb(87, 203, 136)", "rgb(83, 201, 133)", "rgb(79, 199, 131)", "rgb(76, 198, 128)", "rgb(73, 196, 126)", "rgb(70, 194, 124)", "rgb(66, 191, 122)", "rgb(63, 189, 120)", "rgb(59, 187, 118)", "rgb(56, 185, 116)", "rgb(52, 183, 114)", "rgb(48, 181, 111)", "rgb(43, 179, 109)", "rgb(39, 177, 107)", "rgb(37, 175, 105)", "rgb(34, 172, 103)", "rgb(32, 170, 100)", "rgb(30, 168, 98)", "rgb(27, 166, 96)", "rgb(24, 163, 94)", "rgb(21, 161, 92)", "rgb(18, 159, 89)", "rgb(14, 156, 87)", "rgb(11, 154, 85)", "rgb(11, 151, 82)", "rgb(11, 149, 79)", "rgb(11, 146, 77)", "rgb(11, 144, 74)", "rgb(11, 141, 72)", "rgb(11, 139, 69)", "rgb(11, 136, 66)", "rgb(11, 134, 64)", "rgb(11, 131, 61)", "rgb(11, 128, 59)", "rgb(10, 126, 56)", "rgb(10, 123, 54)", "rgb(10, 120, 51)", "rgb(10, 118, 49)", "rgb(9, 115, 46)", "rgb(9, 112, 44)", "rgb(8, 109, 41)", "rgb(8, 107, 39)", "rgb(7, 104, 36)", "rgb(7, 101, 34)", "rgb(6, 98, 31)", "rgb(6, 95, 28)", "rgb(5, 93, 25)", "rgb(5, 90, 23)", "rgb(5, 87, 21)", "rgb(6, 84, 20)", "rgb(6, 80, 18)", "rgb(6, 77, 17)", "rgb(6, 74, 15)", "rgb(6, 71, 14)", "rgb(5, 68, 12)", "rgb(5, 65, 10)", "rgb(4, 61, 8)", "rgb(4, 58, 7)", "rgb(3, 55, 5)", "rgb(2, 52, 4)", "rgb(1, 48, 2)", "rgb(1, 45, 1)", "rgb(0, 41, 0)", "rgb(0, 38, 0)"]), ih = Object.freeze(["rgb(248, 247, 248)", "rgb(245, 245, 246)", "rgb(243, 243, 244)", "rgb(241, 241, 242)", "rgb(239, 239, 240)", "rgb(237, 237, 238)", "rgb(234, 235, 236)", "rgb(232, 232, 234)", "rgb(230, 230, 232)", "rgb(228, 228, 231)", "rgb(226, 226, 229)", "rgb(223, 224, 227)", "rgb(221, 222, 225)", "rgb(219, 220, 223)", "rgb(217, 218, 221)", "rgb(214, 216, 219)", "rgb(212, 214, 217)", "rgb(210, 212, 215)", "rgb(208, 210, 213)", "rgb(206, 208, 211)", "rgb(203, 206, 209)", "rgb(201, 204, 207)", "rgb(199, 202, 205)", "rgb(197, 199, 202)", "rgb(195, 197, 200)", "rgb(192, 195, 198)", "rgb(190, 193, 196)", "rgb(188, 191, 194)", "rgb(186, 189, 192)", "rgb(184, 187, 190)", "rgb(181, 184, 188)", "rgb(179, 182, 186)", "rgb(177, 180, 184)", "rgb(175, 178, 182)", "rgb(172, 175, 179)", "rgb(170, 173, 177)", "rgb(168, 171, 175)", "rgb(166, 169, 172)", "rgb(164, 166, 170)", "rgb(162, 164, 168)", "rgb(160, 162, 165)", "rgb(157, 160, 163)", "rgb(155, 157, 160)", "rgb(153, 155, 158)", "rgb(151, 153, 155)", "rgb(149, 150, 153)", "rgb(146, 148, 151)", "rgb(144, 146, 148)", "rgb(142, 143, 146)", "rgb(140, 141, 143)", "rgb(137, 138, 141)", "rgb(135, 136, 138)", "rgb(133, 134, 135)", "rgb(131, 131, 133)", "rgb(129, 129, 130)", "rgb(127, 126, 127)", "rgb(125, 124, 125)", "rgb(122, 121, 122)", "rgb(120, 119, 120)", "rgb(117, 116, 117)", "rgb(115, 114, 115)", "rgb(112, 111, 112)", "rgb(110, 109, 110)", "rgb(107, 106, 107)", "rgb(105, 104, 105)", "rgb(102, 101, 102)", "rgb(99, 98, 99)", "rgb(97, 96, 97)", "rgb(94, 93, 94)", "rgb(92, 91, 92)", "rgb(89, 88, 89)", "rgb(86, 85, 86)", "rgb(84, 83, 83)", "rgb(81, 80, 80)", "rgb(78, 77, 77)", "rgb(75, 74, 74)", "rgb(73, 72, 72)", "rgb(70, 69, 69)", "rgb(67, 66, 66)", "rgb(64, 63, 63)", "rgb(61, 60, 60)", "rgb(58, 57, 57)", "rgb(55, 54, 54)", "rgb(52, 51, 51)", "rgb(49, 48, 48)", "rgb(45, 45, 45)", "rgb(42, 42, 42)", "rgb(38, 38, 38)", "rgb(35, 35, 35)", "rgb(32, 32, 32)", "rgb(28, 28, 28)", "rgb(25, 25, 25)", "rgb(21, 21, 21)", "rgb(17, 17, 17)", "rgb(13, 13, 13)", "rgb(9, 9, 9)", "rgb(5, 5, 5)", "rgb(2, 2, 2)", "rgb(1, 1, 1)", "rgb(0, 0, 0)"]), oh = Object.freeze(["rgb(254, 235, 222)", "rgb(253, 232, 218)", "rgb(253, 230, 215)", "rgb(253, 228, 211)", "rgb(253, 226, 208)", "rgb(253, 224, 204)", "rgb(253, 222, 201)", "rgb(253, 220, 197)", "rgb(253, 218, 194)", "rgb(253, 216, 190)", "rgb(253, 214, 187)", "rgb(252, 211, 183)", "rgb(252, 209, 180)", "rgb(252, 207, 177)", "rgb(252, 205, 173)", "rgb(252, 203, 170)", "rgb(252, 201, 167)", "rgb(251, 198, 163)", "rgb(251, 196, 160)", "rgb(251, 194, 156)", "rgb(251, 191, 153)", "rgb(251, 189, 149)", "rgb(251, 187, 146)", "rgb(251, 184, 141)", "rgb(252, 181, 136)", "rgb(252, 179, 132)", "rgb(253, 176, 127)", "rgb(253, 173, 122)", "rgb(253, 170, 117)", "rgb(254, 168, 112)", "rgb(254, 165, 107)", "rgb(254, 162, 103)", "rgb(254, 159, 98)", "rgb(254, 156, 93)", "rgb(255, 153, 88)", "rgb(255, 151, 84)", "rgb(255, 148, 79)", "rgb(255, 144, 73)", "rgb(255, 141, 68)", "rgb(255, 138, 63)", "rgb(255, 135, 57)", "rgb(255, 132, 52)", "rgb(255, 129, 46)", "rgb(254, 125, 40)", "rgb(253, 123, 38)", "rgb(252, 121, 36)", "rgb(251, 118, 34)", "rgb(249, 116, 32)", "rgb(248, 113, 30)", "rgb(247, 111, 27)", "rgb(245, 108, 25)", "rgb(244, 105, 23)", "rgb(242, 103, 20)", "rgb(241, 100, 18)", "rgb(239, 98, 15)", "rgb(238, 95, 13)", "rgb(236, 93, 10)", "rgb(235, 90, 7)", "rgb(233, 87, 4)", "rgb(231, 85, 2)", "rgb(230, 82, 0)", "rgb(227, 80, 0)", "rgb(225, 78, 0)", "rgb(223, 76, 0)", "rgb(220, 74, 0)", "rgb(218, 72, 0)", "rgb(215, 70, 0)", "rgb(213, 68, 0)", "rgb(210, 66, 0)", "rgb(208, 65, 0)", "rgb(205, 63, 0)", "rgb(203, 61, 0)", "rgb(200, 59, 0)", "rgb(197, 58, 0)", "rgb(195, 56, 0)", "rgb(192, 54, 0)", "rgb(189, 52, 0)", "rgb(186, 50, 0)", "rgb(183, 49, 0)", "rgb(180, 47, 0)", "rgb(177, 46, 0)", "rgb(174, 45, 0)", "rgb(171, 44, 0)", "rgb(168, 42, 0)", "rgb(164, 41, 0)", "rgb(161, 40, 1)", "rgb(158, 39, 1)", "rgb(154, 38, 2)", "rgb(151, 37, 3)", "rgb(147, 36, 3)", "rgb(144, 34, 4)", "rgb(140, 33, 4)", "rgb(137, 32, 4)", "rgb(133, 31, 4)", "rgb(130, 30, 5)", "rgb(126, 28, 6)", "rgb(123, 27, 6)", "rgb(119, 26, 7)", "rgb(115, 25, 7)", "rgb(112, 24, 8)"]), ah = Object.freeze(["rgb(255, 245, 250)", "rgb(254, 242, 249)", "rgb(254, 239, 248)", "rgb(254, 237, 247)", "rgb(254, 234, 246)", "rgb(253, 232, 245)", "rgb(253, 229, 244)", "rgb(253, 226, 243)", "rgb(253, 224, 241)", "rgb(253, 221, 240)", "rgb(253, 218, 239)", "rgb(253, 216, 238)", "rgb(253, 213, 236)", "rgb(254, 210, 235)", "rgb(254, 207, 233)", "rgb(254, 204, 232)", "rgb(254, 201, 230)", "rgb(254, 198, 229)", "rgb(254, 195, 227)", "rgb(254, 192, 225)", "rgb(254, 189, 224)", "rgb(254, 186, 222)", "rgb(254, 183, 220)", "rgb(254, 180, 218)", "rgb(255, 177, 216)", "rgb(255, 174, 214)", "rgb(255, 171, 211)", "rgb(254, 168, 209)", "rgb(254, 165, 207)", "rgb(254, 162, 204)", "rgb(254, 158, 202)", "rgb(254, 155, 199)", "rgb(254, 152, 196)", "rgb(254, 149, 194)", "rgb(254, 146, 191)", "rgb(253, 142, 188)", "rgb(253, 139, 186)", "rgb(253, 135, 183)", "rgb(253, 131, 180)", "rgb(253, 128, 178)", "rgb(253, 124, 175)", "rgb(252, 120, 172)", "rgb(252, 117, 169)", "rgb(252, 113, 166)", "rgb(251, 109, 163)", "rgb(250, 106, 160)", "rgb(249, 102, 157)", "rgb(248, 98, 155)", "rgb(248, 94, 152)", "rgb(247, 91, 149)", "rgb(246, 87, 146)", "rgb(244, 83, 143)", "rgb(243, 79, 140)", "rgb(242, 75, 137)", "rgb(239, 72, 135)", "rgb(237, 70, 134)", "rgb(235, 67, 132)", "rgb(232, 65, 130)", "rgb(230, 62, 129)", "rgb(227, 59, 127)", "rgb(224, 56, 125)", "rgb(222, 53, 124)", "rgb(219, 50, 122)", "rgb(217, 48, 119)", "rgb(214, 46, 116)", "rgb(211, 43, 113)", "rgb(208, 41, 110)", "rgb(205, 39, 107)", "rgb(202, 36, 104)", "rgb(199, 34, 101)", "rgb(197, 31, 98)", "rgb(194, 29, 95)", "rgb(190, 26, 91)", "rgb(187, 24, 88)", "rgb(184, 21, 85)", "rgb(181, 18, 82)", "rgb(178, 15, 78)", "rgb(174, 12, 75)", "rgb(171, 8, 72)", "rgb(168, 4, 69)", "rgb(164, 2, 65)", "rgb(160, 2, 62)", "rgb(156, 2, 58)", "rgb(152, 2, 55)", "rgb(148, 1, 51)", "rgb(144, 1, 48)", "rgb(140, 1, 45)", "rgb(136, 1, 42)", "rgb(132, 1, 39)", "rgb(128, 1, 36)", "rgb(123, 1, 33)", "rgb(119, 0, 31)", "rgb(114, 0, 28)", "rgb(110, 0, 26)", "rgb(105, 0, 23)", "rgb(101, 0, 21)", "rgb(96, 0, 18)", "rgb(91, 0, 16)", "rgb(86, 0, 14)", "rgb(82, 0, 12)"]), lh = Object.freeze(["rgb(253, 245, 254)", "rgb(251, 242, 253)", "rgb(250, 240, 253)", "rgb(249, 238, 253)", "rgb(248, 236, 253)", "rgb(246, 234, 253)", "rgb(245, 231, 253)", "rgb(244, 229, 253)", "rgb(242, 227, 253)", "rgb(241, 225, 252)", "rgb(240, 223, 252)", "rgb(239, 220, 252)", "rgb(237, 218, 252)", "rgb(236, 216, 252)", "rgb(235, 213, 252)", "rgb(234, 211, 251)", "rgb(233, 209, 251)", "rgb(231, 206, 251)", "rgb(230, 204, 251)", "rgb(229, 202, 251)", "rgb(228, 199, 250)", "rgb(227, 197, 250)", "rgb(225, 195, 250)", "rgb(224, 192, 250)", "rgb(223, 190, 250)", "rgb(222, 187, 250)", "rgb(221, 185, 249)", "rgb(219, 182, 249)", "rgb(218, 180, 249)", "rgb(217, 177, 249)", "rgb(216, 175, 249)", "rgb(214, 172, 249)", "rgb(213, 170, 249)", "rgb(212, 167, 249)", "rgb(211, 164, 249)", "rgb(209, 162, 249)", "rgb(208, 159, 249)", "rgb(207, 156, 249)", "rgb(206, 154, 249)", "rgb(204, 151, 249)", "rgb(203, 148, 249)", "rgb(202, 145, 249)", "rgb(200, 142, 249)", "rgb(199, 140, 248)", "rgb(197, 138, 247)", "rgb(195, 136, 246)", "rgb(193, 133, 245)", "rgb(191, 131, 244)", "rgb(189, 129, 242)", "rgb(187, 126, 241)", "rgb(185, 124, 240)", "rgb(183, 122, 238)", "rgb(182, 119, 237)", "rgb(180, 117, 235)", "rgb(178, 114, 234)", "rgb(176, 112, 233)", "rgb(174, 109, 231)", "rgb(172, 107, 230)", "rgb(170, 104, 229)", "rgb(168, 102, 227)", "rgb(166, 99, 226)", "rgb(164, 97, 224)", "rgb(162, 94, 223)", "rgb(160, 91, 221)", "rgb(158, 89, 220)", "rgb(156, 86, 219)", "rgb(154, 83, 217)", "rgb(152, 81, 216)", "rgb(149, 79, 213)", "rgb(146, 77, 210)", "rgb(143, 75, 208)", "rgb(141, 73, 205)", "rgb(138, 71, 202)", "rgb(135, 69, 199)", "rgb(132, 67, 197)", "rgb(130, 65, 194)", "rgb(127, 63, 191)", "rgb(124, 61, 188)", "rgb(122, 58, 185)", "rgb(119, 56, 183)", "rgb(117, 53, 180)", "rgb(114, 50, 178)", "rgb(112, 47, 175)", "rgb(109, 44, 173)", "rgb(107, 41, 170)", "rgb(104, 38, 167)", "rgb(102, 35, 164)", "rgb(99, 32, 161)", "rgb(96, 29, 157)", "rgb(93, 26, 153)", "rgb(90, 24, 149)", "rgb(88, 22, 144)", "rgb(85, 20, 139)", "rgb(81, 17, 134)", "rgb(78, 14, 129)", "rgb(75, 12, 125)", "rgb(72, 8, 120)", "rgb(69, 5, 115)", "rgb(66, 2, 110)", "rgb(63, 0, 106)"]), sh = Object.freeze(["rgb(219, 252, 255)", "rgb(215, 250, 253)", "rgb(211, 249, 252)", "rgb(208, 248, 251)", "rgb(204, 246, 250)", "rgb(200, 245, 249)", "rgb(196, 244, 248)", "rgb(193, 243, 247)", "rgb(189, 241, 246)", "rgb(185, 240, 245)", "rgb(181, 239, 244)", "rgb(177, 237, 243)", "rgb(173, 236, 242)", "rgb(169, 235, 241)", "rgb(164, 234, 240)", "rgb(160, 232, 239)", "rgb(156, 231, 238)", "rgb(152, 229, 237)", "rgb(149, 228, 236)", "rgb(145, 226, 234)", "rgb(142, 225, 233)", "rgb(138, 223, 232)", "rgb(135, 221, 231)", "rgb(131, 220, 230)", "rgb(128, 218, 229)", "rgb(124, 216, 228)", "rgb(120, 215, 227)", "rgb(116, 213, 226)", "rgb(112, 211, 224)", "rgb(110, 210, 223)", "rgb(108, 208, 221)", "rgb(106, 206, 219)", "rgb(104, 204, 217)", "rgb(102, 202, 216)", "rgb(100, 200, 214)", "rgb(98, 198, 212)", "rgb(96, 196, 210)", "rgb(93, 194, 208)", "rgb(91, 192, 207)", "rgb(89, 190, 205)", "rgb(87, 188, 203)", "rgb(85, 186, 201)", "rgb(82, 184, 199)", "rgb(80, 182, 197)", "rgb(78, 180, 195)", "rgb(75, 178, 193)", "rgb(73, 176, 191)", "rgb(71, 174, 189)", "rgb(68, 172, 187)", "rgb(66, 170, 185)", "rgb(63, 168, 183)", "rgb(60, 166, 180)", "rgb(58, 163, 178)", "rgb(55, 161, 176)", "rgb(52, 159, 174)", "rgb(49, 157, 172)", "rgb(45, 155, 169)", "rgb(42, 153, 167)", "rgb(38, 151, 165)", "rgb(35, 149, 163)", "rgb(33, 147, 161)", "rgb(30, 144, 158)", "rgb(28, 142, 156)", "rgb(26, 140, 154)", "rgb(23, 137, 151)", "rgb(20, 135, 149)", "rgb(17, 133, 147)", "rgb(14, 130, 144)", "rgb(10, 128, 142)", "rgb(8, 126, 140)", "rgb(7, 123, 137)", "rgb(6, 121, 135)", "rgb(6, 118, 132)", "rgb(5, 116, 130)", "rgb(4, 113, 127)", "rgb(3, 111, 125)", "rgb(2, 108, 122)", "rgb(2, 105, 119)", "rgb(2, 103, 117)", "rgb(2, 100, 114)", "rgb(2, 97, 112)", "rgb(2, 95, 109)", "rgb(2, 92, 106)", "rgb(2, 89, 103)", "rgb(2, 87, 101)", "rgb(2, 84, 98)", "rgb(1, 81, 95)", "rgb(1, 78, 92)", "rgb(1, 75, 90)", "rgb(0, 73, 87)", "rgb(0, 70, 84)", "rgb(0, 67, 81)", "rgb(0, 64, 77)", "rgb(0, 61, 73)", "rgb(0, 58, 70)", "rgb(0, 55, 66)", "rgb(0, 52, 62)", "rgb(0, 49, 59)", "rgb(0, 46, 55)", "rgb(0, 43, 51)"]), uh = Object.freeze(["rgb(255, 247, 246)", "rgb(254, 244, 243)", "rgb(255, 242, 240)", "rgb(255, 239, 238)", "rgb(255, 237, 235)", "rgb(255, 235, 232)", "rgb(255, 232, 229)", "rgb(255, 230, 227)", "rgb(255, 227, 224)", "rgb(255, 225, 221)", "rgb(255, 222, 218)", "rgb(255, 220, 215)", "rgb(255, 217, 213)", "rgb(255, 215, 210)", "rgb(255, 212, 207)", "rgb(255, 210, 203)", "rgb(255, 207, 200)", "rgb(255, 204, 197)", "rgb(255, 202, 194)", "rgb(255, 199, 191)", "rgb(255, 197, 188)", "rgb(255, 194, 185)", "rgb(255, 191, 182)", "rgb(255, 189, 179)", "rgb(255, 186, 175)", "rgb(255, 183, 172)", "rgb(255, 180, 169)", "rgb(255, 177, 166)", "rgb(255, 174, 162)", "rgb(255, 171, 159)", "rgb(255, 168, 156)", "rgb(255, 165, 153)", "rgb(255, 162, 149)", "rgb(255, 159, 146)", "rgb(255, 156, 143)", "rgb(255, 153, 140)", "rgb(255, 149, 136)", "rgb(255, 146, 133)", "rgb(255, 142, 130)", "rgb(255, 139, 127)", "rgb(255, 135, 124)", "rgb(255, 132, 120)", "rgb(255, 128, 117)", "rgb(255, 125, 114)", "rgb(254, 121, 111)", "rgb(254, 117, 108)", "rgb(253, 114, 105)", "rgb(252, 110, 102)", "rgb(252, 107, 99)", "rgb(251, 103, 96)", "rgb(250, 99, 93)", "rgb(249, 95, 91)", "rgb(248, 92, 88)", "rgb(247, 88, 85)", "rgb(246, 85, 82)", "rgb(244, 81, 80)", "rgb(242, 78, 77)", "rgb(240, 75, 75)", "rgb(239, 72, 72)", "rgb(237, 68, 70)", "rgb(235, 65, 67)", "rgb(233, 61, 65)", "rgb(231, 57, 62)", "rgb(229, 55, 60)", "rgb(226, 52, 58)", "rgb(223, 49, 56)", "rgb(221, 46, 53)", "rgb(218, 44, 51)", "rgb(215, 41, 49)", "rgb(213, 38, 47)", "rgb(210, 35, 45)", "rgb(207, 31, 43)", "rgb(204, 28, 40)", "rgb(201, 26, 38)", "rgb(198, 23, 36)", "rgb(195, 20, 34)", "rgb(191, 17, 32)", "rgb(188, 14, 30)", "rgb(185, 10, 27)", "rgb(181, 6, 25)", "rgb(178, 2, 23)", "rgb(174, 1, 21)", "rgb(170, 1, 18)", "rgb(166, 1, 16)", "rgb(162, 1, 13)", "rgb(158, 1, 11)", "rgb(154, 0, 8)", "rgb(150, 0, 6)", "rgb(146, 0, 4)", "rgb(142, 0, 3)", "rgb(138, 0, 2)", "rgb(133, 0, 2)", "rgb(129, 0, 1)", "rgb(125, 0, 1)", "rgb(120, 0, 0)", "rgb(116, 0, 0)", "rgb(111, 0, 0)", "rgb(107, 0, 0)", "rgb(102, 0, 0)", "rgb(98, 0, 0)"]), ch = Object.freeze(["rgb(255, 249, 224)", "rgb(254, 247, 218)", "rgb(253, 245, 212)", "rgb(252, 243, 206)", "rgb(251, 241, 200)", "rgb(251, 239, 194)", "rgb(250, 237, 188)", "rgb(250, 235, 182)", "rgb(250, 233, 176)", "rgb(249, 231, 170)", "rgb(249, 229, 163)", "rgb(249, 227, 157)", "rgb(249, 225, 151)", "rgb(248, 222, 145)", "rgb(248, 220, 139)", "rgb(247, 218, 132)", "rgb(247, 216, 126)", "rgb(247, 214, 120)", "rgb(246, 211, 113)", "rgb(246, 209, 107)", "rgb(245, 207, 100)", "rgb(245, 204, 93)", "rgb(245, 202, 87)", "rgb(244, 200, 80)", "rgb(244, 197, 73)", "rgb(243, 195, 68)", "rgb(241, 193, 64)", "rgb(240, 191, 59)", "rgb(239, 189, 55)", "rgb(237, 187, 50)", "rgb(236, 184, 46)", "rgb(234, 182, 40)", "rgb(233, 180, 35)", "rgb(231, 178, 29)", "rgb(230, 176, 22)", "rgb(229, 174, 13)", "rgb(226, 172, 12)", "rgb(224, 170, 12)", "rgb(222, 168, 11)", "rgb(219, 166, 11)", "rgb(217, 164, 10)", "rgb(215, 163, 9)", "rgb(212, 161, 9)", "rgb(210, 159, 8)", "rgb(208, 157, 8)", "rgb(205, 155, 7)", "rgb(203, 153, 6)", "rgb(200, 151, 6)", "rgb(198, 150, 6)", "rgb(195, 148, 6)", "rgb(193, 146, 6)", "rgb(190, 144, 6)", "rgb(187, 142, 6)", "rgb(185, 141, 5)", "rgb(182, 139, 5)", "rgb(180, 137, 5)", "rgb(177, 135, 5)", "rgb(175, 133, 5)", "rgb(172, 131, 5)", "rgb(170, 129, 5)", "rgb(168, 127, 5)", "rgb(165, 125, 5)", "rgb(163, 123, 6)", "rgb(160, 121, 6)", "rgb(158, 119, 6)", "rgb(156, 116, 6)", "rgb(153, 114, 6)", "rgb(150, 112, 6)", "rgb(148, 110, 6)", "rgb(145, 108, 6)", "rgb(143, 106, 6)", "rgb(140, 104, 6)", "rgb(137, 102, 6)", "rgb(135, 100, 6)", "rgb(132, 98, 6)", "rgb(129, 96, 5)", "rgb(126, 94, 5)", "rgb(123, 92, 4)", "rgb(120, 90, 4)", "rgb(117, 88, 3)", "rgb(114, 86, 3)", "rgb(111, 84, 2)", "rgb(108, 81, 2)", "rgb(105, 79, 1)", "rgb(102, 77, 1)", "rgb(99, 75, 1)", "rgb(96, 73, 1)", "rgb(93, 70, 0)", "rgb(90, 68, 0)", "rgb(87, 66, 0)", "rgb(84, 63, 0)", "rgb(81, 61, 0)", "rgb(78, 58, 0)", "rgb(75, 56, 0)", "rgb(72, 53, 0)", "rgb(69, 51, 0)", "rgb(66, 48, 0)", "rgb(62, 46, 0)", "rgb(59, 43, 0)", "rgb(56, 41, 0)"]); var fh = Object.freeze({ BuGn: Td, BuPu: Nd, Carrots: an(eh), Cool: Bd, CubehelixDefault: Hd, FlourishBlues: an(nh), FlourishGreens: an(rh), FlourishGreys: an(ih), FlourishOranges: an(oh), FlourishPinks: an(ah), FlourishPurples: an(lh), FlourishReds: an(uh), FlourishTeals: an(sh), FlourishYellows: an(ch), GnBu: Sd, Inferno: Wd, Magma: Id, OrRd: Fd, Plasma: Gd, PuBu: Dd, PuBuGn: zd, PuRd: Ld, RdPu: $d, Viridis: Rd, Warm: qd, YlGn: Pd, YlGnBu: Od, YlOrBr: Ud, YlOrRd: jd }), dh = { hcl: Nn, hsl: En, lab: Tn, rgb: rn }; function hh(t, e) { var n = t.sequential_custom_domain ? [t.sequential_domain_min, t.sequential_domain_max] : th(e), r = function (e) { var n = fh[t.sequential_palette] || function (t) { var e = t.sequential_color_space, n = t.sequential_custom_min, r = t.sequential_custom_max; return dh[e](n, r) }(t); return t.sequential_reverse ? n(1 - e) : n(e) }; if (t.binning) return Kd(t, n, e, r); var i = gd(r).domain(n), o = function (t) { return isNaN(t) || null === t ? null : i(t) }; return o.domain = Object.freeze(n), o } var ph = Object.freeze({ BrBG: yd, PiYG: wd, PRGn: vd, PuOr: xd, RdBu: kd, RdGy: Md, RdYlBu: Cd, RdYlGn: Ad, Spectral: Ed }), gh = { hcl: Nn, hsl: En, lab: Tn, rgb: rn }; function bh(t) { var e = t.diverging_color_space, n = t.diverging_custom_min, r = t.diverging_custom_mid, i = t.diverging_custom_max; return function (t, e) { for (var n = 0, r = e.length - 1, i = e[0], o = new Array(r < 0 ? 0 : r); n < r;)o[n] = t(i, i = e[++n]); return function (t) { var e = Math.max(0, Math.min(r - 1, Math.floor(t *= r))); return o[e](t - e) } }(gh[e], [n, r, i]) } function _h() { return this.declarations = [], this } function mh(t) { return this.selector = t, this.styles = [], this } _h.prototype.select = function (t) { if (!t) return this; var e = new mh(t); return e.parent = this, this.addDeclaration(e), e }, _h.prototype.addDeclaration = function (t) { return this.declarations.push(t), this }, _h.prototype.print = function () { var t = ""; return this.declarations.forEach((function (e) { t += e.selector + " {\n", e.styles.forEach((function (e) { t += "\t" + e[0] + ": " + e[1] + ";\n" })), t += "}\n\n" })), t }, _h.prototype.clear = function () { return this.declarations = [], this }, mh.prototype.style = function (t, e) { var n = "function" == typeof value_ ? e() : e; return "" !== n && null != n && this.styles.push([t, n]), this }, mh.prototype.select = function (t) { return this.parent.select(this.selector + " " + t) }; var yh = !1; function vh() { if (!yh && "undefined" != typeof document) { var t, e = ((t = new _h).select(".fl-controls-container").style("display", "inline-block").style("line-height", "1em"), t.select(".fl-controls-title").style("display", "inline-block").style("margin-inline-end", "0.5rem"), t.select(".fl-controls-container, .fl-controls-container *").style("box-sizing", "border-box"), t.select(".slider-holder").style("margin-bottom", "20px"), t.select(".fl-controls-slider, .slider-play").style("pointer-events", "all").style("display", "inline-block").style("vertical-align", "middle"), t.select(".slider-play svg").style("height", "100%").style("width", "100%").style("display", "block").style("cursor", " pointer", ""), t.select(".fl-controls-slider svg").style("display", "block"), t.select(".slider-play:hover").style("opacity", "0.6"), t.select(".fl-control-slider").style("width", "100%").style("bottom", "0").style("align-items", "center"), t.select(".fl-control").style("position", "relative"), t.select(".fl-control.hidden").style("display", "none"), t.select(".fl-control .button").style("display", "inline-flex").style("align-items", "center").style("background", "#eee").style("padding", "0 0.5em").style("margin-right", "0.25em").style("margin-bottom", "0.25em").style("line-height", "1em").style("box-sizing", "border-box"), t.select(".fl-control.grouped:not(.hidden)").style("display", "inline-table").style("table-layout", "fixed").select(".button").style("display", "table-cell").style("vertical-align", "middle").style("margin", "0").style("text-align", "center"), t.select(".fl-control .button.selected").style("background", "#ddd"), t.select(".fl-control-dropdown").style("line-height", "1em").style("position", "relative"), t.select(".fl-control-dropdown::after").style("display", "block").style("content", "''").style("width", "10px").style("height", "10px").style("background", "transparent").style("position", "absolute").style("right", "5px").style("left", "auto").style("top", "50%").style("pointer-events", "none").style("transform", "translateY(calc(-50% + 3px))").style("border-left", "5px solid transparent").style("border-right", "5px solid transparent").style("border-top", "5px solid").style("box-sizing", "border-box"), t.select(".is-rtl .fl-control-dropdown::after").style("left", "5px").style("right", "auto"), t.select(".fl-control-dropdown select").style("-webkit-appearance", "none").style("width", "100%"), t.print()), n = document.head || document.getElementsByTagName("head")[0], r = document.createElement("style"); r.type = "text/css", r.className = "flourish-controls", n.appendChild(r), r.styleSheet ? r.styleSheet.cssText = e : r.appendChild(document.createTextNode(e)), yh = !0 } } var wh, xh, kh = (wh = document.createElement("canvas").getContext("2d"), function (t, e) { return wh.font = e || "10px sans-serif", wh.measureText(t).width }); function Mh(t, e, n) { var r, i, o, a, l, s = {}, u = gt(n).append("div").attr("class", "fl-control fl-control-slider").style("flex", "1"), c = u.append("div").attr("class", "slider-play").attr("role", "button").attr("aria-label", "play-button").attr("cursor", "pointer").attr("tabindex", 0), f = u.append("div").attr("class", "fl-controls-slider").style("display", "none").style("align-items", "center"), d = null; const h = f.append("input").attr("type", "range").attr("id", "slider-range").attr("name", "slider-range").attr("value", 0), p = f.append("label").attr("class", "slider-label").attr("for", "slider-range"); var g = function () { clearTimeout(d), d = null }, b = function (e) { var n = o[e]; n.options_index !== t.index() && (t.index(n.options_index), t.trigger("change")) }, _ = function () { g(), u.classed("playing", !1), c.html(r).attr("aria-label", "play-button"), t._isPlaying_(!1), l = !1 }, m = function () { var n = t.getSortedIndex(), r = a[n], i = t.n_options - 1, o = n < i ? n + 1 : 0; d = setTimeout((function () { b(o), e.slider_loop || o < i ? m() : _() }), r) }, y = function () { u.classed("playing", !0), c.html(i).attr("aria-label", "pause-button"), m(), t._isPlaying_(!0), l = !0 }; c.on("click", (function () { null === d ? y() : _() })).on("keyup", (function () { "Space" !== it.code && "Enter" !== it.code || (it.preventDefault(), null === d ? y() : _()) })); var v = function (t) { const n = Math.min(Math.ceil(t), xh(e.slider_max_label_width)) + "px"; return p.style("width", n).style("flex-shrink", 0), u.style("display", "inline-flex"), h.style("width", xh(e.slider_width) + "px"), r = '<svg aria-hidden="true" width="25px" height="30px" viewBox="0 0 25 30"> <polygon stroke="none" points="25 15 0 30 0 0"></polygon> </svg>', i = '<svg aria-hidden="true" width="26px" height="30px" viewBox="0 0 26 30"> <g stroke="none" stroke-width="1"quarter><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>', c.html(d ? i : r), s }, w = function () { return _(), u.style("display", "none"), s }; return s.show = v, s.hide = w, s.update = function (n, r) { if (f.style("display", "flex"), o = n, !t.n_options || "slider" !== e.control_type) return w(), s; var i = window.getComputedStyle(p.node()).fontSize, c = window.getComputedStyle(p.node()).fontFamily, x = window.getComputedStyle(u.node()).fontWeight; let k = 0; const M = x + " " + i + " " + c + ", sans-serif"; o.forEach((function (t) { const e = kh(t.display, M); k = Math.max(k, e) })), r ? v(k) : w(); var C = t.n_options, A = e.slider_loop; a = o.map((function (t, n) { return 1e3 * (e.slider_step_time + (A && n === C - 1 ? e.slider_restart_pause : 0)) })); var E = t.getSortedIndex(), T = o[E], N = o[0].display, S = o[o.length - 1].display; return h.attr("min", 0).attr("max", C - 1).attr("step", 1).attr("aria-valuenow", T.display).attr("aria-valuemin", N).attr("aria-valuemax", S).on("input", (function () { var t = null !== d; t && g(), b(this.value), t && m() })), h.node().value = E, p.html(T.display), t._isPlaying_() && !l ? y() : !t._isPlaying_() && l && _(), s }, s } var Ch = Object.freeze({ alignment: "start", controls_spacing: 1 }); function Ah(t) { for (var e in this._state = t, Ch) void 0 === this._state[e] && (this._state[e] = Ch[e]); return this } Ah.prototype.appendTo = function (t) { return this._container = gt(t).append("div").node(), this }, Ah.prototype.add = function (t) { return this._controls = Array.isArray(t) ? t : [t], this._controls.forEach((function (t) { t && "function" == typeof t.appendTo ? t.appendTo(this._container) : console.warn("Please pass valid controls instances to .add()") }), this), this }, Ah.prototype.update = function () { this._controls.forEach((function (t) { t && "function" == typeof t.update && t.update() })); var t = this._state.alignment, e = "center" == t ? t : "flex-" + t, n = window.template || void 0, r = n ? n.state.layout : void 0, i = r && r.read_direction || gt("body").node().dir || "ltr", o = t; "rtl" === i && "center" !== t && (o = "start" === t ? "end" : "start"), gt(this._container).classed("is-rtl", "rtl" == i).style("display", "flex").style("flex-wrap", "wrap").style("justify-content", e); var a, l, s = gt(this._container).selectAll(".fl-controls-container"), u = this._state.controls_spacing; switch (o) { case "end": a = u + "em", l = 0; break; case "center": a = .5 * u + "em", l = .5 * u + "em"; break; default: a = 0, l = u + "em" }return s.style("margin-left", a).style("margin-right", l), this }; var Eh = Object.freeze({ control_type: "dropdown", control_title: "", dropdown_width_mode: "auto", dropdown_width_fixed: 20, button_group: !0, button_group_width_mode: "auto", button_group_width_fixed: 20, slider_width: 15, slider_max_label_width: 20, slider_handle_height: 1, slider_track_height: .2, slider_margin: 4.5, slider_play_button: !0, slider_step_time: 2, slider_loop: !0, slider_restart_pause: 0, sort: !1, _index_: null, _is_playing_: !1 }); function Th(t) { return t } function Nh(t) { return null == t ? "" : t.toString() } var Sh, Fh, zh = { gutter_w: 1, gutter_h: 1, min_width: 300, min_width_fixed: 10, max_width: null, columns_fixed: !1, columns: 2, custom_grid: !1, custom_positions: "", titles: !0, title_color_mode: "auto", title_color: null, title_size: 1, title_unit: "rem", title_weight: 600, title_padding_top: .25, title_padding_bottom: .25, title_align: "auto", title_bg: "none", title_bg_padding: .25, title_bg_mode: "fixed", title_bg_color: "#eeeeee", animation: "auto" }; function Dh(t) { for (var e in zh) e in t || (t[e] = zh[e]); var n = document.createElementNS("http://www.w3.org/2000/svg", "g"); return n.setAttribute("class", "fl-facets"), this._container = n, this._state = t, this._duration = 1e3, this._width = window.innerWidth, this._height = window.innerHeight, this._facet_width = null, this._facet_aspect = null, this._facet_aspect_margin_top = 0, this._facet_aspect_margin_right = 0, this._facet_aspect_margin_bottom = 0, this._facet_aspect_margin_left = 0, this._facet_height = null, this._is_ragged = null, this._max_facets = 250, this._axis_space_top = 0, this._axis_space_bottom = 0, this._axis_space_left = 0, this._axis_space_right = 0, this._hide_title = null, this._titleColor = null, this._autoTitleAlign = function () { return "left" }, this._computed_height = this._height, this._data = [], this._data_names = [], this._read_direction = null, this } function Lh(t) { return window.innerWidth !== Sh && (Sh = window.innerWidth, Fh = parseFloat(getComputedStyle(document.documentElement).fontSize)), t * Fh } function $h() { return this.declarations = [], this } function Oh(t) { return this.selector = t, this.styles = [], this } Dh.prototype.appendTo = function (t) { return t.appendChild(this._container), this }, Dh.prototype.maxFacets = function (t) { return this._max_facets = t, this }, Dh.prototype.width = function (t) { return this._width = t, this }, Dh.prototype.height = function (t) { return void 0 === t ? this._computed_height : (this._height = t, null !== t && (this._facet_aspect = null, this._facet_height = null), this) }, Dh.prototype.facetHeight = function (t) { return this._facet_height = t, null !== t && (this._facet_aspect = null, this._height = null), this }, Dh.prototype.facetAspect = function (t, e) { return this._facet_aspect = t, null !== t && (this._facet_height = null, this._height = null, e && ("top" in e && (this._facet_aspect_margin_top = e.top), "right" in e && (this._facet_aspect_margin_right = e.right), "bottom" in e && (this._facet_aspect_margin_bottom = e.bottom), "left" in e && (this._facet_aspect_margin_left = e.left))), this }, Dh.prototype.axisSpaceTop = function (t) { return this._axis_space_top = t, this }, Dh.prototype.axisSpaceBottom = function (t) { return this._axis_space_bottom = t, this }, Dh.prototype.axisSpaceLeft = function (t) { return this._axis_space_left = t, this }, Dh.prototype.axisSpaceRight = function (t) { return this._axis_space_right = t, this }, Dh.prototype.debug = function (t) { return this._debug = !!t, this }, Dh.prototype.data = function (t, e) { return this._data = t, this._data_names = e ? t.map(e) : t, this }, Dh.prototype.duration = function (t) { return this._duration = t, this }, Dh.prototype.autoTitleAlign = function (t) { return this._autoTitleAlign = t, this }, Dh.prototype.titleColor = function (t) { return this._titleColor = t, this }, Dh.prototype.hideTitle = function (t) { return this._hide_title = t, this }, Dh.prototype.readDirection = function (t) { return ["ltr", "rtl"].includes(t) ? this._read_direction = t : console.warn('Read direction must be one of "ltr" or "rtl"'), this }, Dh.prototype.update = function (t) { var e = this, n = this._state, r = this._duration, i = this._data.slice(0, this._max_facets), o = this._data_names.slice(0, this._max_facets), a = i.length, l = Lh(n.gutter_w), s = Lh(n.gutter_h), u = this._axis_space_left, c = this._axis_space_right, f = this._axis_space_top, d = this._axis_space_bottom, h = this._width - u - c, p = null == this._height ? null : this._height - f - d, g = this._facet_aspect, b = this._facet_aspect_margin_right + this._facet_aspect_margin_left, _ = this._facet_aspect_margin_top + this._facet_aspect_margin_bottom, m = this._facet_height, y = n.titles && !(1 == a && ("" == o[0] || o[0] == this._hide_title)), v = this._read_direction || vi(), w = function (t, e) { if ("rtl" === e) { if ("left" === t) return "right"; if ("right" === t) return "left" } return t }("auto" != n.title_align ? n.title_align : this._autoTitleAlign(), v); const { cols: x, rows: k, custom_positions: M } = function (t, e, n, r, i) { let o, a, l = {}; const s = t.columns_fixed ? t.min_width_fixed : t.min_width, u = Math.floor((r + i) / (s + i)); if (t.columns_fixed && (o = 1 == n ? 1 : Math.floor(t.columns), a = Math.ceil(n / o), t.custom_grid && (t.custom_positions.split(/\n/).forEach((function (t) { if (!t.trim().length) return; const n = t.split(/:/); if (!n.length) return; const r = n[0].trim(), i = e.indexOf(r); if (i < 0 && r.length) return void Flourish.warn(`No match for custom position for ${r}`); const a = n[1].split(/,/), s = Math.max(1, +a[0] || 1), u = Math.max(1, +a[1] || 1); (u > 50 || s > 50) && Flourish.warn("Grid is too large with over 50 " + (u > 50 ? "columns" : "rows")), l[i] = { y: s - 1, x: u - 1 }, o = Math.max(o, u) })), a = 1, e.forEach((function (t, e) { a = Math.max(a, l[e] ? l[e].y + 1 : Math.floor(e / o) + 1) }))), o > u && (l = {})), !t.columns_fixed || o > u) { o = Math.max(1, Math.min(u, n)), a = Math.ceil(n / o); for (let t = o; t > 0 && Math.ceil(n / (o - 1)) == a; t--)o-- } return { cols: o, rows: a, custom_positions: l } }(n, o, a, h, l); e._num_columns = x, e._num_rows = k, e._is_ragged = n.columns_fixed && n.custom_grid || a % x != 0 && a > x; var C = n.max_width || 1 / 0, A = l * (x - 1), E = Math.max(0, Math.min(C, (h - A) / x)), T = Math.max(0, h - E * x - A); e._facet_width = E; var N, S = "rem" == n.title_unit ? Lh(n.title_size) : n.title_size * E / 15, F = getComputedStyle(this._container).fontFamily, z = `${n.title_weight} ${S}px ${F}`, D = "none" == n.title_bg ? 0 : S * n.title_bg_padding, L = E - 2 * D, $ = o.map((function (t) { return xi(t, z, 5, L) })), O = function () { let t = {}; return $.forEach((function (e, n) { t[n] = e.length })), t }(), P = Math.max(...Object.values(O), 0), U = (N = P, y ? S * N + S * (n.title_padding_top + n.title_padding_bottom) : 0), j = 100; null != p ? (j = k > 0 ? Math.max(0, (p - s * (k - 1)) / k) : 0, this._computed_height = this._height) : (null != m ? j = U + m : null != g && (j = U + _ + (E - b) / g), this._computed_height = j * k + s * Math.max(k - 1, 0) + f + d); var H = gt(this._container).selectAll(".fl-facet").data(o, (function (t, e) { return "name" == n.animation ? t : "reuse" == n.animation || 1 == i.length ? e : t })), q = H.enter().append("g").attr("class", "fl-facet").attr("transform", (function (t, e) { return J(e) })); q.append("rect").attr("class", "fl-facet-rect").attr("width", E).attr("height", j), q.append("rect").attr("class", "fl-facet-primary-rect").attr("width", E).attr("height", j); var B = function (t, e) { if ("center" === t) return "middle"; var n = "rtl" === e; if ("left" === t) return n ? "end" : "start"; return n ? "start" : "end" }(w, v), Y = q.append("g").attr("class", "fl-facet-title"); Y.append("rect").attr("class", "fl-facet-title-bg"), Y.append("text").attr("class", "fl-facet-title-text").attr("font-size", S).attr("font-weight", n.title_weight).attr("fill", et).each(it).attr("transform", K).attr("opacity", 0).attr("text-anchor", B), q.select(".facet-title-bg").attr("height", U).attr("width", rt).attr("fill", nt).attr("x", tt).attr("opacity", 0), q.append("g").attr("class", "fl-facet-primary").attr("transform", "translate(0, " + U + ")"); var R = H.merge(q); R.transition().duration(r).attr("transform", (function (t, e) { return J(e) })).each(X).attr("opacity", 1).on("interrupt", (function () { gt(this).attr("opacity", 1) })), R.select(".fl-facet-rect").attr("width", E).attr("height", j).attr("fill", e._debug ? "rgba(230, 100, 100, 0.33)" : "none"), R.select(".fl-facet-primary-rect").attr("width", E).attr("height", Math.max(0, j - U)).attr("y", U).attr("fill", e._debug ? "rgba(230, 100, 100, 0.33)" : "none"); var I = R.select(".fl-facet-title"); I.select(".fl-facet-title-text").attr("font-size", S).attr("font-weight", n.title_weight).attr("text-anchor", B).each(it).transition().duration(r).attr("fill", et).attr("transform", K).attr("opacity", y ? 1 : 0), I.select(".fl-facet-title-bg").transition().duration(r).attr("height", U).attr("width", rt).attr("fill", nt).attr("x", tt).attr("opacity", y ? 1 : 0); var W = I.select(".fl-facet-title-text").selectAll("tspan").data((function (t, e) { return $[e] })), G = W.enter().append("tspan"); W.merge(G).text((function (t) { return t })).attr("x", 0).attr("y", ((t, e) => e * S)).attr("dx", function (t, e) { if ("left" === t) return e; return "right" === t ? -e : 0 }(w, D)).attr("text-anchor", B), W.exit().remove(), R.select(".fl-facet-primary").each((function (e, n) { var r = Z(n), o = Q(n) + U, a = Math.max(0, j - U); if (this.__facet_inner__ = { node: this, data: i[n], name: e, width: E, height: a, x: r, y: o, cx: r + E / 2, cy: o + a / 2, row: Math.floor(n / x), column: Math.ceil(n % x) }, t) { t.bind(this)(this.__facet_inner__, n) } })).transition().duration(r).attr("transform", "translate(0, " + U + ")"); var V = H.exit(); function X(t, e) { var n = Z(e), r = Q(e); this.__facet_outer__ = { node: this, name: t, width: E, height: j, x: n, y: r, cx: n + E / 2, cy: r + j / 2 } } function Z(t) { var e = Math.ceil(t % x); return M[t] && (e = M[t].x), u + (e * (E + l) + T / 2) } function Q(t) { var e = Math.floor(t / x); return M[t] && (e = M[t].y), f + e * (j + s) } function J(t) { return "translate(" + Z(t) + ", " + Q(t) + ")" } function K(t, e) { let r = 0; const i = (P - O[e]) * S, o = .8 * S + S * n.title_padding_top + i; return "center" == w && (r = E / 2), "right" == w && (r = E), `translate(${r}, ${o})` } function tt() { return "full" == n.title_bg ? 0 : "center" == w ? E / 2 - this.parentNode.__title_width / 2 - D : "right" == w ? E : 0 } function et(t) { return n.title_color ? n.title_color : e._titleColor ? e._titleColor(t) : null } function nt() { return n.title_bg_color } function rt() { return "none" == n.title_bg ? 0 : "full" == n.title_bg ? E : this.parentNode.__title_width + 2 * D } function it() { var t = this.getBBox().width, e = parseFloat(this.getAttribute("font-size")), n = S; this.parentNode.__title_width = t * n / e } return V.each(X).classed("fl-facet", !1).transition().duration(r / 2).attr("opacity", 0).remove(), V.select(".fl-facet-primary").transition().duration(r).attr("transform", "translate(0, " + U + ")"), this._facets = R.select(".fl-facet-primary").nodes().map((function (t) { return t.__facet_inner__ })), this }, Dh.prototype.facets = function () { return this._facets }, Dh.prototype.facetWidth = function () { return this._facet_width }, Dh.prototype.getFacet = function (t) { var e = this._data_names.indexOf(t); return this._facets[e] }, Dh.prototype.isRagged = function () { return this._is_ragged }, Dh.prototype.numColumns = function () { return this._num_columns }, Dh.prototype.numRows = function () { return this._num_rows }, $h.prototype.select = function (t) { if (!t) return this; var e = new Oh(t); return e.parent = this, this.addDeclaration(e), e }, $h.prototype.addDeclaration = function (t) { return this.declarations.push(t), this }, $h.prototype.print = function () { var t = ""; return this.declarations.forEach((function (e) { t += e.selector + " {\n", e.styles.forEach((function (e) { t += "\t" + e[0] + ": " + e[1] + ";\n" })), t += "}\n\n" })), t }, $h.prototype.clear = function () { return this.declarations = [], this }, Oh.prototype.style = function (t, e) { var n = "function" == typeof value_ ? e() : e; return "" !== n && null != n && this.styles.push([t, n]), this }, Oh.prototype.select = function (t) { return this.parent.select(this.selector + " " + t) }; var Ph = Object.freeze({ font_size: 1, font_weight: "bold", height: 2 }); function Uh(t, e, n) { for (var r in this._state = t, Ph) void 0 === this._state[r] && (this._state[r] = Ph[r]); return this._layout = n || {}, this._styles = new $h, this._selector = e, this._createStylesheet(), this } Uh.prototype._createStylesheet = function () { this._stylesheet = document.createElement("style"), this._stylesheet.className = "fl-ui-styles-controls", document.head.appendChild(this._stylesheet) }, Uh.prototype.update = function () { this._styles.clear(), this._styles.select(this._selector + ".hidden").style("display", "none"), this._styles.select(this._selector).style("vertical-align", "middle").style("position", "relative").style("font-size", this._state.font_size + "rem").style("font-weight", this._state.font_weight), this._styles.select(".fl-controls-title").style("font-size", this._state.font_size + "rem").style("font-weight", this._state.font_weight).style("vertical-align", "middle"), this._styles.select(this._selector + ".fl-control .button").style("height", this._state.height + "rem").style("padding", "0 0.5em"), this._styles.select(this._selector + "-dropdown select").style("height", this._state.height + "rem").style("font-size", this._state.font_size + "rem").style("font-weight", this._state.font_weight).style("padding", "0 " + .1 * this._state.height + "rem"), this._styles.select(this._selector + "-slider .slider-end-labels").style("font-size", this._state.font_size + "rem").style("font-weight", this._state.font_weight), this._styles.select(this._selector + "-slider").style("height", this._state.height + "rem"), this._stylesheet.innerHTML = this._styles.print() }; var jh = Object.freeze({ background: null, font_color: null, background_selected: "#333333", font_color_selected: "#ffffff", background_hover: null, font_color_hover: null, border_width: 1, border_transparency: .25, border_color: null, border_radius: 3 }); function Hh(t, e, n) { for (var r in this._state = t, jh) void 0 === this._state[r] && (this._state[r] = jh[r]); return this._layout = n || {}, this._styles = new $h, this._selector = e, this._createStylesheet(), this } Hh.prototype._createStylesheet = function () { this._stylesheet = document.createElement("style"), this._stylesheet.className = "fl-ui-styles-button", document.head.appendChild(this._stylesheet) }, Hh.prototype.update = function () { this._styles.clear(); var t = this._state.background || this._layout.background_color_enabled && this._layout.background_color || "#ffffff", e = this._state.font_color || this._layout.font_color || "#333333", n = wi(this._state.border_color || e, this._state.border_transparency), r = vi(); this._styles.select(this._selector + ".fl-control.hidden").style("display", "none"), this._styles.select(this._selector + ".fl-control .button").style("overflow", "hidden").style("white-space", "nowrap").style("margin", "0 2px 0 0 !important").style("background-color", t).style("color", e).style("border", this._state.border_width + "px solid " + n).style("border-radius", this._state.border_radius + "px"), this._styles.select(this._selector + ".fl-control .button:hover").style("background-color", this._state.background_hover || t).style("color", this._state.font_color_hover || e), this._styles.select(this._selector + ".fl-control .button.selected").style("background-color", this._state.background_selected).style("color", this._state.font_color_selected), this._styles.select(this._selector + ".grouped.fl-control .button").style("border-right", "none").style("border-radius", "0").style("margin", "0"); var i = "rtl" === r, o = i ? ":last-child" : ":first-child", a = i ? ":first-child" : ":last-child"; this._styles.select(this._selector + ".grouped.fl-control .button" + o).style("border-radius", this._state.border_radius + "px 0 0 " + this._state.border_radius + "px"), this._styles.select(this._selector + ".grouped.fl-control .button" + a).style("border-radius", "0 " + this._state.border_radius + "px " + this._state.border_radius + "px 0").style("border-right", this._state.border_width + "px solid " + n), this._styles.select(this._selector + ".grouped.fl-control.fixed-width:not(.hidden)").style("width", this._state.grouped_width + "%"), this._stylesheet.innerHTML = this._styles.print() }; var qh = Object.freeze({ background: null, font_color: null, border_style: "bottom", border_width: 1, border_color: null, border_transparency: .25, border_radius: 3 }); function Bh(t, e, n) { for (var r in this._state = t, qh) void 0 === this._state[r] && (this._state[r] = qh[r]); return this._layout = n || {}, this._styles = new $h, this._selector = e, this._createStylesheet(), this } function Yh(t) { return t * parseFloat(getComputedStyle(document.documentElement).fontSize) } Bh.prototype._createStylesheet = function () { this._stylesheet = document.createElement("style"), this._stylesheet.className = "fl-ui-styles-dropdown", document.head.appendChild(this._stylesheet) }, Bh.prototype.update = function () { this._styles.clear(); const t = this._state.background || "transparent", e = this._state.font_color || this._layout.font_color, n = e || "inherit"; let r; r = this._state.border_color ? wi(this._state.border_color, this._state.border_transparency) : e ? wi(e, this._state.border_transparency) : "currentColor", this._styles.select(this._selector + " .heading").style("margin-bottom", "0.4em"), this._styles.select(this._selector).style("pointer-events", "all"), this._styles.select(this._selector + " select").style("display", "inline-block").style("cursor", "pointer").style("overflow", "hidden").style("white-space", "nowrap").style("position", "relative").style("font-family", "inherit").style("background-color", t).style("color", n).style("border", "bottom" == this._state.border_style ? this._state.border_width + "px solid transparent" : this._state.border_width + "px solid " + r).style("border-bottom", "bottom" == this._state.border_style ? this._state.border_width + "px solid " + r : null).style("border-radius", "bottom" == this._state.border_style ? null : this._state.border_radius + "px"), this._styles.select(this._selector + ":after").style("right", "bottom" == this._state.border_style ? null : this._state.border_width + 5 + "px").style("color", n), this._styles.select(this._selector + " .main .current").style("line-height", "1em").style("height", "100%").style("max-width", "88%").style("display", "inline-block").style("overflow", "hidden").style("vertical-align", "top"), this._styles.select(this._selector + " .list").style("top", "2px").style("min-width", "100%").style("padding", "2px").style("display", "none").style("max-height", "200px").style("overflow-y", "auto").style("box-shadow", "0 1px 4px rgba(0, 0, 0, .1)").style("margin-top", "2px").select(".list-item").style("line-height", "1em").style("cursor", "pointer").style("font-weight", "normal").style("color", n), this._styles.select(this._selector + ".open .list").style("display", "block").style("border", this._state.border_width + "px solid " + r).style("background-color", t).style("z-index", "1").style("animation", "dropdown-out 200ms"), this._styles.select(this._selector + " .list-item:hover").style("opacity", "0.6"), this._styles.select(this._selector + " .list-item.selected, " + this._selector + " .list-item.selected:hover").style("opacity", "1").style("cursor", "default"), "bottom" == this._state.border_style && this._styles.select(this._selector + " .main").style("padding-left", 0).style("padding-right", "0.1rem"), this._stylesheet.innerHTML = this._styles.print() }; var Rh = Object.freeze({ play_color: null, handle_color: null, font_color: null, track_color: null, handle_height: 1, track_height: .2, margin: 4.5, play_button: !0 }); function Ih(t, e, n) { for (var r in this._state = t, Rh) void 0 === this._state[r] && (this._state[r] = Rh[r]); return this._layout = n || {}, this._styles = new $h, this._selector = e, this._createStylesheet(), this } Ih.prototype._createStylesheet = function () { this._stylesheet = document.createElement("style"), this._stylesheet.className = "fl-ui-styles-slider", document.head.appendChild(this._stylesheet) }, Ih.prototype.update = function () { this._styles.clear(); var t = this._state.track_color || "#dddddd", e = this._state.font_color || this._layout.font_color || "currentColor", n = this._state.handle_color || this._layout.font_color || "currentColor", r = this._state.play_color || this._layout.font_color || "currentColor", i = Math.round(Yh(this._state.handle_height)), o = Yh(this._state.track_height); this._styles.select(this._selector + " .fl-controls-slider").style("height", 2 * i + "px"), this._styles.select(this._selector + " .slider-play").style("fill", r).style("width", i + "px").style("height", i + "px").style("display", this._state.play_button ? null : "none"), this._styles.select(this._selector + " .slider-label").style("padding-inline-start", "0.3rem").style("box-sizing", "content-box").style("color", e), this._styles.select(this._selector + " input[type=range]").style("-webkit-appearance", "none").style("color", "currentColor").style("background-color", "transparent"), this._styles.select(this._selector + " input[type=range]::-webkit-slider-runnable-track").style("-webkit-appearance", "none").style("background", t).style("border-radius", "100px").style("height", o + "px"), this._styles.select(this._selector + " input[type=range]::-webkit-slider-thumb").style("-webkit-appearance", "none").style("width", i + "px").style("height", i + "px").style("border-radius", "100px").style("background", n).style("margin-top", -i / 2 + o / 2 + "px"), this._styles.select(this._selector + " input[type=range]::-moz-range-track").style("-webkit-appearance", "none").style("background", t).style("border-radius", "100px").style("height", o + "px"), this._styles.select(this._selector + " input[type=range]::-moz-range-thumb").style("-webkit-appearance", "none").style("width", i + "px").style("height", i + "px").style("border-radius", "100px").style("border", "none").style("background", n), this._stylesheet.innerHTML = this._styles.print() }; var Wh, Gh, Vh = 25, Xh = 10, Zh = 10, Qh = {}; function Jh(t, e, n, r, i, o, a) { var l = n - t / 2 - Zh, s = n + t / 2 + Zh, u = t / 2 + Math.min(0, l - i.left) + Math.max(0, s - i.right); return { pos: [u, a], shape: u - Xh < 5 ? [-u, -15 * o, Math.max(Xh, 5 - u), -10 * o] : u + Xh > t - 5 ? [Math.min(-10, t - u - 5), -10 * o, Math.min(Xh, t - u), -15 * o] : [-10, -10 * o, Xh, -10 * o] } } function Kh(t, e, n, r, i, o, a) { var l = r - e / 2 - Zh, s = r + e / 2 + Zh, u = e / 2 + Math.min(0, l - i.top) + Math.max(0, s - i.bottom); return { pos: [a, u], shape: u - Xh < 5 ? [-15 * o, -u, -10 * o, Math.max(Xh, 5 - u)] : u + Xh > e - 5 ? [-10 * o, Math.min(-10, e - u - 5), -15 * o, Math.min(Xh, e - u)] : [-10 * o, -10, -10 * o, Xh] } } function tp(t, e, n, r, i, o) { var a = Qh[t](e, n, r, i, o), l = r - Vh - a.pos[0], s = i - Vh - a.pos[1]; return { left: l, top: s, right: l + e + 50, bottom: s + n + 50 } } function ep(t, e, n) { var r, i = document.createElementNS("http://www.w3.org/2000/svg", t); if (e) for (r in e) i.setAttribute(r, e[r]); var o = i.style; if (n) for (r in n) o[r] = n[r]; return i } function np() { return Wh || ((Wh = document.createElement("div")).id = "flourish-popup-constrainer", Wh.setAttribute("aria-hidden", !0), (Gh = Wh.style).overflow = "hidden", Gh.pointerEvents = "none", Gh.position = "absolute", Gh.left = "0", Gh.top = "0", Gh.margin = "0", Gh.padding = "0", document.body.appendChild(Wh), this._resizeConstrainer(), Wh) } Qh.bottom = function (t, e) { return { shape: [-10, -10, Xh, -10], pos: [t / 2, e + Zh] } }, Qh.top = function (t, e) { return { shape: [-10, Zh, Xh, Zh], pos: [t / 2, -10] } }, Qh.left = function (t, e) { return { shape: [Zh, Xh, Zh, -10], pos: [-10, e / 2] } }, Qh.right = function (t, e) { return { shape: [-10, Xh, -10, -10], pos: [t + Zh, e / 2] } }, Qh.topLeft = function (t, e) { return { shape: [15, Zh, Zh, 15], pos: [-10, -10] } }, Qh.bottomLeft = function (t, e) { return { shape: [15, -10, Zh, -15], pos: [-10, e + Zh] } }, Qh.topRight = function (t, e) { return { shape: [-15, Zh, -10, 15], pos: [t + Zh, -10] } }, Qh.bottomRight = function (t, e) { return { shape: [-15, -10, -10, -15], pos: [t + Zh, e + Zh] } }, Qh.bottomFlexible = function (t, e, n, r, i) { return Jh(t, 0, n, 0, i, 1, e + Zh) }, Qh.topFlexible = function (t, e, n, r, i) { return Jh(t, 0, n, 0, i, -1, -10) }, Qh.rightFlexible = function (t, e, n, r, i) { return Kh(0, e, 0, r, i, 1, t + Zh) }, Qh.leftFlexible = function (t, e, n, r, i) { return Kh(0, e, 0, r, i, -1, -10) }; var rp = { container: document.body, maxWidth: "70%", point: null, html: null, directions: ["bottom", "top", "left", "right", "topLeft", "bottomLeft", "topRight", "bottomRight", "bottomFlexible", "topFlexible", "leftFlexible", "rightFlexible"], fallbackFit: "horizontal" }; function ip() { for (var t in this.unique_id = function () { let t, e; return "Flourish" in window ? (t = window.Flourish, e = "__popup_next_unique_id") : (t = window, e = "__flourish_popup_next_unique_id"), t[e] ? (t[e] += 1, t[e]) : t[e] = 1e3 }(), this.is_visible = !0, this.element = null, rp) this["_" + t] = rp[t]; this.handlers = { click: [] } } function op(t) { ip.prototype[t] = function (e) { return void 0 === e ? this["_" + t] : (this["_" + t] = e, this) } } for (var ap in rp) op(ap); function lp() { return new ip } ip.prototype.point = function (t, e) { if (void 0 === t) return this._point; if (Array.isArray(t)) this._point = [t[0], t[1]]; else if (void 0 !== e) this._point = [t, e]; else if (t instanceof HTMLElement || t instanceof SVGElement) { var n = t.getBoundingClientRect(); this._point = [Math.floor(n.left + n.width / 2), Math.floor(n.top + n.height / 2)] } else console.error("Popup: could not understand argument"); return this }, ip.prototype.directions = function (t) { return void 0 === t ? this._directions : ("string" == typeof t && (t = [t]), this._directions = t.slice(), this) }, ip.prototype.text = function (t) { return this._html = t.replace(/[&<>]/g, (function (t) { return { "&": "&amp;", "<": "&lt;", ">": "&gt;" }[t] })), this }, ip.prototype.on = function (t, e) { if (!(t in this.handlers)) throw new Error("Popup.on: No such event: " + t); return this.handlers[t].push(e), this }, ip.prototype.fire = function (t, e) { if (!(t in this.handlers)) throw new Error("Popup.fire: No such event: " + t); for (var n = this.handlers[t], r = 0; r < n.length; r++)n[r].call(this, e); return this }, ip.prototype._getElement = function () { var t = this, e = t.element; if (!e) { e = t.element = document.createElement("div"); var n = "flourish-popup-" + t.unique_id; e.className = "flourish-popup", e.id = n; var r = e.style; r.display = "none", r.margin = r.padding = 0, r.position = "absolute", r.width = "80px", r.height = "40px", r.boxSizing = "border-box", e.addEventListener("click", (function (e) { t.fire("click", e) }), !1); var i = ep("svg", { class: "flourish-popup-svg" }, { position: "absolute", top: 0, left: 0, bottom: 0, right: 0 }), o = ep("filter", { id: "dropshadow-" + t.unique_id, height: "130%" }); o.appendChild(ep("feGaussianBlur", { in: "SourceAlpha", stdDeviation: 5 })), o.appendChild(ep("feOffset", { dx: 0, dy: 2, result: "offsetblur" })); var a = ep("feComponentTransfer"); a.appendChild(ep("feFuncA", { type: "linear", slope: .2 })), o.appendChild(a); var l = ep("feMerge"); o.appendChild(l), l.appendChild(ep("feMergeNode")), l.appendChild(ep("feMergeNode", { in: "SourceGraphic" })), i.appendChild(o); var s = ep("g", { filter: "url(#dropshadow-" + t.unique_id + ")", fill: "white", stroke: "none" }); s.appendChild(ep("rect", { x: Vh, y: Vh, rx: 5 })), s.appendChild(ep("path")), i.appendChild(s), e.appendChild(i); var u = document.createElement("div"); u.className = "flourish-popup-content", (r = u.style).position = "absolute", r.top = r.left = "25px", r.padding = "10px", e.appendChild(u), t._getConstrainer().appendChild(e) } return t._resizeConstrainer(), e }, ip.prototype._getConstrainer = np, ip.prototype._resizeConstrainer = function () { Wh || np.call(this); var t = Gh.display; Gh.display = "none", Gh.width = document.documentElement.scrollWidth + "px", Gh.height = document.documentElement.scrollHeight + "px", Gh.display = t }, ip.prototype.draw = function () { var t = this; if (t.is_visible = !0, t._point) { var e = document.documentElement.getBoundingClientRect(), n = t._point[0], r = t._point[1], i = t._container.getBoundingClientRect(); n < i.left ? n = i.left : n > i.right && (n = i.right), r < i.top ? r = i.top : r > i.bottom && (r = i.bottom); var o = n - e.left, a = r - e.top, l = t._getElement(), s = l.style, u = l.querySelector(".flourish-popup-svg"), c = u.querySelector("g"), f = c.querySelector("rect"), d = c.querySelector("path"), h = l.querySelector(".flourish-popup-content"); s.display = "block", h.style.maxWidth = function (e) { return t._maxWidth.match(/^\d+(?:\.\d+)?%$/) ? e.width * parseFloat(t._maxWidth) / 100 : t._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/) ? parseFloat(t._maxWidth) : (null != t._maxWidth && console.error("Popup: Unknown value for maxWidth: " + t._maxWidth), e.width) }(i) + "px", t._inner_html != t._html && (h.innerHTML = t._inner_html = t._html); var p, g, b = h.getBoundingClientRect(); do { p = Math.ceil(b.width), g = Math.ceil(b.height), s.width = p + 50 + "px", s.height = g + 50 + "px", b = h.getBoundingClientRect() } while (p != Math.ceil(b.width) || g != Math.ceil(b.height)); f.setAttribute("width", p), f.setAttribute("height", g), u.setAttribute("width", p + 50), u.setAttribute("height", g + 50); for (var _, m, y = null, v = null, w = null, x = 1 / 0, k = 1 / 0, M = 0; M < t._directions.length; M++) { var C = t._directions[M], A = tp(C, p, g, n, r, i), E = Math.max(0, Math.floor(i.left) - A.left - 15) + Math.max(0, A.right - Math.ceil(i.right) - 15), T = Math.max(0, Math.floor(i.top) - A.top - 15) + Math.max(0, A.bottom - Math.ceil(i.bottom) - 15); if (0 == E && 0 == T) { y = C; break } (E < x || E == x && T < _) && (x = E, _ = T, v = C), (T < k || T == k && E < m) && (k = T, m = E, w = C) } return y ? C = y : "horizontal" == t._fallbackFit ? C = v : "vertical" == t._fallbackFit ? C = w : (console.warn("Popup: failed to point box of size (" + p + ", " + g + ") at (" + n + ", " + r + ") within (" + i.left + ", " + i.top + ", " + i.right + ", " + i.bottom + ")"), C = t._directions[0]), function (t, e, n, r, i, o, a, l, s, u) { var c = Qh[t](r, i, l, s, u); e.left = o - Vh - c.pos[0] + "px", e.top = a - Vh - c.pos[1] + "px", n.setAttribute("d", "M0,0L" + c.shape.join(",") + "Z"), n.setAttribute("transform", "translate(" + (c.pos[0] + Vh) + "," + (c.pos[1] + Vh) + ")") }(C, s, d, p, g, o, a, n, r, i), t } console.error("Popup: cannot draw popup till point() has been specified") }, ip.prototype.hide = function () { return this.is_visible ? (this.is_visible = !1, this._getElement().style.display = "none", this) : this }, lp.version = "2.1.5"; var sp = 1, up = { container: document.body, point: [window.innerWidth / 2, window.innerHeight / 2], html: "", open_duration: 250, close_duration: 250, popup_custom_template: "", position: "overlay", shadow: !0, underlay_color: "rgba(255, 255, 255, 0.75)", width_side: 35, height_side: 35, width_overlay: 80, height_overlay: 80, vertical_position: "click", max_width: null, max_height: null, closeable: !0 }; function cp() { var t = this; for (var e in t.unique_id = sp++, t._is_open = !1, t._onclose = null, up) t["_" + e] = up[e] } function fp(t) { cp.prototype[t] = function (e) { return void 0 === e ? this["_" + t] : (this["_" + t] = e, this) } } for (var dp in up) fp(dp); cp.prototype.point = function (t, e) { if (void 0 === t) return this._point; if (Array.isArray(t)) this._point = [t[0], t[1]]; else if (void 0 !== e) this._point = [t, e]; else if (t instanceof HTMLElement || t instanceof SVGElement) { var n = t.getBoundingClientRect(); this._point = [Math.floor(n.left + n.width / 2), Math.floor(n.top + n.height / 2)] } else console.error("Panel: could not understand argument"); return this }, cp.prototype.container = function (t) { return t && (this._container = t), this }, cp.prototype.hide = function () { var t = this; if (t._is_open) return function (t) { t._getElement().style.pointerEvents = "none", t._is_open = !1; var e = t._close_duration; gt(t._getElement()).transition().duration(e).style("background", "rgba(255, 255, 255, 0)").on("interrupt", (function () { gt(this).style("display", t._is_open ? "block" : "none") })).on("end", (function () { gt(this).style("display", "none"), gt(t._content).html("") })).select(".flourish-panel-close").style("opacity", "0"), gt(t._inner).transition().duration(e).style("opacity", 0), gt(t._content).transition().duration(e / 2).style("opacity", 0) }(t), t._focusTrap.deactivate(), this }, cp.prototype.close = cp.prototype.hide, cp.prototype.draw = function () { var t = this; return t._content.innerHTML = t._html, function (t) { var e = t._is_open || t._html == t._default ? 0 : t._open_duration, n = window.innerWidth, r = window.innerHeight, i = "overlay" == t._position, o = "top" == t._position || "bottom" == t._position, a = "left" == t._position || "right" == t._position, l = 100 * (t._max_width || 1 / 0) / n, s = 100 * (t._max_height || 1 / 0) / r, u = 100 * t._point[1] / r, c = "click" == t._vertical_position && !Flourish.fixed_height, f = i ? Math.min(t._width_overlay, l) : o ? 100 : Math.min(t._width_side, l), d = i ? Math.min(t._height_overlay, s) : a ? 100 : Math.min(t._height_side, s), h = i ? (100 - f) / 2 : "right" == t._position ? 100 - f : 0, p = c ? Math.max(1, Math.min(u - d / 2, 99 - d)) : (100 - d) / 2, g = i ? p : "bottom" == t._position ? 100 - d : 0, b = i ? 0 : f, _ = i ? 0 : d, m = i ? 100 * t._point[0] / n : "right" == t._position ? 100 : "left" == t._position ? -f : 0, y = i ? u : "bottom" == t._position ? 100 : "top" == t._position ? -d : 0, v = function (t) { var e = t.querySelectorAll("h1, h2, h3, h4, h5, h6"); if (e.length > 0) return e[0].textContent.trim(); var n = t.querySelector(".title, .heading, .panel-title, .popup-title"); return n ? n.textContent.trim() : null }(t._content), w = v ? v + " dialog" : "Information dialog"; gt(t._getElement()).style("display", "block").transition().duration(e).delay(.25 * e).style("background", i ? t._underlay_color : "rgba(255, 255, 255, 0)").style("pointer-events", i ? null : "none").attr("aria-label", w), gt(t._inner).style("opacity", 1).style("display", "block").style("pointer-events", "none").style("width", b + "%").style("height", _ + "%").style("left", m + "%").style("top", y + "%").transition().duration(e).style("width", f + "%").style("height", d + "%").style("left", h + "%").style("top", g + "%").on("end", (function () { gt(t._inner).style("pointer-events", "all").style("width", f + "%").style("height", d + "%").style("left", h + "%").style("top", g + "%") })).on("interrupt", (function () { gt(t._inner).style("pointer-events", "all").style("width", f + "%").style("height", d + "%").style("left", h + "%").style("top", g + "%") })); var x = a && c; gt(t._content).transition().duration(e / 4).delay(e).style("opacity", 1).on("interrupt", (function () { gt(this).style("opacity", 1) })), gt(t._content).select(".flourish-panel-content-inner").style("position", x ? "absolute" : null).style("top", x ? u + "%" : null).style("transform", x ? "translateY(-50%)" : null), gt(t._inner).select(".flourish-panel-close").style("opacity", 0).transition().duration(e / 4).delay(e).style("opacity", t._closeable ? 1 : 0).attr("tabindex", t._closeable ? "0" : "-1"), t._focusTrap || (t._focusTrap = function () { let t = null, e = null, n = null; const r = document.querySelector(".flourish-panel"), i = document.querySelector(".flourish-panel-inner"), o = i.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"]'); o.length && (e = o[0], n = o[o.length - 1]); function a(t) { if ("Tab" === t.key || 9 === t.keyCode) { if (0 === o.length) return; t.shiftKey && document.activeElement === e ? (t.preventDefault(), n.focus()) : t.shiftKey || document.activeElement !== n || (t.preventDefault(), e.focus()) } } return { activate: function () { t = document.activeElement, i.addEventListener("keydown", a), setTimeout((() => { r.focus() }), 100) }, deactivate: function () { i.removeEventListener("keydown", a); Boolean(document.querySelector(":focus-visible")) && t && t.focus() } } }()); t._focusTrap.activate(), t._is_open = !0, $t() }(t), this }, cp.prototype.on = function (t, e) { return "close" == t ? e && (this._onclose = e) : console.error("Panel .on() method only supports 'close' events"), this }, cp.prototype.margins = function () { var t = { top: 0, right: 0, bottom: 0, left: 0 }; if (this._is_open && "overlay" != this._position) { var e = this._getElement().getBoundingClientRect(); "top" == this._position && (t.top = e.top + e.height), "right" == this._position && (t.right = e.left), "bottom" == this._position && (t.bottom = e.top), "left" == this._position && (t.left = e.left + e.width) } return t.css = t.top + "px " + t.right + "px " + t.bottom + "px " + t.left + "px", t }, cp.prototype._getElement = function () { var t = this, e = "flourish-panel-" + t.unique_id, n = document.getElementById(e); if (!n) { (n = document.createElement("div")).className = "flourish-panel", n.role = "dialog", n.ariaModal = "true", n.tabIndex = "-1", n.id = e, n.addEventListener("click", (function (t) { t.stopPropagation(), l() })), window.addEventListener("keydown", (function (e) { t._is_open && "Escape" === e.key && (e.stopPropagation(), e.preventDefault(), l()) }), !1); var r = n.style; r.position = "absolute", r.zIndex = "999999", r.pointerEvents = "none", r.width = "100%", r.height = "100%", r.top = "0", r.left = "0", r.background = "rgba(255, 255, 255, 0)"; var i = document.createElement("div"); i.className = "flourish-panel-inner", n.appendChild(i), t._inner = i, function (t) { gt(t._inner).append("svg").attr("class", "flourish-panel-close fl-ignore-svg-download").attr("viewBox", "0 0 40 40").style("width", "1.25rem").style("height", "1.25rem").style("position", "absolute").style("right", "1rem").style("top", "1rem").style("cursor", "pointer").style("opacity", 0).attr("tabindex", "-1").attr("role", "button").attr("aria-label", "Close").on("mouseover", (function () { t._closeable && (this.style.opacity = .66) })).on("mouseout", (function () { t._closeable && (this.style.opacity = 1) })).on("click", (function () { it.stopPropagation(), t.hide(), t._onclose && t._onclose() })).on("touch", (function () { it.stopPropagation(), t.hide(), t._onclose && t._onclose() })).on("keydown", (function () { "Enter" != it.key && " " != it.key || (it.stopPropagation(), it.preventDefault(), t.hide(), t._onclose && t._onclose()) })).append("path").attr("stroke", "#333333").attr("stroke-width", "0.5rem").attr("stroke-linecap", "round").attr("d", "M 10,10 L 30,30 M 30,10 L 10,30") }(t), (r = i.style).width = "0", r.height = "0", r.position = "absolute", r.boxSizing = "border-box"; var o = document.createElement("div"); o.className = "flourish-panel-shadow", i.appendChild(o); var a = document.createElement("div"); a.className = "flourish-panel-content", i.appendChild(a), t._content = a, (r = a.style).opacity = "0", r.overflowY = "auto", r.height = "100%", t._container.appendChild(n) } function l() { t.hide(), t._onclose && t._onclose() } return n }; var hp = { mode: "popup", locked_id: null, popup_is_custom: !1, popup_custom_header: "Popup header", popup_custom_main: "Popup main content. Write your column names in between double curly brackets to display dynamic content.", popup_custom_accessible: "", popup_teaser_default: "Click to see more", popup_text_color: "#333333", popup_align: "start", popup_font_size: 1, popup_font_family: null, popup_width: 18, popup_background: "#ffffff", popup_background_opacity: 1, popup_padding: .5, popup_radius: .2, popup_shadow: !0, popup_pointer: !0, popup_header_background: "#333333", popup_header_text_color: "#ffffff", popup_header_type: "block", popup_list_type: "table", popup_list_label_weight: "normal", popup_list_separator: ": ", panel_is_custom: !1, panel_custom_header: "Custom panel header", panel_custom_main: "Custom panel main content", panel_side_default_content: "<h3>Tap or click to explore</h3>", panel_side_fixed: !1, panel_position: "overlay", panel_width_overlay: 80, panel_height_overlay: 80, panel_vertical_position: "center", panel_width_side: 35, panel_height_side: 35, panel_max_width: null, panel_max_height: null, panel_text_color: "#333333", panel_align: "start", panel_font_size: 1.25, panel_font_family: null, panel_background: "#ffffff", panel_background_opacity: .9, panel_padding: 1.2, panel_radius: .2, panel_shadow: !0, panel_open_duration: 250, panel_close_duration: 250, panel_list_type: "table", panel_list_label_weight: "normal", panel_list_separator: ": " }; const pp = /\{\{((?:[^}]|\}[^}])*)\}\}/g; function gp(t) { return !("" !== t && !Number.isNaN(t) && null != t) } function bp(t, e) { let n = { title: null, subtitle: null, main: {} }; var r = {}; const i = e[t._title_key], o = e[t._subtitle_key]; if (i) { n.title = i; const e = t._column_names[t._title_key]; r[e] = !0 } if (o) { n.subtitle = o; const e = t._column_names[t._subtitle_key]; r[e] = !0 } const a = Object.keys(t._column_names); a.includes("metadata") && a.push(a.splice(a.indexOf("metadata"), 1)[0]); for (let i = 0; i < a.length; i++) { const o = a[i]; if (t._column_names_hidden.indexOf(o) > -1) continue; if (o == t._title_key) continue; if (o == t._subtitle_key) continue; const l = t._column_names[o]; if (Array.isArray(l)) l.forEach((function (t, i) { r[t] || gp(e[o]) || (r[t] = !0, n.main[t] = e[o][i]) })); else { if (r[l] || gp(e[o])) continue; r[l] = !0, n.main[l] = e[o] } } return n } function _p(t, e) { let n = ""; var r = t._popup_default_template; const i = xp(t, e); if (t._state.popup_is_custom && t._state.popup_custom_accessible) { const e = t._state.popup_custom_accessible; n = wp(e, t, i) } else if (r) { var o = {}; r.match(pp).forEach((e => { e.replace(pp, (function (e, r) { var a; const l = t._column_names[r]; if (Array.isArray(l)) { if (0 == l.length) return; l.forEach((function (t, e) { if (o[t]) return; o[t] = !0; const n = i[r][e]; hi(n) || gp(n) || (a = `${t}: ${n}, `) })) } else { const t = i[r]; if (hi(t) || gp(t)) return; if (o[l]) return; o[l] = !0, a = `${l}: ${t}, ` } void 0 !== a && (n += a) })) })) } else { let e = bp(t, i); for (var a in e.title && (n += `${e.title}, `), e.subtitle && (n += `${e.subtitle}, `), e.main) { const t = e.main[a]; gp(t) || (n += `${a}: ${t}, `) } } return n = n.replace(/, $/, ""), function (t) { const e = document.createElement("div"); return e.innerHTML = t, e.innerText }(n) } function mp(t, e, n) { var r = "<div class='flourish-panel-content-inner'>", i = t["_" + n + "_default_template"], o = t._state[n + "_list_type"], a = t._state[n + "_list_separator"], l = "<br />" === a, s = l ? "" : a, u = l ? a : ""; if (i) r += i.replace(pp, (function (n, r) { var i, o = t._column_names[r]; if (Array.isArray(o)) { if (0 == o.length) return ""; i = "<ul>", o.forEach((function (t, n) { i += "<li>" + t + a + e[r][n] + "</li>" })), i += "</ul>" } else i = e[r]; return void 0 !== i ? i : "" })); else { let n = bp(t, e); if ((n.title || n.subtitle) && (r += "<header>", n.title && (r += `<h3>${n.title}</h3>`), n.subtitle && (r += `<h4>${n.subtitle}</h4>`), r += "</header>"), Object.keys(n.main).length) { let t = ""; for (var c in n.main) { const e = n.main[c]; "table" == o ? (t += "<tr><td class='table-col-label'><span class='data-heading'>", t += c + "</span></td><td class='table-col-value'>", t += e + "</td></tr>") : "ul" == o && (t += "<li><span class='data-heading'>" + c + s, t += " </span> " + u + e + "</li>") } r += "<div class='main-content'><" + o + ">", r += t, r += "</" + o + "></div></div>" } } return r } function yp(t, e, n) { var r; return Object.keys(t._column_names).some((function (i) { if (Array.isArray(t._column_names[i])) { var o = t._column_names[i].indexOf(e); if (o >= 0) return r = n[i][o], !0 } else if (t._column_names[i] == e) return r = n[i], !0 })), void 0 !== r ? r : "" } function vp(t, e, n) { var r = ""; const i = "popup" === n ? t._state.popup_custom_header : t._state.panel_custom_header, o = "popup" === n ? t._state.popup_custom_main : t._state.panel_custom_main; var a = wp(i, t, e), l = wp(o, t, e); return a && (r += "<header>" + a + "</header>"), l && (r += "<div class='main-content'>" + l + "</div>"), r } function wp(t, e, n) { return t.replace(/\{\{#if ((?:[^}]|\}[^}])*)\}\}([\s\S]*?)\{\{\/if\}\}/g, (function (t, r, i) { return "" == yp(e, r, n) ? "" : i })).replace(/\{\{(visualisation|story)\/(.*)\}\}/g, (function (t, e, n) { var r = n.split("/"); if (r.length < 1 || !["visualisation", "story"].includes(e)) return t; var i, o = { id: r[0], w: r[1] || "100%", h: r[2] || "400px%" }, a = "https://flo.uri.sh/" + e + "/" + o.id + "/embed?"; return (i = "iframe", gt(d(i).call(document.documentElement))).attr("src", a).attr("title", "Interactive or visual content").attr("class", "flourish-embed-iframe").attr("frameborder", "0").attr("scrolling", "no").attr("sandbox", "allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation").style("width", o.width).style("height", o.height).node().outerHTML })).replace(pp, (function (t, r) { return yp(e, r, n) })).trim() } function xp(t, e) { var n = t._formatters, r = {}; for (var i in e) if (n && n[i]) if (Array.isArray(n[i])) { for (var o = [], a = 0; a < n[i].length; a++) { let t; t = gp(e[i][a]) ? "" : n[i][a](e[i][a]), o.push(t) } r[i] = o } else { if (gp(e[i])) continue; r[i] = gp(e[i]) ? "" : n[i](e[i]) } else r[i] = gp(e[i]) ? "" : e[i]; return r } function kp(t, e, n) { var r = "", i = xp(t, e); return n && !t._state.popup_is_custom ? r += "<div class='main-content'>" + t._state.popup_teaser_default + "</div>" : n || t._state.popup_is_custom ? r += vp(t, i, "popup") : r += mp(t, i, "popup"), r } function Mp(t, e) { var n = "", r = xp(t, e); return t._state.panel_is_custom ? n += vp(t, r, "panel") : n += mp(t, r, "panel"), n } function Cp(t) { var e = t.popup._getElement(), n = e.querySelector(".flourish-popup-content"); n.style.padding = "0", n.style.textAlign = t._state.popup_align, n.style.color = t._state.popup_text_color, n.style.fontSize = t._state.popup_font_size + "rem", n.style.fontFamily = t._state.popup_font_family?.name || null, n.style.borderRadius = t._state.popup_radius + "rem", n.addEventListener("click", (function () { event.stopPropagation() })); var r = t.panel._getElement(), i = r.querySelector(".flourish-panel-inner"), o = r.querySelector(".flourish-panel-content"), a = xr(t._state.panel_background); i.style.background = "rgba(" + a.r + "," + a.g + "," + a.b + "," + t._state.panel_background_opacity + ")", i.style.borderRadius = t._state.popup_radius + "rem", i.style.boxShadow = "overlay" == t._state.panel_position && t._state.panel_shadow ? "0 0 1.5rem rgba(0,0,0,0.2)" : "", i.addEventListener("click", (function () { event.stopPropagation() })), o.style.padding = t._state.panel_padding + "rem", o.style.textAlign = t._state.panel_align, o.style.color = t._state.panel_text_color, o.style.fontSize = t._state.panel_font_size + "rem", o.style.fontFamily = t._state.panel_font_family?.name || null, o.style.boxSizing = "border-box"; var l = e.querySelector(".flourish-popup-svg g"); l.style.fill = t._state.popup_background, l.style.opacity = t._state.popup_background_opacity; var s = r.querySelector(".flourish-panel-close path"); s && (s.style.stroke = t._state.panel_text_color), 0 == t._state.popup_shadow ? l.removeAttribute("filter") : l.setAttribute("filter", "url(#dropshadow-" + t.popup.unique_id + ")"), l.querySelector("rect").setAttribute("rx", t._state.popup_radius + "rem"), l.querySelector("path").style.display = t._state.popup_pointer ? "block" : "none", function (t) { if (!document.querySelector("#popup-styles")) { var e = document.createElement("style"); e.id = "popup-styles", document.head.appendChild(e) } var n = new _h, r = "block" == t._state.popup_header_type, i = xr(t._state.popup_header_background || "transparent"); i.opacity = t._state.popup_header_background ? t._state.popup_background_opacity : 0; var o = t._state.panel_position; n.select(".flourish-panel .flourish-panel-shadow").style("pointer-events", "none").style("position", "absolute").style("display", "overlay" != o && t._state.panel_shadow ? "block" : "none").style("top", "bottom" == o ? "-3rem" : "top" == o ? "auto" : 0).style("right", "left" == o ? "-3rem" : "right" == o ? "auto" : 0).style("bottom", "top" == o ? "-3rem" : "bottom" == o ? "auto" : 0).style("left", "right" == o ? "-3rem" : "left" == o ? "auto" : 0).style("width", "left" == o || "right" == o ? "3rem" : "100%").style("height", "top" == o || "bottom" == o ? "3rem" : "100%").style("z-index", "-1").style("overflow", "hidden"), n.select(".flourish-panel .flourish-panel-shadow:before").style("content", "''").style("display", "block").style("position", "absolute").style("width", "left" == o || "right" == o ? "1.5rem" : "100%").style("height", "top" == o || "bottom" == o ? "1.5rem" : "100%").style("border-radius", "50%").style("background", "rgba(0,0,0,0.3)").style("bottom", "bottom" == o ? "-50%" : "top" == o ? "auto" : 0).style("left", "left" == o ? "-50%" : "right" == o ? "auto" : 0).style("top", "top" == o ? "-50%" : "bottom" == o ? "auto" : 0).style("right", "right" == o ? "-50%" : "left" == o ? "auto" : 0).style("filter", "blur(15px)"), n.select(".flourish-panel-inner:focus-visible").style("outline", "none !important"), n.select(".flourish-panel:focus-visible").style("outline", "none !important"), n.select(".flourish-panel-close:focus").style("outline", "none"), n.select(".flourish-panel-close:focus-visible").style("outline", "-webkit-focus-ring-color auto 5px"), n.select(".flourish-popup").style("pointer-events", "none").select(".flourish-popup-content").style("pointer-events", "auto").style("max-width", null == t._state.popup_width ? null : t._state.popup_width + "rem !important"), n.select(".flourish-popup header, .flourish-panel header").style("margin", "0"), n.select(".flourish-popup header").style("font-weight", "bold").style("color", r ? t._state.popup_header_text_color : null).style("background", r ? i.rgb() : null).style("padding", t._state.popup_padding + "rem").style("border-radius", t._state.popup_radius + "rem " + t._state.popup_radius + "rem 0 0"), n.select(".flourish-popup header:not(:last-child)").style("padding-bottom", r ? null : "0"), n.select(".flourish-popup header:not(:last-child)").style("padding-bottom", r ? null : "0"), n.select(".flourish-panel .flourish-panel-content-inner").style("overflow", "auto"), n.select(".flourish-panel header").style("font-weight", "bold").style("margin-bottom", "0.5em").style("padding-right", "1rem"), n.select(".flourish-popup .main-content").style("padding", t._state.popup_padding + "rem"), n.select(".flourish-popup header + .main-content").style("padding", t._state.popup_padding + "rem").style("padding-top", r ? null : "0"), n.select(".flourish-popup h3, .flourish-panel h3").style("font-size", "1em").style("margin", "0"), n.select(".flourish-popup h3, .flourish-popup h4, .flourish-popup ul li").style("text-align", t._state.popup_align), n.select(".flourish-panel h3, .flourish-panel h4, .flourish-panel ul li").style("text-align", t._state.panel_align), n.select(".flourish-popup h4, .flourish-panel h4").style("font-size", "1em").style("margin", r ? "0" : "0 0 0.25em").style("opacity", "0.6").style("font-weight", "normal"), n.select(".flourish-popup h4:empty, .flourish-panel h4:empty, .flourish-popup h3:empty, .flourish-panel h3:empty, .flourish-popup p:empty, .flourish-panel p:empty").style("display", "none"), n.select(".flourish-popup p, .flourish-panel p").style("margin", "0").style("font-size", "inherit").style("font-weight", "normal"), n.select(".flourish-popup table, .flourish-panel table").style("margin", "0").style("width", "100%").style("border-collapse", "collapse").style("table-layout", "auto"), n.select(".flourish-popup table tr, .flourish-panel table tr").style("border-top", "1px solid #eee"), n.select(".flourish-popup table tr:first-child, .flourish-panel table tr:first-child").style("border-top", "none"), n.select(".flourish-popup table tr td, .flourish-panel table tr td").style("padding", "0.25em 0 0.25em 0").style("padding-inline-end", "0.25em").style("vertical-align", "top").style("font-size", "inherit").style("text-align", "start").style("font-weight", "normal").style("overflow", "hidden").style("text-overflow", "ellipsis"), n.select(".flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td").style("padding-bottom", "0"), n.select(".flourish-popup .data-heading").style("font-weight", t._state.popup_list_label_weight).style("display", "inline-block"), n.select(".flourish-panel .data-heading").style("font-weight", t._state.panel_list_label_weight).style("display", "inline-block"), n.select(".flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value").style("text-align", "end").style("padding", "0.25em 0 0.25em 0").style("padding-inline-end", "0.25em"), n.select(".flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value").style("padding-bottom", "0"), n.select(".flourish-popup ul, .flourish-panel ul").style("padding", "0").style("margin", "0"), n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size", "inherit").style("list-style-type", "none"), t._state.popup_is_custom && (console.log("is custom", t._state.popup_is_custom), n.select(".flourish-popup ul, .flourish-panel ul, .flourish-popup ol").style("padding-inline-start", "1.5em").style("padding-inline-end", "0.5em"), n.select(".flourish-popup ul li, .flourish-panel ul li").style("list-style-type", "disc"), n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size", "inherit").style("list-style-position", "outside"), n.select(".flourish-popup ol li").style("padding-inline-start", "0.5em")), document.head.querySelector("#popup-styles").innerHTML = n.print() }(t) } function Ap(t, e, n) { var r = this; for (var i in this._state = t, this._popup_default_template = null, this._panel_default_template = null, this._title_key = "name", this._subtitle_key = null, this._first_load = !0, this._on_panel_close = null, this._show_default_content_timer = null, this._panel_container = e || document.body, this._popup_container = n || document.body, this._popup_directions = ["top", "bottom", "left", "right"], this._column_names = [], this._column_names_hidden = [], this._formatters = null, this._getLockedPosition = function () { return null }, hp) null == t[i] && (t[i] = hp[i]); this.panel = (new cp).container(this._panel_container).on("close", (function () { r._state.locked_id = null, r.popup.hide(), "function" == typeof r._on_panel_close && r._on_panel_close() })), this.popup = lp().container(this._popup_container).point(0, 0).draw().hide() } function Ep(t) { t.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents = "none" } function Tp(t) { t.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents = "auto" } function Np(t) { return t || 0 === t } Ap.prototype.getLockedPosition = function (t) { return "function" != typeof t ? console.error("Invalid function passed to @flourish/info-popup getLockedPosition") : this._getLockedPosition = t, this }, Ap.prototype.update = function (t) { if (null !== this._state.locked_id && "none" != this._state.mode) { var e = this._getLockedPosition(this._state.locked_id); e ? this.click(e[0], e[1], this._state.locked_id, t) : console.warn("@flourish/info-popup: failed to return value from getLockedPosition function") } else this.clickout() }, Ap.prototype.click = function (t, e, n, r) { if ("none" != this._state.mode) { var i = "popup" == this._state.mode ? "popup" : "panel"; this._checkIfPopupIsEmpty(e, i) ? "panel" === i ? this.hidePanel() : this.hidePopup() : (this._point(t), null != n ? (this._state.locked_id = n, Tp(this)) : this._state.locked_id = null, "panel" == i ? (clearTimeout(this._show_default_content_timer), this.popup.hide(), this._drawPanel(e, r)) : "popup" == i && (this.panel.hide(), this._drawPopup(e, r))) } }, Ap.prototype.clickout = function () { this._state.locked_id = null, "both" != this._state.mode && "panel" != this._state.mode || (this.popup.draw(), this.popup.hide(), "overlay" != this._state.panel_position && this._state.panel_side_fixed ? this._showDefaultPanelContent() : this.panel.hide()), "popup" == this._state.mode && (this.panel.hide(), this.popup.draw(), this.popup.hide()), "none" == this._state.mode && (this.panel.hide(), this.popup.draw(), this.popup.hide()) }, Ap.prototype.touch = function (t, e, n, r) { this.mouseover(t, e, r, !0, n) }, Ap.prototype.mouseover = function (t, e, n, r, i) { var o = "panel" == this._state.mode ? "panel" : "popup"; if (this._checkIfPopupIsEmpty(e, o, "both" == this._state.mode)) "panel" === o ? this.hidePanel() : this.hidePopup(); else { var a = this; if ("both" == this._state.mode) if (this._point(t), this._drawPopup(e, n, !0), r ? Tp(this) : Ep(this), r) a.popup._getElement().querySelector(".flourish-popup-content").onclick = function () { a.click(t, e, i, n) }; if ("popup" == this._state.mode) { if (null !== this._state.locked_id) return; Ep(this), this._point(t), this._drawPopup(e, n) } if ("panel" == this._state.mode) { if (null !== this._state.locked_id || "overlay" == this._state.panel_position) return; if (!this._state.panel_side_fixed) return; clearTimeout(this._show_default_content_timer), this._point(t), this._drawPanel(e, n) } } }, Ap.prototype.mouseout = function () { if ("both" == this._state.mode && this.popup.hide(), "popup" == this._state.mode) { if (null !== this._state.locked_id) return; this.popup.hide() } if ("panel" == this._state.mode) { if (null !== this._state.locked_id) return; if ("overlay" == this._state.panel_position || !this._state.panel_side_fixed) return; this._showDefaultPanelContent() } }, Ap.prototype.locked = function () { return this._state.locked_id }, Ap.prototype.mode = function () { return this._state.mode }, Ap.prototype.setColumnNames = function (t) { return this._column_names = t, this }, Ap.prototype.hideColumnNames = function (t) { return this._column_names_hidden = t, this }, Ap.prototype.setFormatters = function (t) { var e = {}; for (var n in t) if ("function" == typeof t[n]) e[n] = t[n]; else if (Array.isArray(t[n])) { for (var r = [], i = 0; i < t[n].length; i++) { var o; o = "function" == typeof t[n][i] ? t[n][i] : Cc(t[n][i].output_format_id), r.push(o) } e[n] = r } else e[n] = Cc(t[n].output_format_id); return this._formatters = e, this }, Ap.prototype._showDefaultPanelContent = function () { var t = this; clearTimeout(this._show_default_content_timer), this._show_default_content_timer = setTimeout((function () { t.panel.html(t._state.panel_side_default_content), t._drawPanel() }), 100), t._drawPanel() }, Ap.prototype._checkIfPopupIsEmpty = function (t, e, n) { if (this._state.popup_is_custom) return "" === ("panel" === e ? Mp(this, t) : kp(this, t, n)).trim(); if (Np(t[this._title_key])) return !1; for (var r = Object.keys(this._column_names), i = 0; i < r.length; i++) { var o = r[i]; if (!this._column_names_hidden.includes(o)) { var a = t[o]; if (Array.isArray(a)) { for (let t = 0; t < a.length; t++)if (Np(a[t])) return !1 } else if (Np(a)) return !1 } } return !0 }, Ap.prototype.getAccessiblePopupContent = function (t) { return _p(this, t) }, Ap.prototype.onPanelClose = function (t) { return this._on_panel_close = t, this }, Ap.prototype._drawPopup = function (t, e, n) { return t && this.popup.html(kp(this, t, n)), Cp(this), this.popup.draw(), e && e(this.popup._getElement(), t), this }, Ap.prototype._drawPanel = function (t, e) { return Cp(this), this.panel.open_duration(this._state.panel_open_duration).close_duration(this._state.panel_close_duration).width_overlay(this._state.panel_width_overlay).height_overlay(this._state.panel_height_overlay).vertical_position(this._state.panel_vertical_position).width_side(this._state.panel_width_side).height_side(this._state.panel_height_side).position(this._state.panel_position).max_width(this._state.panel_max_width).max_height(this._state.panel_max_height).closeable("overlay" == this._state.panel_position || !this._state.panel_side_fixed), void 0 === t ? this.panel.draw() : this.panel.html(Mp(this, t)).draw(), e && e(this.panel._getElement(), t), this }, Ap.prototype.hidePanel = function () { return this.panel.hide(), this }, Ap.prototype.hidePopup = function () { return this.popup.hide(), this }, Ap.prototype.popupDirections = function (t) { return t ? (this._popup_directions = t, this) : this._popup_directions.slice() }, Ap.prototype.margins = function () { return this.panel.margins() }, Ap.prototype._getBiggestGap = function (t) { var e, n, r = this._popup_container.getBoundingClientRect(), i = 0, o = { right: (r.width + r.left - (t.width + t.left)) / r.width, bottom: (r.height + r.top - (t.height + t.top)) / r.height, left: (t.left - r.left) / r.width, top: (t.top - r.top) / r.height }, a = { right: ["left", "leftFlexible", "topLeft", "bottomLeft", "bottomFlexible", "bottom", "topFlexible", "top", "bottomRight", "topRight", "rightFlexible", "right"], left: ["right", "rightFlexible", "topRight", "bottomRight", "top", "topFlexible", "bottom", "bottomFlexible", "bottomLeft", "topLeft", "leftFlexible", "left"], top: ["bottom", "bottomFlexible", "bottomRight", "bottomLeft", "rightFlexible", "leftFlexible", "right", "left", "topRight", "topLeft", "topFlexible", "top"], bottom: ["top", "topFlexible", "topLeft", "topRight", "left", "right", "leftFlexible", "rightFlexible", "bottomLeft", "bottomRight", "bottomFlexible", "bottom"] }; for (var l in o) this._popup_directions.indexOf(l) < 0 || o[l] > i && (i = o[l], e = l, n = a[l]); var s = t.left, u = t.top; return "left" == e || "right" == e ? u += .5 * t.height : "bottom" == e && (u += t.height), "top" == e || "bottom" == e ? s += .5 * t.width : "right" == e && (s += t.width), { side: e, arrow_directions: n, x: s, y: u } }, Ap.prototype._point = function (t) { var e, n, r = this._popup_directions; if (Array.isArray(t)) e = t[0], n = t[1]; else { if (!t || !t.getBoundingClientRect) return console.warn("@flourish/info-popup: Invalid positional value passed in point function, should be a coordinates array, or a node. Current value is", t), this; var i = t.getBoundingClientRect(), o = this._getBiggestGap(i); e = o.x, n = o.y, r = o.arrow_directions } return this.panel.point(t), this.popup.directions(r).point(e, n), this }, Ap.prototype.popupDefaultTemplate = function (t) { return null != t ? (this._popup_default_template = t, this) : this._popup_default_template }, Ap.prototype.panelDefaultTemplate = function (t) { return null != t ? (this._panel_default_template = t, this) : this._panel_default_template }, Ap.prototype.titleKey = function (t) { return null != t ? (this._title_key = t, this) : this._title_key }, Ap.prototype.subtitleKey = function (t) { return null != t ? (this._subtitle_key = t, this) : this._subtitle_key }; var Sp = function (t) { for (var e in nf = t, Qc) void 0 === nf[e] && (nf[e] = Qc[e]); return (Mi = document.createElement("style")).id = "flourish-page-styles", Mi.type = "text/css", document.head.appendChild(Mi), af.wrapper = function () { var t = document.createElement("div"); t.id = "fl-layout-wrapper-outer", t.style.display = "flex"; var e = document.createElement("main"); e.id = "fl-layout-wrapper", e.style.display = "flex", e.style.flexGrow = "1", e.style.flexDirection = "column", e.style.boxSizing = "border-box", e.style.overflow = "hidden"; var n = document.createElement("aside"); return n.id = "fl-layout-sidebar", n.style.position = "relative", af.sidebar = n, t.appendChild(e), t.appendChild(n), document.body.appendChild(t), e }(), of.forEach((function (t, e) { af[t] = uf(t, e) })), df("header").appendChild(function () { (zi = document.createElement("header")).className = "flourish-header"; var t = document.createElement("hgroup"); return Di = document.createElement("h2"), Li = document.createElement("h3"), $i = document.createElement("p"), (Oi = document.createElement("div")).className = "clearfix", (Pi = document.createElement("div")).className = "flourish-header-logo-container", zi.appendChild(Pi), zi.appendChild(t), t.appendChild(Di), t.appendChild(Li), zi.appendChild($i), zi.appendChild(Oi), zi }()), df("footer").appendChild(Bc()), af.primary.outer.style.overflow = "hidden", function () { var t = af.primary.outer; t.style.position = "relative", (rf = document.createElement("div")).id = "fl-layout-overlay"; var e = rf.style; e.position = "absolute", e.display = "none", e.width = "100%", e.height = "100%", e.top = 0, e.left = 0, e.backgroundColor = "rgb(200,200,200)", e.zIndex = 999999, e.pointerEvents = "none"; var n = document.createElement("p"); n.className = "fl-layout-overlay-message", (e = n.style).color = "#333333", e.fontSize = "1.5rem", e.paddingLeft = "15%", e.paddingRight = "15%", e.width = "100%", e.boxSizing = "border-box", e.position = "absolute", e.top = "50%", e.transform = "translate(0, -50%)", e.margin = "0", e.textAlign = "center", rf.appendChild(n), t.appendChild(rf) }(), ef(), { update: Vc, getWrapper: cf, getSidebar: ff, getSection: df, getOuterWidth: hf, getInnerWidth: pf, getOuterHeight: gf, getInnerHeight: bf, getPrimaryHeight: _f, getPrimaryWidth: mf, getDefaultPrimaryHeight: wf, getPrimaryScreenReadability: yf, setHeight: Mf, showOverlay: Cf, remToPx: qi, getOverlay: Af, awaitFonts: Jc, prepareScreenshotSVG: Tf, clearScreenshotSVG: Nf } }(a.layout), Fp = function (t) { for (let e in kc) void 0 === t[e] && (t[e] = kc[e]); return function (e) { return Mc(t, e) } }(a.formatting), zp = function (t) { var e = null; for (var n in Sf) void 0 === t[n] && (t[n] = Sf[n]); var r = null, i = function (t) { return e && e(t) || r }; return { getColor: i, updateColorScale: function (n) { return "number" != typeof n[0] ? e = function (t, e) { var n = {}, r = di(e).values(), i = t.categorical_palette, o = i.length; if (t.categorical_extend) { var a = Sf.rotation_angle, l = Lf.hcl(i, a); r.forEach((function (t, e) { n[t] = e < o ? i[e] : l() })) } else r.forEach((function (t, e) { n[t] = i[e % o] })); t.categorical_custom_palette.split("\n").filter(Boolean).forEach((function (t) { var e = t.lastIndexOf(":"); if (-1 !== e) { var r = t.slice(0, e).trim(), i = t.slice(e + 1).trim(); r && i && (n[r] = i) } })); var s = function (t) { return n[t] }; return s.domain = r.slice(), s.colors = r.map((function (t) { return n[t] })), s.items = r.map((function (t) { return { label: t, color: n[t] } })), s }(t, n) : "sequential" === t.numeric_type ? e = hh(t, n) : "diverging" === t.numeric_type && (e = function (t, e) { var n = th(e), r = n[0] < 0 && n[1] > 0 ? 0 : (n[0] + n[1]) / 2, i = [n[0], r, n[1]]; t.diverging_custom_domain && (i = [t.diverging_domain_min, t.diverging_domain_mid, t.diverging_domain_max]); var o = function (e) { var n = ph[t.diverging_palette] || bh(t); return t.diverging_reverse ? n(1 - e) : n(e) }; if (t.binning) return Kd(t, i, e, o); var a = bd(o).domain(i), l = function (t) { return isNaN(t) || null === t ? null : a(t) }; return l.domain = Object.freeze(i), l.midpoint = t.diverging_custom_domain ? t.diverging_domain_mid : r, l }(t, n)), i.thresholds = e.thresholds, i.centers = e.centers, i.midpoint = e.midpoint, i.domain = e.domain, i.colors = e.colors, i.items = e.items, this }, fallback: function (t) { return void 0 === t ? r : (r = "default" === t ? null : t, this) } } }(a.color), Dp = function (t) { return new Ah(t) }(a.controls_container), Lp = function (t) { var e = {}, n = Th, r = Nh, i = [], o = !0, a = [], l = [], s = [], u = document.createElement("div"); u.setAttribute("class", "fl-controls-container"); var c = gt(u).append("div").attr("class", "fl-controls-title"), f = function (t, e, n) { var r = {}, i = gt(n).append("div").attr("class", "fl-control fl-control-dropdown").style("display", "none"); const o = i.append("select").on("change", (function () { const e = o.select("option:checked").datum().options_index; t.index(e), t.trigger("change") })); var a = function (t) { var r = "100%"; "auto" == e.dropdown_width_mode ? r = Math.min(t + 40, xh(20)) + xh(1) + "px" : "fixed" == e.dropdown_width_mode && (r = xh(e.dropdown_width_fixed) + "px"), n.style.width = "full" == e.dropdown_width_mode ? r : "", i.style("width", r).style("display", "full" !== e.dropdown_width_mode ? "inline-table" : null) }, l = function () { i.style("display", "none") }; return r.show = a, r.hide = l, r.update = function (n, i) { var s = window.getComputedStyle(o.node()).fontSize; if (!t.n_options || "dropdown" !== e.control_type) return l(), r; const u = o.selectAll("option").data(n, (t => t.value)); u.exit().remove(); var c = u.enter().append("option"); u.merge(c).text((t => t.display)).attr("value", (t => t.value)); let f = 0; const d = s + " sans-serif"; return "auto" === e.dropdown_width_mode && u.merge(c).each((function (t) { const e = kh(t.display, d); f = Math.max(f, e) })), o.node().value = t.value(), i ? a(f) : l(), r }, r }(e, t, u), d = function (t, e, n) { var r = {}, i = gt(n).append("div").attr("class", "fl-control fl-control-buttons"), o = function () { i.classed("hidden", !1) }, a = function () { i.classed("hidden", !0) }; return r.show = o, r.hide = a, r.update = function (n, l) { if (!t.n_options || "buttons" !== e.control_type) return a(), r; var s = t.index(); i.classed("grouped", e.button_group), i.classed("fixed-width", "fixed" == e.button_group_width_mode || "full" == e.button_group_width_mode), i.style("width", e.button_group && "fixed" == e.button_group_width_mode ? xh(e.button_group_width_fixed) + "px" : "full" == e.button_group_width_mode ? "100%" : null); var u = function (e) { var n = e.options_index; n !== t.index() && (t.index(n), t.trigger("change")) }, c = i.selectAll(".button").data(n, (function (t) { return t.display })), f = c.enter().append("div").attr("class", "button").style("cursor", "pointer").attr("role", "button").attr("tabindex", 0).on("click", (function (t) { u(t) })).on("keyup", (function (t) { "Space" !== it.code && "Enter" !== it.code || (it.preventDefault(), u(t)) })); f.append("span").text((function (t) { return t.display })), c.merge(f).classed("selected", (function (t) { return t.options_index === s })).attr("aria-pressed", (function (t) { return t.options_index === s })), c.exit().remove(), l ? o() : a() }, r }(e, t, u), h = Mh(e, t, u); for (var p in Eh) void 0 === t[p] && (t[p] = Eh[p]); var g = t._index_; e.appendTo = function (t) { return vh(), gt(t).node().appendChild(u), e }, e.remove = function () { return u.parentElement && u.parentElement.removeChild(u), e }, e.options = function (t) { if (void 0 === t) return a.slice(); if (!Array.isArray(t)) return e; var n = (a = t.slice()).length, r = b(); return n ? (null === r || r >= n) && b(0) : b(null), e }, Object.defineProperty(e, "n_options", { get: function () { return a.length } }); var b = function (n) { return void 0 === n ? (t._is_playing_ || (g = t._index_), g) : (null === n || function (t) { return a.length && t >= 0 && t < a.length }(n) ? (g = n, t._is_playing_ || (t._index_ = g)) : console.warn("Invalid index, ignoring update call"), e) }; return e.index = b, e.getSortedIndex = function () { var e, n = b(); return "unsorted" == t.sort ? n : (l.some((function (t, r) { if (t.options_index === n) return e = r, !0 })), e) }, e.value = function (t) { if (void 0 === t) return a[b()]; var n = a.indexOf(t); return -1 !== n && b(n), e }, e.on = function (t, n) { return "change" === t && s.push(n.bind(e)), e }, e.parse = function (t) { return void 0 === t ? n : (n = null === t ? Th : t, e) }, e.format = function (t, n) { if (void 0 === t) return r; if (null === t && (r = Nh), "string" == typeof t) try { r = Cc(t) } catch (t) { r = Nh, console.warn(t.message) } else r = t; return n && Array.isArray(n) && (i = n), e }, e.visible = function (t) { return void 0 === t ? o : (o = null === t || t, e) }, e.update = function () { var s; return s = parseFloat(getComputedStyle(document.documentElement).fontSize) || 16, xh = function (t) { return t * s }, l = function (t, e, n, r, i) { var o = t.map((function (t, e) { return { value: t, options_index: e, parsed: n(t), display: i.includes(t) ? t : r(t) } })); return e ? o.sort((function (t, e) { return function (t, e) { return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN }(t.parsed, e.parsed) })) : o }(a, t.sort, n, r, i), function (e) { u.style.display = e.length > 1 ? "flex" : "none", u.style.width = "", u.style.alignItems = "center", c.node().innerHTML = t.control_title, c.node().style.display = "" === t.control_title ? "none" : "inline-block", h.update(e, o), f.update(e, o), d.update(e, o) }(l), e }, e.trigger = function (t) { return "change" === t && function () { var t = b(), e = a[t]; s.forEach((function (n) { n(e, t) })) }(), e }, e.getNode = function () { return u }, e._isPlaying_ = function (e) { if (void 0 === e) return t._is_playing_; t._is_playing_ = !!e, e || b(g) }, e }(a.filter_controls), $p = function (t, e, n) { return new Bh(t, e, n) }(a.dropdown_style, ".fl-control-dropdown"), Op = function (t, e, n) { return new Uh(t, e, n) }(a.controls_style, ".fl-control"), Pp = function (t, e, n) { return new Hh(t, e, n) }(a.button_style, ".fl-control-buttons"), Up = function (t, e, n) { return new Ih(t, e, n) }(a.slider_style, ".fl-control-slider"), jp = function (t) { return new Dh(t) }(a.facets); const Hp = function (t, e, n) { return new Ap(t, e, n) }(a.popup); var qp; function Bp(t, e) { qp = t, e && (a.focus = qp) } function Yp(t) { return t.target.depth } function Rp(t, e) { return t.sourceLinks.length ? t.depth : e - 1 } function Ip(t) { return function () { return t } } function Wp(t, e) { return Vp(t.source, e.source) || t.index - e.index } function Gp(t, e) { return Vp(t.target, e.target) || t.index - e.index } function Vp(t, e) { return t.y0 - e.y0 } function Xp(t) { return t.value } function Zp(t) { return (t.y0 + t.y1) / 2 } function Qp(t) { return Zp(t.source) * t.value } function Jp(t) { return Zp(t.target) * t.value } function Kp(t) { return t.index } function tg(t) { return t.nodes } function eg(t) { return t.links } function ng(t, e) { var n = t.get(e); if (!n) throw new Error("missing: " + e); return n } function rg() { var t = 0, e = 0, n = 1, r = 1, i = 24, o = 8, a = Kp, l = Rp, s = tg, u = eg, c = 32, f = null; function d() { var d = { nodes: s.apply(null, arguments), links: u.apply(null, arguments) }; return function (t) { t.nodes.forEach((function (t, e) { t.index = e, t.sourceLinks = [], t.targetLinks = [] })); var e = ii(t.nodes, a); t.links.forEach((function (t, n) { t.index = n; var r = t.source, i = t.target; "object" != typeof r && (r = t.source = ng(e, r)), "object" != typeof i && (i = t.target = ng(e, i)), r.sourceLinks.push(t), i.targetLinks.push(t) })) }(d), function (t) { t.nodes.forEach((function (t) { t.value = Math.max(Vf(t.sourceLinks, Xp), Vf(t.targetLinks, Xp)) })) }(d), function (e) { var r, o, a; for (r = e.nodes, o = [], a = 0; r.length; ++a, r = o, o = [])r.forEach((function (t) { t.depth = a, t.sourceLinks.forEach((function (t) { o.indexOf(t.target) < 0 && o.push(t.target) })) })); for (r = e.nodes, o = [], a = 0; r.length; ++a, r = o, o = [])r.forEach((function (t) { t.height = a, t.targetLinks.forEach((function (t) { o.indexOf(t.source) < 0 && o.push(t.source) })) })); null !== f && (a = Math.max(f, a)); var s = (n - t - i) / (a - 1); e.nodes.forEach((function (e) { e.x1 = (e.x0 = t + Math.max(0, Math.min(a - 1, Math.floor(l.call(null, e, a)))) * s) + i })) }(d), function (t) { var n = oi().key((function (t) { return t.x0 })).sortKeys($f).entries(t.nodes).map((function (t) { return t.values })); l(), f(); for (var i = 1, a = c; a > 0; --a)u(i *= .99), f(), s(i), f(); function l() { var i = Gf(n, (function (t) { return (r - e - (t.length - 1) * o) / Vf(t, Xp) })); n.forEach((function (t) { t.forEach((function (t, e) { t.y1 = (t.y0 = e) + t.value * i })) })), t.links.forEach((function (t) { t.width = t.value * i })) } function s(t) { n.forEach((function (e) { e.forEach((function (e) { if (e.targetLinks.length) { var n = (Vf(e.targetLinks, Qp) / Vf(e.targetLinks, Xp) - Zp(e)) * t; e.y0 += n, e.y1 += n } })) })) } function u(t) { n.slice().reverse().forEach((function (e) { e.forEach((function (e) { if (e.sourceLinks.length) { var n = (Vf(e.sourceLinks, Jp) / Vf(e.sourceLinks, Xp) - Zp(e)) * t; e.y0 += n, e.y1 += n } })) })) } function f() { n.forEach((function (t) { var n, i, a, l = e, s = t.length; for (t.sort(Vp), a = 0; a < s; ++a)(i = l - (n = t[a]).y0) > 0 && (n.y0 += i, n.y1 += i), l = n.y1 + o; if ((i = l - o - r) > 0) for (l = n.y0 -= i, n.y1 -= i, a = s - 2; a >= 0; --a)(i = (n = t[a]).y1 + o - l) > 0 && (n.y0 -= i, n.y1 -= i), l = n.y0 })) } }(d), h(d), d } function h(t) { t.nodes.forEach((function (t) { t.sourceLinks.sort(Gp), t.targetLinks.sort(Wp) })), t.nodes.forEach((function (t) { var e = t.y0, n = e; t.sourceLinks.forEach((function (t) { t.y0 = e + t.width / 2, e += t.width })), t.targetLinks.forEach((function (t) { t.y1 = n + t.width / 2, n += t.width })) })) } return d.update = function (t) { return h(t), t }, d.nodeId = function (t) { return arguments.length ? (a = "function" == typeof t ? t : Ip(t), d) : a }, d.nodeAlign = function (t) { return arguments.length ? (l = "function" == typeof t ? t : Ip(t), d) : l }, d.nodeWidth = function (t) { return arguments.length ? (i = +t, d) : i }, d.nodePadding = function (t) { return arguments.length ? (o = +t, d) : o }, d.nodes = function (t) { return arguments.length ? (s = "function" == typeof t ? t : Ip(t), d) : s }, d.links = function (t) { return arguments.length ? (u = "function" == typeof t ? t : Ip(t), d) : u }, d.size = function (i) { return arguments.length ? (t = e = 0, n = +i[0], r = +i[1], d) : [n - t, r - e] }, d.extent = function (i) { return arguments.length ? (t = +i[0][0], n = +i[1][0], e = +i[0][1], r = +i[1][1], d) : [[t, e], [n, r]] }, d.iterations = function (t) { return arguments.length ? (c = +t, d) : c }, d.nodeDepth = function (t) { return arguments.length ? (f = +t, d) : f }, d } var ig = Math.PI, og = 2 * ig, ag = 1e-6, lg = og - ag; function sg() { this._x0 = this._y0 = this._x1 = this._y1 = null, this._ = "" } function ug() { return new sg } function cg(t) { return function () { return t } } function fg(t) { return t[0] } function dg(t) { return t[1] } sg.prototype = ug.prototype = { constructor: sg, moveTo: function (t, e) { this._ += "M" + (this._x0 = this._x1 = +t) + "," + (this._y0 = this._y1 = +e) }, closePath: function () { null !== this._x1 && (this._x1 = this._x0, this._y1 = this._y0, this._ += "Z") }, lineTo: function (t, e) { this._ += "L" + (this._x1 = +t) + "," + (this._y1 = +e) }, quadraticCurveTo: function (t, e, n, r) { this._ += "Q" + +t + "," + +e + "," + (this._x1 = +n) + "," + (this._y1 = +r) }, bezierCurveTo: function (t, e, n, r, i, o) { this._ += "C" + +t + "," + +e + "," + +n + "," + +r + "," + (this._x1 = +i) + "," + (this._y1 = +o) }, arcTo: function (t, e, n, r, i) { t = +t, e = +e, n = +n, r = +r, i = +i; var o = this._x1, a = this._y1, l = n - t, s = r - e, u = o - t, c = a - e, f = u * u + c * c; if (i < 0) throw new Error("negative radius: " + i); if (null === this._x1) this._ += "M" + (this._x1 = t) + "," + (this._y1 = e); else if (f > ag) if (Math.abs(c * l - s * u) > ag && i) { var d = n - o, h = r - a, p = l * l + s * s, g = d * d + h * h, b = Math.sqrt(p), _ = Math.sqrt(f), m = i * Math.tan((ig - Math.acos((p + f - g) / (2 * b * _))) / 2), y = m / _, v = m / b; Math.abs(y - 1) > ag && (this._ += "L" + (t + y * u) + "," + (e + y * c)), this._ += "A" + i + "," + i + ",0,0," + +(c * d > u * h) + "," + (this._x1 = t + v * l) + "," + (this._y1 = e + v * s) } else this._ += "L" + (this._x1 = t) + "," + (this._y1 = e); else; }, arc: function (t, e, n, r, i, o) { t = +t, e = +e, o = !!o; var a = (n = +n) * Math.cos(r), l = n * Math.sin(r), s = t + a, u = e + l, c = 1 ^ o, f = o ? r - i : i - r; if (n < 0) throw new Error("negative radius: " + n); null === this._x1 ? this._ += "M" + s + "," + u : (Math.abs(this._x1 - s) > ag || Math.abs(this._y1 - u) > ag) && (this._ += "L" + s + "," + u), n && (f < 0 && (f = f % og + og), f > lg ? this._ += "A" + n + "," + n + ",0,1," + c + "," + (t - a) + "," + (e - l) + "A" + n + "," + n + ",0,1," + c + "," + (this._x1 = s) + "," + (this._y1 = u) : f > ag && (this._ += "A" + n + "," + n + ",0," + +(f >= ig) + "," + c + "," + (this._x1 = t + n * Math.cos(i)) + "," + (this._y1 = e + n * Math.sin(i)))) }, rect: function (t, e, n, r) { this._ += "M" + (this._x0 = this._x1 = +t) + "," + (this._y0 = this._y1 = +e) + "h" + +n + "v" + +r + "h" + -n + "Z" }, toString: function () { return this._ } }; var hg = Array.prototype.slice; function pg(t) { return t.source } function gg(t) { return t.target } function bg(t, e, n, r, i) { t.moveTo(e, n), t.bezierCurveTo(e = (e + r) / 2, n, e, i, r, i) } function _g() { return function (t) { var e = pg, n = gg, r = fg, i = dg, o = null; function a() { var a, l = hg.call(arguments), s = e.apply(this, l), u = n.apply(this, l); if (o || (o = a = ug()), t(o, +r.apply(this, (l[0] = s, l)), +i.apply(this, l), +r.apply(this, (l[0] = u, l)), +i.apply(this, l)), a) return o = null, a + "" || null } return a.source = function (t) { return arguments.length ? (e = t, a) : e }, a.target = function (t) { return arguments.length ? (n = t, a) : n }, a.x = function (t) { return arguments.length ? (r = "function" == typeof t ? t : cg(+t), a) : r }, a.y = function (t) { return arguments.length ? (i = "function" == typeof t ? t : cg(+t), a) : i }, a.context = function (t) { return arguments.length ? (o = null == t ? null : t, a) : o }, a }(bg) } var mg = .01; function yg(t) { return [t.source.x1, t.y0] } function vg(t) { var e = t.y1, n = e - t.y0; return Math.abs(n) < mg && (e = n >= 0 ? t.y0 + mg : t.y0 - mg), [t.target.x0, e] } function wg() { return _g().source(yg).target(vg) } var xg = { sum: function (t) { return t.reduce((function (t, e) { return t + e }), 0) }, min: function (t) { return Math.min.apply(null, t) }, max: function (t) { return Math.max.apply(null, t) }, median: function (t) { var e = t.slice().sort((function (t, e) { return t > e })), n = e.length, r = Math.floor(n / 2); return n % 2 == 1 ? e[r] : (e[r - 1] + e[r]) / 2 }, first: function (t) { return t[0] }, last: function (t) { return t[t.length - 1] }, random: function (t) { return t.length > 1 ? [Math.floor(Math.random() * t.length)] : t[0] }, count: function (t) { return t.length } }; function kg(t) { return Object.keys(t).map((function (e) { return t[e] })) } xg.mean = function (t) { return xg.sum(t) / t.length }; var Mg = { ascending: function (t, e) { return t > e }, descending: function (t, e) { return t < e } }; function Cg(t, e) { if (Array.isArray(t)) { if ("string" == typeof e) e = [e]; else if (!Array.isArray(e) && e.some((function (t) { return "string" !== t }))) return; var n, r, i = {}, o = e.length, a = [], l = "none", s = function (t, e, n) { t && e && (t[e] = n) }; t.forEach((function (t) { var n = i; e.every((function (e, r) { var i = t[e]; return void 0 !== i && (r < o - 1 ? (n.hasOwnProperty(i) || (n[i] = {}), n = n[i]) : (n.hasOwnProperty(i) || (n[i] = [], a.push({ parent: n, prop: i, data: n[i] })), n[i].push(t)), !0) })) })); var u = function (t, e, i) { if (void 0 === t) n = void 0, r = void 0, a.forEach((function (t) { s(t.parent, t.prop, t.data) })), l = "none"; else { var o = e ? xg[e] : xg.sum; if ("string" != typeof t || !o) return; n = 1 / 0, r = -1 / 0, a.forEach((function (e) { var i = e.data, a = function (t) { var e = {}; return Object.keys(t).forEach((function (n) { e[n] = t[n] })), e }(i[0]); delete a[t]; var l = i.map((function (e, n) { return e[t] })), u = o(l); u < n && (n = u), u > r && (r = u), a[t] = u, s(e.parent, e.prop, a) })), l = e } }, c = function (t) { "string" == typeof t && (t = [t]); var e = t.slice().filter((function (t) { return null != t })); e.length > o && (e.length = o); var n = function (t) { if (Array.isArray(t)) return t.reduce((function (t, e) { return t && t[e] || void 0 }), i) }(e); if (!n) return []; var r = e.length; if (r === o) return [n]; for (var a = kg(n), l = r; l < o - 1; l++)a = a.map((function (t) { return kg(t) })).reduce((function (t, e) { return t.concat(e) })); return a }; return { get tree() { return i }, aggregate: function (t, e) { return u(t, e), this }, get min_value() { return n }, get max_value() { return r }, get aggregation_method() { return l }, leafData: function () { return a.map((function (t) { return t.parent[t.prop] })) }, extract: function (t, e, n) { var r = c(t); if (r && e) { var i = Mg[e]; if (!i) return; r.sort(i), n >= 0 && r.length > n && (r.length = n) } return r } } } } function Ag(t) { if ("string" == typeof t) { const e = (new TextEncoder).encode(t), n = String.fromCodePoint(...e); return btoa(n).replace(/[+=/]/g, (t => "-" + t.charCodeAt(0))) } return "" } function Eg(t, e) { return t - e } function Tg() { var t = {}, e = 0, n = function (r, i) { if (void 0 === r) { var o = e; return e = 0, o } return void 0 === i ? t[r] : i !== t[r] && (void 0 === t[r] && Object.defineProperty(n, r, { get: function () { return t[r] } }), t[r] = i, e++, !0) }; return n } var Ng, Sg, Fg, zg, Dg, Lg, $g, Og, Pg, Ug, jg, Hg = [], qg = [], Bg = [], Yg = []; function Rg(t, e) { var n = Ag(t.source), r = Ag(t.target), i = Ng ? t.value : 1, o = 0, a = 1; return Fg ? (o = t.step_from, a = zg ? t.step_to : o + 1) : zg && (o = (a = t.step_to) - 1), { source: t.source, target: t.target, encoded_source: n, encoded_target: r, value: i, step_from: Math.floor(o), step_to: Math.floor(a), row_index: e, metadata: t.metadata } } function Ig(t, e) { return t.step_from !== e.step_from ? t.step_from - e.step_from : t.row_index - e.row_index } function Wg(t) { var e = function (t) { function e(t, e) { t && (1 === t ? Flourish.warn("1 entry skipped because " + e) : Flourish.warn(t + " entries skipped because " + e)) } var n = 0, r = 0, i = 0, o = 0, a = 0, l = 0, s = function (e) { return e.encoded_source && e.encoded_target ? t && isNaN(e.value) ? ++r && !1 : t && e.value <= 0 ? ++i && !1 : Fg && isNaN(e.step_from) ? ++o && !1 : zg && isNaN(e.step_to) ? ++a && !1 : !(Sg && e.step_to <= e.step_from) || ++l && !1 : ++n && !1 }; return s.logWarnings = function () { e(n, "encoded name is empty string"), e(r, "value cannot be parsed"), e(i, "value is non-positive"), e(o, "step from is invalid"), e(a, "step to is invalid"), e(l, "step is invalid") }, s }(Ng), n = t.map(Rg).filter(e).sort(Ig); return e.logWarnings(), n } function Gg(t) { var e = t.data; Bg = t.node_data, Yg = t.link_data; var n = di(); e.forEach((function (t) { n.add(t.step_from).add(t.step_to) })), n.each((function (t) { qg.push(+t) })), qg.sort(Eg); var r = {}, i = function (e, n) { var i = function (t, e) { var n = Ag(t); return { name: t, encoded_name: n, identifier: n + "-" + e, step: e } }(e, n), o = r[i.identifier]; return void 0 === o ? function (e) { r[e.identifier] = e.identifier; var n = qg.indexOf(e.step); return Bg.push({ name: e.name, encoded_name: e.encoded_name, identifier: e.identifier, id: `node-${e.identifier}`, column: n, step: e.step, step_offset: e.step - qg[0], is_source: 0 === n, is_target: n === qg.length - 1, type: "node", facet: t.name }), e.identifier }(i) : o }; e.forEach((function (e) { var n = i(e.source, e.step_from), r = i(e.target, e.step_to); Yg.push({ source: n, target: r, step_from: e.step_from, step_to: e.step_to, value: e.value, type: "link", facet: t.name, id: `link-${n}-${r}`, metadata: e.metadata }) })) } function Vg(t, e) { return -1 === Hg.indexOf(t.name) || -1 === Hg.indexOf(e.name) ? 1 : Hg.indexOf(t.name) - Hg.indexOf(e.name) } function Xg() { var t = Dg === a.mode, e = Lg === a.filter, n = Og === a.facets_hide_empty, r = Pg === a.sorting_mode, i = Ug === a.node_sort_order; if (o.data.processed && t && e && n && r && i) return; Lg = a.filter, Dg = a.mode, Og = a.facets_hide_empty, Pg = a.sorting_mode_unchanged, Ug = a.node_sort_order, qg = [], Ng = void 0 !== o.data.column_names.value, Fg = "alluvial" === a.mode && void 0 !== o.data.column_names.step_from, zg = "alluvial" === a.mode && void 0 !== o.data.column_names.step_to, Sg = Fg || zg; var l = o.data; "filter" in o.data.column_names && a.filter && (l = o.data.filter((t => t.filter_display === a.filter))); const s = Object.keys(o.data.column_names).includes("facet"); let u; u = s ? [...new Set(o.data.map((t => t.facet)))] : [""], $g = [], u.forEach((function (t) { $g.push({ name: t, index: u.indexOf(t), raw_data: [], node_data: [], link_data: [], metadata: o.data.metadata }) })); var c = {}; $g.forEach((function (t) { c[t.name] = t })), l.forEach((function (t) { let e = t.facet || ""; c[e].raw_data.push(t) })), a.facets_hide_empty && ($g = $g.filter((function (t) { return t.raw_data.length > 0 }))), $g.all_node_data = [], $g.forEach((function (t) { Hg = t.raw_data.map((t => t.source)).filter(((t, e, n) => n.indexOf(t) === e)); var e = Wg(t.raw_data); t.data = Cg(e, ["encoded_source", "encoded_target", "step_from", "step_to"]).aggregate("value", "sum").leafData(), "alluvial" === Dg ? Gg(t) : function (t) { var e = t.data; Bg = t.node_data, Yg = t.link_data; var n = {}, r = {}, i = {}, o = {}, a = function (e, a) { void 0 === a && (a = Ag(e)), void 0 === o[a] ? o[a] = 1 : ++o[a]; var l = a + "-" + o[a]; return n[a] = l, Bg.push({ name: e, encoded_name: a, identifier: l, type: "node", facet: t.name }), r[l] = di([l]), i[l] = di([l]), l }, l = function (t) { var e = Ag(t), r = n[e]; return void 0 === r ? a(t, e) : r }; e.forEach((function (e) { var n = l(e.source), o = l(e.target); i[o].has(n) && (o = a(e.target)), Yg.push({ source: n, target: o, value: e.value, type: "link", facet: t.name, metadata: e.metadata }); var s = r[n], u = i[o]; s.each((function (t) { u.each((function (e) { r[e].add(t), i[t].add(e) })) })) })) }(t), function (t) { rg().nodeId((function (t) { return t.identifier })).links(t.link_data).nodes(t.node_data).iterations(0)() }(t), $g.all_node_data = $g.all_node_data.concat(t.node_data), function (t) { let e = []; Bg.forEach((t => { e.push(t) })); const n = "ascending" === a.node_sort_order; if ("datasheet" === a.sorting_mode) if ("sankey" === a.mode) e.sort(Vg); else { const t = Math.max(...e.map((t => t.step))); let n = [], r = []; e.forEach((e => { e.step === t ? n.push(e) : r.push(e) })), r.sort(Vg), e = r.concat(n) } else "name" === a.sorting_mode ? e.sort(((t, e) => t.name < e.name ? n ? -1 : 1 : t.name > e.name ? n ? 1 : -1 : 0)) : "value" === a.sorting_mode && e.sort(((t, e) => n ? t.value - e.value : e.value - t.value)); t.node_data = e }(t) })), o.data.processed = !0 } function Zg(t, e) { return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN } function Qg(t) { let e = t, n = t; function r(t, e, r, i) { for (null == r && (r = 0), null == i && (i = t.length); r < i;) { const o = r + i >>> 1; n(t[o], e) < 0 ? r = o + 1 : i = o } return r } return 1 === t.length && (e = (e, n) => t(e) - n, n = function (t) { return (e, n) => Zg(t(e), n) }(t)), { left: r, center: function (t, n, i, o) { null == i && (i = 0), null == o && (o = t.length); const a = r(t, n, i, o - 1); return a > i && e(t[a - 1], n) > -e(t[a], n) ? a - 1 : a }, right: function (t, e, r, i) { for (null == r && (r = 0), null == i && (i = t.length); r < i;) { const o = r + i >>> 1; n(t[o], e) > 0 ? i = o : r = o + 1 } return r } } } const Jg = Qg(Zg).right; Qg((function (t) { return null === t ? NaN : +t })).center; var Kg = Math.sqrt(50), tb = Math.sqrt(10), eb = Math.sqrt(2); function nb(t, e, n) { var r = (e - t) / Math.max(0, n), i = Math.floor(Math.log(r) / Math.LN10), o = r / Math.pow(10, i); return i >= 0 ? (o >= Kg ? 10 : o >= tb ? 5 : o >= eb ? 2 : 1) * Math.pow(10, i) : -Math.pow(10, -i) / (o >= Kg ? 10 : o >= tb ? 5 : o >= eb ? 2 : 1) } function rb(t, e) { let n; for (const e of t) null != e && (n < e || void 0 === n && e >= e) && (n = e); return n } function ib(t, e) { let n; for (const e of t) null != e && (n > e || void 0 === n && e >= e) && (n = e); return n } function ob(t, e) { let n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : t.length - 1, i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : Zg; for (; r > n;) { if (r - n > 600) { const o = r - n + 1, a = e - n + 1, l = Math.log(o), s = .5 * Math.exp(2 * l / 3), u = .5 * Math.sqrt(l * s * (o - s) / o) * (a - o / 2 < 0 ? -1 : 1); ob(t, e, Math.max(n, Math.floor(e - a * s / o + u)), Math.min(r, Math.floor(e + (o - a) * s / o + u)), i) } const o = t[e]; let a = n, l = r; for (ab(t, n, e), i(t[r], o) > 0 && ab(t, n, r); a < l;) { for (ab(t, a, l), ++a, --l; i(t[a], o) < 0;)++a; for (; i(t[l], o) > 0;)--l } 0 === i(t[n], o) ? ab(t, n, l) : (++l, ab(t, l, r)), l <= e && (n = l + 1), e <= l && (r = l - 1) } return t } function ab(t, e, n) { const r = t[e]; t[e] = t[n], t[n] = r } function lb(t, e, n) { if (t = Float64Array.from(function* (t) { for (let e of t) null != e && (e = +e) >= e && (yield e) }(t)), r = t.length) { if ((e = +e) <= 0 || r < 2) return ib(t); if (e >= 1) return rb(t); var r, i = (r - 1) * e, o = Math.floor(i), a = rb(ob(t, o).subarray(0, o + 1)); return a + (ib(t.subarray(o + 1)) - a) * (i - o) } } function sb(t, e) { switch (arguments.length) { case 0: break; case 1: this.range(t); break; default: this.range(e).domain(t) }return this } function ub(t) { return +t } var cb = [0, 1]; function fb(t) { return t } function db(t, e) { return (e -= t = +t) ? function (n) { return (n - t) / e } : function (t) { return function () { return t } }(isNaN(e) ? NaN : .5) } function hb(t, e, n) { var r = t[0], i = t[1], o = e[0], a = e[1]; return i < r ? (r = db(i, r), o = n(a, o)) : (r = db(r, i), o = n(o, a)), function (t) { return o(r(t)) } } function pb(t, e, n) { var r = Math.min(t.length, e.length) - 1, i = new Array(r), o = new Array(r), a = -1; for (t[r] < t[0] && (t = t.slice().reverse(), e = e.slice().reverse()); ++a < r;)i[a] = db(t[a], t[a + 1]), o[a] = n(e[a], e[a + 1]); return function (e) { var n = Jg(t, e, 1, r) - 1; return o[n](i[n](e)) } } function gb() { var t, e, n, r, i, o, a = cb, l = cb, s = gn, u = fb; function c() { var t, e, n, s = Math.min(a.length, l.length); return u !== fb && (t = a[0], e = a[s - 1], t > e && (n = t, t = e, e = n), u = function (n) { return Math.max(t, Math.min(e, n)) }), r = s > 2 ? pb : hb, i = o = null, f } function f(e) { return null == e || isNaN(e = +e) ? n : (i || (i = r(a.map(t), l, s)))(t(u(e))) } return f.invert = function (n) { return u(e((o || (o = r(l, a.map(t), cn)))(n))) }, f.domain = function (t) { return arguments.length ? (a = Array.from(t, ub), c()) : a.slice() }, f.range = function (t) { return arguments.length ? (l = Array.from(t), c()) : l.slice() }, f.rangeRound = function (t) { return l = Array.from(t), s = bn, c() }, f.clamp = function (t) { return arguments.length ? (u = !!t || fb, c()) : u !== fb }, f.interpolate = function (t) { return arguments.length ? (s = t, c()) : s }, f.unknown = function (t) { return arguments.length ? (n = t, f) : n }, function (n, r) { return t = n, e = r, c() } } function bb(t, e, n, r) { var i, o = function (t, e, n) { var r = Math.abs(e - t) / Math.max(0, n), i = Math.pow(10, Math.floor(Math.log(r) / Math.LN10)), o = r / i; return o >= Kg ? i *= 10 : o >= tb ? i *= 5 : o >= eb && (i *= 2), e < t ? -i : i }(t, e, n); switch ((r = Ru(null == r ? ",f" : r)).type) { case "s": var a = Math.max(Math.abs(t), Math.abs(e)); return null != r.precision || isNaN(i = nc(o, a)) || (r.precision = i), Qu(r, a); case "": case "e": case "g": case "p": case "r": null != r.precision || isNaN(i = rc(o, Math.max(Math.abs(t), Math.abs(e)))) || (r.precision = i - ("e" === r.type)); break; case "f": case "%": null != r.precision || isNaN(i = ec(o)) || (r.precision = i - 2 * ("%" === r.type)) }return Zu(r) } function _b(t) { var e = t.domain; return t.ticks = function (t) { var n = e(); return function (t, e, n) { var r, i, o, a, l = -1; if (n = +n, (t = +t) == (e = +e) && n > 0) return [t]; if ((r = e < t) && (i = t, t = e, e = i), 0 === (a = nb(t, e, n)) || !isFinite(a)) return []; if (a > 0) { let n = Math.round(t / a), r = Math.round(e / a); for (n * a < t && ++n, r * a > e && --r, o = new Array(i = r - n + 1); ++l < i;)o[l] = (n + l) * a } else { a = -a; let n = Math.round(t * a), r = Math.round(e * a); for (n / a < t && ++n, r / a > e && --r, o = new Array(i = r - n + 1); ++l < i;)o[l] = (n + l) / a } return r && o.reverse(), o }(n[0], n[n.length - 1], null == t ? 10 : t) }, t.tickFormat = function (t, n) { var r = e(); return bb(r[0], r[r.length - 1], null == t ? 10 : t, n) }, t.nice = function (n) { null == n && (n = 10); var r, i, o = e(), a = 0, l = o.length - 1, s = o[a], u = o[l], c = 10; for (u < s && (i = s, s = u, u = i, i = a, a = l, l = i); c-- > 0;) { if ((i = nb(s, u, n)) === r) return o[a] = s, o[l] = u, e(o); if (i > 0) s = Math.floor(s / i) * i, u = Math.ceil(u / i) * i; else { if (!(i < 0)) break; s = Math.ceil(s * i) / i, u = Math.floor(u * i) / i } r = i } return t }, t } function mb() { var t = gb()(fb, fb); return t.copy = function () { return e = t, mb().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown()); var e }, sb.apply(t, arguments), _b(t) } const yb = vb("(prefers-reduced-motion: reduce)"); function vb(t) { if ("function" != typeof window.matchMedia) return () => !1; const e = window.matchMedia(t); let n = e.matches; return e.addEventListener("change", (t => { n = t.matches }), !1), function () { return n } } vb("(prefers-color-scheme: dark)"); var wb = {}; function xb(t) { var e = []; $g.all_node_data.forEach((function (t) { var n = a.label_show_values ? t.value : "", r = t.name + n; A_.append("text").attr("visibility", "hidden").text(r).attr("font-size", wb.font_size).attr("font-weight", a.label_bold ? "bold" : "normal").each((function () { e.push(this.getComputedTextLength() + (a.label_show_values ? wb.label_spacer : 0) + 2 * wb.outline_width), gt(this).remove() })) })); var n = a.label_outwards_max_width / 100 * t; wb.ignore_outwards = lb(e, .5) > n, wb.ignore_outwards || (wb.side_padding += Math.min((rb(e) || 0) + wb.label_spacer + 1, n)) } var kb = Object.freeze({ left: function (t) { return t.depth }, right: function (t, e) { return e - 1 - t.height }, center: function (t) { return t.targetLinks.length ? t.depth : t.sourceLinks.length ? Gf(t.sourceLinks, Yp) - 1 : 0 }, justify: Rp, column: function (t) { return t.column }, step: function (t) { return t.step_offset } }); const Mb = Object.freeze({ limit_top: -1 / 0, limit_right: 1 / 0, limit_bottom: 1 / 0, limit_left: -1 / 0, padding_top_bottom: 0, padding_left_right: 0 }); function Cb(t, e) { return !(t.bottom < e.top || t.top > e.bottom) && !(t.right < e.left || t.left > e.right) } var Ab, Eb, Tb = []; function Nb(t, e) { return (e = e || "label") + "-node-label-" + t.identifier } function Sb(t, e, n, r, i) { var o, a, l = { x0: (a = ((o = e) && o.select ? o.node() : o).getBBox()).x, x1: a.x + a.width, y0: a.y, y1: a.y + a.height }; return !(l.x0 < 0 || l.y0 < 0 || l.x1 > t.width || l.y1 > t.height) && (!(!i && !function (t, e, n) { var r = { x0: t.x0 - (e || 0), x1: t.x1 + (n || 0), y0: t.y0, y1: t.y1 }; return Tb.every((function (t) { return !!((e = r).x1 < (n = t).x0 || e.x0 > n.x1 || e.y1 < n.y0 || e.y0 > n.y1); var e, n })) }(l, n, r)) && l) } function Fb() { return a.label_outline ? a.layout.background_color : "none" } function zb(t) { return "none" == a.label_color_mode ? "none" : "auto" == a.label_color_mode ? jg(t.name) : a.label_color || a.layout.font_color } function Db(t) { var e = t.datum(); return t.append("tspan").attr("class", "node-label-name").text(e.name).style("fill", zb) } function Lb(t) { var e = t.datum(); return t.append("tspan").attr("class", "node-label-name shadow").text(e.name).style("fill", "none").style("stroke-width", wb.outline_width).style("stroke-linejoin", "round").style("stroke", Fb) } function $b(t) { var e = t.datum(); return t.append("tspan").attr("class", "node-label-value shadow").attr("x", t.attr("x")).text(a.label_show_values ? Ab(e.value) : null).attr("font-weight", "bold").style("fill", "none").style("stroke-width", wb.outline_width).style("stroke-linejoin", "round").style("stroke", Fb) } function Ob(t) { var e = t.datum(); return t.append("tspan").attr("class", "node-label-value").attr("x", t.attr("x")).attr("font-weight", "bold").text(a.label_show_values ? Ab(e.value) : null).style("fill", zb) } function Pb(t, e, n) { var r = e.datum(); e.text("").attr("text-anchor", "end").attr("font-weight", a.label_bold ? "bold" : "normal").attr("x", r.x0 - Eb - wb.outline_width), $b(e); var i = Ob(e), o = Lb(e), l = Db(e), s = i.node().getComputedTextLength(), u = parseFloat(e.attr("x")) - s - (s ? Eb : 0); return o.attr("x", u), l.attr("x", u), Sb(t, e, Eb + 1, 0, n) } function Ub(t, e, n) { var r = e.datum(); e.text("").attr("text-anchor", "start").attr("font-weight", a.label_bold ? "bold" : "normal").attr("x", r.x1 + Eb + wb.outline_width); var i = Lb(e), o = Db(e); $b(e); var l = Ob(e).node().getComputedTextLength(), s = parseFloat(e.attr("x")) + l + (l ? Eb : 0); return i.attr("x", s), o.attr("x", s), Sb(t, e, 0, Eb + 1, n) } function jb(t, e, n) { var r = gt(t.node).select(".link-labels").selectAll("text.link-label").data(e, (function (t) { return function (t, e) { return (e = e || "label") + "-link-label-" + t.source.identifier + "-" + t.target.identifier }(t) })); const i = r.enter().append("text").attr("class", "link-label").attr("id", (t => `link-${t.source.identifier}-${t.target.identifier}`)).attr("text-anchor", "middle").attr("dy", "0.4em").style("font-weight", "bold").style("fill", a.label_color_links || a.layout.font_color); i.append("tspan").attr("stroke", "white").attr("stroke-width", wb.outline_width).style("stroke-linejoin", "round"), i.append("tspan"), r.exit().remove(); const o = r.merge(i); o.style("font-size", (t => { const e = n == Vb(t, "base"); return "always" == a.label_show_values_links && !n || "never" !== a.label_show_values_links && e ? `${Sp.remToPx(a.label_font_size)}px` : "0px" })), o.each((function (e, r) { var i = document.getElementById(Vb(e, "base")), o = i.getPointAtLength(i.getTotalLength() / 2); gt(this).selectAll("tspan").attr("x", o.x).text((function (t) { return Ab(t.value) })); var a = gt(this).attr("x", o.x).attr("y", o.y); if (!n) { var l = Sb(t, a, 0, 0, !r && !!n); l ? Tb.push(l) : a.style("font-size", "0px") } })) } function Hb(t, e, n) { gt(t.node).select(".node-labels").selectAll("text.node-label").data(e, (function (t) { return Nb(t) })).enter().append("text").attr("class", "node-label").attr("id", (function (t) { return Nb(t) })).attr("dy", "0.4em").attr("y", (function (t) { return (t.y0 + t.y1) / 2 })).each((function (e, r) { var i, o = gt(this), l = "outwards" == a.label_mode && !wb.ignore_outwards; i = function (t) { return 0 == t.targetLinks.length }(e) ? l ? Pb(t, o) : Ub(t, o) : function (t) { return 0 == t.sourceLinks.length }(e) ? l ? Ub(t, o) : Pb(t, o) : Pb(t, o) || Ub(t, o), r || i || !n || (i = Pb(t, o, !0) || Ub(t, o, !0)), i ? Tb.push(i) : o.remove() })) } function qb(t) { gt(t.node).selectAll(".node-label, .link-label").remove() } function Bb(t, e) { const { node_data: n } = t.data, { link_data: r } = t.data; Eb = wb.label_spacer; let i, a = r; if (qp) Tb = e.nodes.slice(), i = e.nodes.slice(); else { var l = function (t, e) { return e.value - t.value }; Tb = n.slice(), i = n.slice().sort(l), a = r.sort(l) } Ab = Fp(o.data.metadata.value ? o.data.metadata.value.output_format_id : "number$none_point"), qp && "node" !== e.type ? (jb(t, a, qp), Hb(t, i)) : (Hb(t, i, !!qp), jb(t, a)) } function Yb(t) { let e = gt(`#highlight-${t}`).node(); if (!e) return null; const n = e && e.__data__, { data: r } = Rb(n, n.type, e); return "link" == n.type && (e = gt(`#${t}`).node()), [e, r] } function Rb(t, e, n, r) { let i, o; return ("none" == a.popup.mode || "node" == e && "links" == a.popup_type || "link" == e && "nodes" == a.popup_type) && !r || ("link" == e ? (o = { is_link: !0, is_node: !1, source: t.source.name, target: t.target.name, value: t.value, id: `${e}-${t.source.identifier}-${t.target.identifier}`, metadata: t.metadata, current_label: `${t.source.name} â†’ ${t.target.name}` }, i = gt(`#${o.id}`).node()) : (i = n, o = { is_link: !1, is_node: !0, name: t.name, value: t.value, id: `${e}-${t.identifier}`, current_label: `${t.name}` })), { node: i, data: o } } function Ib(t) { var e, n = function (t, e, n) { const r = e.type; let i = t ? t.id : null; i !== a.focus && "clear" != n || (i = null), M_({ snap: !0, focus: i, fix: "fix" == n }); const { node: o, data: l } = Rb(e, r, t); if (null != o && null != l) if (n) if ("fix" == n) { const t = l.id; Hp.locked() === t ? Hp.clickout() : Hp.click(o, l, t) } else "clear" == n && Hp.mouseout(); else Hp.mouseover(o, l) }; const r = "readable" === Sp.getPrimaryScreenReadability(); t.on("touchstart", (function (t) { e = !0, n(it.target, t, "fix") })).on("mouseenter", (function (t) { e || a.focus || n(this, t) })).on("focus", r ? function (t) { e || a.focus || n(this, t) } : null).on("mousedown", (function (t) { e || n(this, t, "fix") })).on("mouseleave", (function (t) { e || a.focus || n(this, t, "clear") })).on("keydown", (function (t) { "Enter" != it.key || e || n(this, t, "fix"), "Escape" != it.key || e || (n(this, t, "clear"), a.focus && Bp(null, !0), k_()) })).on("blur", r ? function (t) { e || a.focus || n(this, t, "clear") } : null).on("click", (function () { e = !1 })) } var Wb = !1, Gb = 0; function Vb(t, e) { return (e = e || "highlight") + "-link-" + t.source.identifier + "-" + t.target.identifier } var Xb = { base: function (t) { return Vb(t, "base") }, highlight: function (t) { return Vb(t, "highlight") } }; function Zb(t, e, n) { const r = a.links_color_mode || "node"; return "source" == r ? jg(t.name) : "target" == r ? jg(e.name) : function (t, e, n) { const r = jg(t.name), i = jg(e.name); if (r === i) return r; const o = `gradient-${n}-${t.index}-${e.index}`; if (!gt("#" + o).size()) { const t = E_.append("linearGradient").attr("id", o); t.attr("class", "facet-" + n), t.append("stop").attr("offset", "10%").attr("stop-opacity", a.link_opacity).attr("stop-color", r), t.append("stop").attr("offset", "90%").attr("stop-opacity", a.link_opacity).attr("stop-color", i) } return "url(#" + o + ")" }(t, e, n) } function Qb(t, e, n, r) { var i = Wb && jp.has_animated ? 0 : wb.intro_duration * (e.target.x0 - e.source.x1) / (t.width - wb.clip_start), o = Wb && jp.has_animated ? 0 : wb.xScale(e.source.x1), l = er.exponent(1 + (Gb = (9301 * Gb + 49297) % 233280) / 233280 * a.intro_ease_range / 50), s = r.getTotalLength(); gt(r).style("opacity", 0).transition("dash").duration(0).delay(1).style("opacity", null).attr("stroke-dasharray", s + "," + s).attr("stroke-dashoffset", s).transition("dash").duration(i).delay(o).ease(l).attr("stroke-dashoffset", 0).transition("dash").duration(0).attr("stroke-dasharray", null) } function Jb(t, e, n, r) { Wb = t.node.__store("filter" + n, a.filter); var i = 1 / window.devicePixelRatio, o = Xb[n], l = e.selectAll(".link").data(r, o); l.exit().remove(); var s = l.enter().append("path").attr("id", (function (t) { return Vb(t, n) })).attr("class", "link").attr("fill", "none").style("stroke-width", (function (t) { return Math.max(t.width, i) + "px" })).attr("d", wg()).each((function (e, r) { "highlight" !== n && Qb(t, e, 0, this) })); "base" === n && s.style("pointer-events", "all"); var u = s.merge(l); Ib(u), u.style("stroke-opacity", (function (t) { return jg(t.source.name) === jg(t.target.name) || "source" == a.links_color_mode || "target" == a.links_color_mode ? a.link_opacity : null })).style("stroke", (function (e) { return Zb(e.source, e.target, t.data.index) })).style("visibility", null).attr("role", "img").attr("aria-roledescription", "data point").attr("aria-label", (t => { const { data: e } = Rb(t, "link", this, !0); return Hp.getAccessiblePopupContent(e) })).attr("tabindex", "readable" == Sp.getPrimaryScreenReadability() ? "0" : null) } function Kb(t, e, n) { var r = 1 / window.devicePixelRatio, i = t.selectAll(".link"), o = i.size(), a = 0; 0 !== o ? (i.transition().duration(e).style("stroke-width", (function (t) { return Math.max(t.width, r) + "px" })).attr("d", wg()).on("end", (function () { n && ++a === o && n(null, !0) })).on("interrupt", (function () { n && n(null, !1) })), $t()) : n && n(null) } function t_(t, e) { E_.selectAll(".facet-" + t.data.index).remove(), Jb(t, gt(t.node).select(".base-layer .links"), "base", t.data.link_data), Jb(t, gt(t.node).select(".highlight-layer .links"), "highlight", e) } function e_(t, e, n) { Kb(gt(t.node).select(".base-layer .links"), e, n), Kb(gt(t.node).select(".highlight-layer .links"), e) } function n_(t, e) { return (e = e || "highlight") + "-node-" + t.identifier } var r_ = { base: function (t) { return n_(t, "base") }, highlight: function (t) { return n_(t, "highlight") } }; function i_(t, e, n) { var r = r_[e], i = t.selectAll(".node").data(n, r); i.exit().remove(); var o = i.enter().append("rect").attr("id", (function (t) { return n_(t, e) })).attr("class", "node").style("shape-rendering", "crispEdges").attr("x", (function (t) { return t.x0 })).attr("y", (function (t) { return t.y0 })).attr("width", (function (t) { return t.x1 - t.x0 })).attr("height", (function (t) { return Math.max(t.y1 - t.y0, 0) })).style("fill", (function (t) { return jg(t.name) })); "base" === e && o.style("pointer-events", "all"); var l = o.merge(i); Ib(l), l.style("fill", (function (t) { return a?.custom_node_color ? a.custom_node_color : jg(t.name) })).style("visibility", null).attr("role", "img").attr("aria-roledescription", "data point").attr("aria-label", (t => { const { data: e } = Rb(t, "node", this, !0); return Hp.getAccessiblePopupContent(e) })).attr("tabindex", "readable" == Sp.getPrimaryScreenReadability() ? "0" : null) } function o_(t, e, n) { var r = t.selectAll(".node"), i = r.size(), o = 0; 0 !== i ? (r.transition().duration(e).attr("x", (function (t) { return t.x0 })).attr("y", (function (t) { return t.y0 })).attr("width", (function (t) { return t.x1 - t.x0 })).attr("height", (function (t) { return Math.max(t.y1 - t.y0, 0) })).on("end", (function () { n && ++o === i && n(null, !0) })).on("interrupt", (function () { n && n(null, !1) })), $t()) : n && n(null) } function a_(t, e) { i_(gt(t.node).select(".base-layer .nodes"), "base", t.data.node_data), i_(gt(t.node).select(".highlight-layer .nodes"), "highlight", e) } function l_(t, e, n) { o_(gt(t.node).select(".base-layer .nodes"), e, n), o_(gt(t.node).select(".highlight-layer .nodes"), e) } function s_(t, e, n) { qp ? function (t, e, n) { const r = gt(t.node); r.select(".base-layer").interrupt().transition().duration(e).style("opacity", a.background_opacity).on("end", (function () { n && n(null, !0) })).on("interrupt", (function () { n && n(null, !1) })), r.select(".highlight-layer").style("opacity", 1), $t() }(t, e, n) : function (t, e, n) { const r = gt(t.node); r.select(".base-layer").interrupt().transition().duration(e).style("opacity", 1).on("end", (function () { r.select(".highlight-layer").style("opacity", 0), n && n(null, !0) })).on("interrupt", (function () { n && n(null, !1) })), $t() }(t, e, n) } var u_ = [].slice, c_ = {}; function f_(t) { this._size = t, this._call = this._error = null, this._tasks = [], this._data = [], this._waiting = this._active = this._ended = this._start = 0 } function d_(t) { if (!t._start) try { !function (t) { for (; t._start = t._waiting && t._active < t._size;) { var e = t._ended + t._active, n = t._tasks[e], r = n.length - 1, i = n[r]; n[r] = h_(t, e), --t._waiting, ++t._active, n = i.apply(null, n), t._tasks[e] && (t._tasks[e] = n || c_) } }(t) } catch (e) { if (t._tasks[t._ended + t._active - 1]) p_(t, e); else if (!t._data) throw e } } function h_(t, e) { return function (n, r) { t._tasks[e] && (--t._active, ++t._ended, t._tasks[e] = null, null == t._error && (null != n ? p_(t, n) : (t._data[e] = r, t._waiting ? d_(t) : g_(t)))) } } function p_(t, e) { var n, r = t._tasks.length; for (t._error = e, t._data = void 0, t._waiting = NaN; --r >= 0;)if ((n = t._tasks[r]) && (t._tasks[r] = null, n.abort)) try { n.abort() } catch (e) { } t._active = NaN, g_(t) } function g_(t) { if (!t._active && t._call) { var e = t._data; t._data = void 0, t._call(t._error, e) } } function b_(t) { if (null == t) t = 1 / 0; else if (!((t = +t) >= 1)) throw new Error("invalid concurrency"); return new f_(t) } function __(t, e) { t_(t, e.links), a_(t, e.nodes) } function m_(t, e) { e.sankey_changed ? function (t, e) { qb(t), __(t, e); var n = e.snap || e.mode_changed ? 0 : e.duration; b_().defer(e_, t, n).defer(l_, t, n).await((function (n, r, i) { if (n) throw n; r && i && (Bb(t, e), e.sankey_changed = !1, m_(t, e)) })) }(t, e) : e.focus_changed && (qp ? function (t, e) { qb(t), Bb(t, e), __(t, e), s_(t, e.duration) }(t, e) : function (t, e) { qb(t), Bb(t, e), b_().defer(s_, t, e.duration).await((function (n, r) { if (n) throw n; r && __(t, e) })) }(t, e)) } f_.prototype = b_.prototype = { constructor: f_, defer: function (t) { if ("function" != typeof t) throw new Error("invalid callback"); if (this._call) throw new Error("defer after await"); if (null != this._error) return this; var e = u_.call(arguments, 1); return e.push(t), ++this._waiting, this._tasks.push(e), d_(this), this }, abort: function () { return null == this._error && p_(this, new Error("abort")), this }, await: function (t) { if ("function" != typeof t) throw new Error("invalid callback"); if (this._call) throw new Error("multiple await"); return this._call = function (e, n) { t.apply(null, [e].concat(n)) }, g_(this), this }, awaitAll: function (t) { if ("function" != typeof t) throw new Error("invalid callback"); if (this._call) throw new Error("multiple await"); return this._call = t, g_(this), this } }; const y_ = 4; function v_(t, e) { var n = e.value - t.value; return n || (t.type === e.type ? t.index - e.index : "node" === t.type ? -1 : 1) } function w_(t) { if (t.data.node_data.length && a.show_node_headings && "alluvial" === a.mode) { const e = ki(o.data, "step_from"), n = ki(o.data, "step_to"), r = 0 !== e.length || 0 !== n.length; if (r) { const r = [...e, ...n]; t.data.node_headers = Array.from(new Set(r)) } else { const e = o.data.column_names.source, n = o.data.column_names.target; t.data.node_headers = [e, n] } const i = {}; t.data.node_data.forEach((t => i[t.step] = t.x0)); const l = t.data.node_headers.map(((e, n) => { let o = "middle"; 0 === n && (o = "start"), n + 1 === t.data.node_headers.length && (o = "end"); return { value: e, x_coordinate: r ? i[e] : i[n], position: o } })), s = gt(t.node).select(".node_headings").selectAll("text").data(l), u = s.enter().append("text").merge(s), c = Sp.remToPx(a.node_headings_font_size), f = 1.2 * c, d = Sp.remToPx(a.node_headings_padding), h = function () { let t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const e = Object.assign({}, Mb, t), n = [], r = function (t) { if (!t || !t.getBoundingClientRect) return !0; const r = t.getBoundingClientRect(); if (r.top < e.limit_top || r.bottom > e.limit_bottom) return !0; if (r.left < e.limit_left || r.right > e.limit_right) return !0; for (const t of n) if (Cb(r, t)) return !0; return n.push({ top: r.top - e.padding_top_bottom, right: r.right + e.padding_left_right, bottom: r.bottom + e.padding_top_bottom, left: r.left - e.padding_left_right }), !1 }; return function (t) { return t && t.getBoundingClientRect ? r(t) : (Array.isArray(t) || (t = Array.from(t)), t.map(r)) } }(); let p = 0; return u.style("pointer-events", "none").each((function (t) { const e = xi(t.value, `${c}px ${a.layout.body_font.name}`, y_, Sp.remToPx(a.node_headings_max_width)); p = Math.max(p, e.length); const n = gt(this).selectAll("tspan").data(e); n.join("tspan").text((function (t) { return function (t) { const e = (a.node_headings_overrides || "").split("\n"), n = new Map; for (let t = 0; t < e.length; ++t) { const r = e[t].match(/\s*(\S.*?)\s*::\s*(\S.*?)\s*$/); r && n.set(r[1], r[2]) } return n.get(t.toString()) || t }(t) })).attr("y", (function (t, e) { return e * f + "px" })).attr("x", 0).style("font-weight", a.node_headings_bold ? "bold" : "normal").style("font-size", c).style("fill", a.node_headings_color || a.layout.font_color), n.exit().remove() })).style("text-anchor", (t => t.position)).attr("transform", (t => { let e = 0; "end" === t.position && (e = a.node_width), "middle" === t.position && (e = a.node_width / 2); const n = f + d; return `translate(${t.x_coordinate + e},${n})` })).style("visibility", (function () { return a.node_headings_hide_overlaps && h(this) ? "hidden" : null })), s.exit().remove(), p * f + 2 * d } return gt(t.node).select(".node_headings").selectAll("text").remove(), 0 } function x_(t, e) { "__store" in t.node || (t.node.__store = Tg()); var n = function (t) { if (!qp) return { links: [], nodes: [] }; for (var e, n, r, i = 0; i < t.data.node_data.length; i++)if ("base-node-" + t.data.node_data[i].identifier == qp) { e = t.data.node_data[i]; break } if (!e) for (i = 0; i < t.data.link_data.length; i++)if ("base-link-" + t.data.link_data[i].source.identifier + "-" + t.data.link_data[i].target.identifier == qp) { e = t.data.link_data[i]; break } if (!e) return { links: [], nodes: [] }; if ("link" === e.type) n = [e], r = [e.source, e.target].sort(v_); else { n = e.sourceLinks.concat(e.targetLinks).slice().sort(v_); var o = e.targetLinks.map((function (t) { return t.source })), a = e.sourceLinks.map((function (t) { return t.target })); (r = o.concat(a).sort(v_)).unshift(e) } return { nodes: r, links: n, highlights: !0, type: e.type } }(t), r = n; r.mode_changed = t.node.__store("mode", a.mode), r.sankey_changed = t.node.__store("sankey", t.data._sankey), r.focus_changed = t.node.__store("focus", qp), r.snap = e, r.duration = yb() ? 0 : 1e3 * a.transition_duration, r.mode_changed || r.sankey_changed || r.focus_changed ? m_(t, r) : (qb(t), t_(t, n.links), a_(t, n.nodes), s_(t, 0), Bb(t, r)) } function k_() { M_() } function M_() { let { snap: t = null, focus: e = null, fix: n = null, should_update_controls: r = !0 } = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; var i, l; r && function () { var t = []; if (o.data.metadata.filter) { const e = o.data.metadata.filter.type, n = o.data.metadata.filter.output_format_id, r = ("number" == e ? Fp : Cc)(n), i = new Set; o.data.forEach((function (t) { let n = "datetime" === e ? Date.parse(t.filter) : t.filter, o = r(n); i.add(o), t.filter_display = o })), (t = Array.from(i)).length && (a.filter_show_all ? t.unshift(a.filter_show_all_text) : "" === a.filter && (a.filter = t[0], M_({ should_update_controls: !1 }))) } Lp.options(t).update(), $p.update(), Op.update(), Pp.update(), Up.update(), Dp.update() }(), Sp.update(), Bp(e || a.focus, n), Xg(), i = [...ki(o.data, "source"), ...ki(o.data, "target")], l = Array.from(i), zp.updateColorScale(l), jg = zp.getColor, function (t) { let e = Flourish.fixed_height || "standard" == a.height_mode; if (jp.width(Sp.getPrimaryWidth()).height(e ? Sp.getDefaultPrimaryHeight() : null).facetAspect(e ? null : a.facet_aspect).data($g, (t => t.name)).duration(0).autoTitleAlign((function () { return "center" })).update(), function (t) { wb.side_padding = 0, wb.font_size = Sp.remToPx(a.label_font_size), o.data.column_names.facet && a.label_facet_scaling && (wb.font_size = Math.max(wb.font_size, t / 500)), wb.outline_width = a.label_outline ? wb.font_size * a.label_outline_width / 100 : 0, wb.label_spacer = .25 * wb.font_size, "outwards" == a.label_mode && xb(t), A_.attr("font-size", wb.font_size), wb.intro_duration = yb() ? 0 : 1e3 * a.intro_duration, wb.clip_start = wb.side_padding + a.node_width + 1, wb.xScale = mb().range([0, wb.intro_duration]).domain([wb.clip_start, t]) }(jp.facetWidth()), Flourish.fixed_height) Sp.setHeight(), C_(null); else { var n = "aspect" == a.height_mode ? jp.height() : Sp.getDefaultPrimaryHeight(); C_(n), Sp.setHeight(n) } jp.update((function (e, n) { const r = gt(e.node); !function (t, e) { const n = t.selectAll(".facet-wrapper").data([e]), r = n.enter().append("g").attr("class", "facet-wrapper"); r.append("clipPath").append("rect"), r.append("g").attr("class", "node_headings"); const i = r.append("g").attr("class", "base-layer"); i.append("g").attr("class", "links"), i.append("g").attr("class", "nodes"); const o = r.append("g").attr("class", "highlight-layer").style("pointer-events", "none"); o.append("g").attr("class", "links"), o.append("g").attr("class", "nodes"); const l = r.append("g").attr("class", "label-layer").style("pointer-events", "none"); l.append("g").attr("class", "node-labels"), l.append("g").attr("class", "link-labels"); const s = t.merge(r); s.select("clipPath").attr("id", `clip-${e}`), s.select(".base-layer").style("opacity", a.focus ? a.background_opacity : 1), s.select(".base-layer .nodes").attr("clip-path", "url(#clip-" + e + ")"), s.select(".highlight-layer").style("opacity", a.focus ? 1 : 0), s.select(".node-labels").attr("clip-path", "url(#clip-" + e + ")"), s.select(".link-labels").attr("clip-path", "url(#clip-" + e + ")") }(r, n), function (t, e) { "__sankey_store" in t.node || (t.node.__sankey_store = Tg()); var n = t.node.__sankey_store, r = null; if ("alluvial" === a.mode && (r = "column" === a.spread ? qg.length : Math.max(qg[qg.length - 1], null === a.end ? -1 / 0 : a.end_step) + 1 - qg[0]), n("side_padding", wb.side_padding), n("width", t.width), n("height", t.height), n("link_data", t.data.link_data), n("node_data", t.data.node_data), n("node_width", a.node_width), n("node_padding", a.node_padding), n("alignment", kb["alluvial" === a.mode ? a.spread : a.alignment]), n("node_depth", r), n("sorting_mode", a.sorting_mode), n("node_sort_order", a.node_sort_order), n("iterations", a.iterations), n("node_headings_size", e), !n()) return !1; var i = [wb.side_padding, a.top_padding + e], o = [t.width - wb.side_padding, t.height - a.bottom_padding]; t.data._sankey = rg().extent([i, o]).nodeId((function (t) { return t.identifier })).links(t.data.link_data).nodes(t.data.node_data).nodeWidth(a.node_width).nodePadding(a.node_padding).nodeAlign(n.alignment).nodeDepth(r).iterations("reduce_overlaps" === a.sorting_mode ? a.iterations : 0)() }(e, w_(e)), w_(e), x_(e, t), function (t, e) { jp.__has_animated ? t.select("clipPath rect").attr("width", jp.facetWidth()).attr("height", e) : t.select("clipPath rect").attr("height", e).attr("width", wb.clip_start).transition().duration(wb.intro_duration).ease(tr).attr("width", jp.facetWidth()).on("end", (function () { jp.__has_animated = !0 })) }(r, e.height) })) }(t), function () { let t = { ...o.data.column_names, current_label: "LABEL", current_value: "VALUE", is_link: "IS_LINK", is_node: "IS_NODE" }; null == o.data.column_names.value && (t.value = "Value"); const e = Object.assign({}, o.data.metadata); e.value = t => Ab(t), Hp.getLockedPosition(Yb).setColumnNames(t).hideColumnNames(["current_value", "is_link", "is_node", "source", "target"]).titleKey("current_label").setFormatters(e).update() }() } function C_(t) { A_.attr("width", Math.max(Sp.getPrimaryWidth(), 1)).attr("height", Math.max(t || Sp.getPrimaryHeight(), 1)).attr("font-family", a.layout.body_font.name) } var A_, E_, T_; return t.data = o, t.draw = function () { var t; t = gt(Sp.getSection("primary")).append("div").attr("class", "svg-container"), A_ = t.append("svg").attr("id", "graphic").on("mousedown", (function () { var t = gt(it.target); t.classed("node") || t.classed("link") || (Hp.clickout(), Bp(null, !0), k_()) })), E_ = A_.append("defs"), T_ = A_.append("g").attr("class", "facets"), Bp(a.focus), Dp.appendTo(Sp.getSection("controls")).add([Lp]), Lp.on("change", (function (t) { var e = t === a.filter_show_all_text ? "" : t; a.filter = e, M_() })), jp.appendTo(T_.node()), jp.__has_animated = !1, Sp.awaitFonts(M_); var e = window.innerWidth; window.addEventListener("resize", (function () { e != window.innerWidth && (function (t) { return "string" == typeof t ? new ht([document.querySelectorAll(t)], [document.documentElement]) : new ht([null == t ? [] : t], dt) }(".link").attr("stroke-dasharray", null), jp.__has_animated = !0, M_({ snap: !0 })), e = window.innerWidth })) }, t.state = a, t.update = k_, t
        }({});
        //# sourceMappingURL=template.js.map
    </script>
    <script src="https://public.flourish.studio/resources/v3/embedded.js"></script>
    <script>
        function _Flourish_unflattenInto(dest, src) {
            dest = dest || {};
            for (var k in src) {
                var t = dest;
                for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i + 1)) {
                    var s = k.substring(p, i);
                    if (!(s in t)) t[s] = {};
                    t = t[s];
                }
                t[k.substring(p)] = src[k];
            }
            return dest;
        }
        var _Flourish_settings = { "alignment": "right", "bottom_padding": 12, "color.categorical_extend": false, "color.categorical_palette": ["#faff00", "#81e759", "#00c485", "#009b96", "#007184", "#2f4858"], "facet_aspect": 2.31, "formatting.advanced": false, "formatting.show_positive_sign": false, "formatting.suffix": " Tg", "height_mode": "aspect", "iterations": 11, "label_bold": true, "label_font_size": 0.7, "label_outline": true, "label_outline_width": 32, "label_show_values": false, "label_show_values_links": "focused", "layout.background_color_enabled": false, "layout.background_image_enabled": false, "layout.body_font": { "name": "Canva Sans Variable", "url": "https://public.flourish.studio/resources/fonts/canva-sans.css" }, "layout.header_align": "center", "layout.header_text": "", "layout.header_text_size": "custom", "layout.header_text_size_custom": 1.2, "layout.header_text_styling": false, "layout.space_between_sections": "1", "layout.title": "", "links_color_mode": "node", "mode": "sankey", "node_padding": 10, "node_sort_order": "ascending", "node_width": 20, "popup.mode": "popup", "popup.popup_is_custom": false, "popup.show_popup_styles": false, "setup_settings": true, "sorting_mode": "datasheet", "top_padding": 12, "layout.footer_logo_enabled": false, "layout.header_logo_enabled": false };
        _Flourish_unflattenInto(window.template.state, _Flourish_settings);

        var _Flourish_data_column_names = { "data": { "metadata": ["Note"], "source": "Source", "target": "Dest", "value": "Value" } },
            _Flourish_data_metadata = { "data": { "metadata": [{ "type": "string", "type_id": "string$arbitrary_string", "output_format_id": "string$arbitrary_string" }], "source": { "type": "string", "type_id": "string$arbitrary_string", "output_format_id": "string$arbitrary_string" }, "target": { "type": "string", "type_id": "string$arbitrary_string", "output_format_id": "string$arbitrary_string" }, "value": { "type": "number", "type_id": "number$comma_point", "output_format_id": "number$comma_point" } } },
            _Flourish_data_timestamps = { "data": { "last_updated": new Date(1767012922749) } },
            _Flourish_data = { "data": [{ "metadata": [""], "source": "PÅ™Ã­rodnÃ­ a nepÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "MokÅ™ady a vnitrozemnÃ­ sladkovodnÃ­ oblasti", "value": 251 }, { "metadata": [""], "source": "PÅ™Ã­rodnÃ­ a nepÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "GeologickÃ¡ aktivita (suchozemskÃ¡)", "value": 38 }, { "metadata": [""], "source": "PÅ™Ã­rodnÃ­ a nepÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "Termiti", "value": 10 }, { "metadata": [""], "source": "PÅ™Ã­rodnÃ­ a nepÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "GeologickÃ¡ aktivita (moÅ™skÃ¡)", "value": 7 }, { "metadata": [""], "source": "PÅ™Ã­rodnÃ­ a nepÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "MoÅ™skÃ¡ organickÃ¡ aktivita", "value": 5 }, { "metadata": [""], "source": "PÅ™Ã­rodnÃ­ a nepÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "DivokÃ¡ zvÄ›Å™", "value": 2 }, { "metadata": [""], "source": "PÅ™Ã­rodnÃ­ a nepÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "TavenÃ­ permafrostu", "value": 1 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "HospodÃ¡Å™skÃ¡ zvÄ›Å™ a pÅ™eÅ¾vÃ½kavci", "value": 117 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "Ropa a plyn", "value": 74 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "SklÃ¡dky a odpad", "value": 71 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "TÄ›Å¾ba uhlÃ­", "value": 41 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "PÄ›stovÃ¡nÃ­ rÃ½Å¾e", "value": 32 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "PÃ¡lenÃ­ biomasy", "value": 17 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "PÃ¡lenÃ­ biopaliv", "value": 10 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "PrÅ¯mysl", "value": 5 }, { "metadata": [""], "source": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "target": "Doprava", "value": 2 }, { "metadata": ["PatÅ™ili by sem i lesnÃ­ poÅ¾Ã¡ry nebo methan vytvÃ¡Å™en flÃ³rou, avÅ¡ak nejsou zapoÄteny pro zabrÃ¡nÄ›nÃ­ dvojÃ­mu zapoÄtenÃ­ do jinÃ½ch kategoriÃ­ch."], "source": "CelkovÃ© emise", "target": "PÅ™Ã­rodnÃ­ a nepÅ™Ã­mÃ© antropogenÃ­ zdroje", "value": 314 }, { "metadata": [""], "source": "CelkovÃ© emise", "target": "PÅ™Ã­mÃ© antropogenÃ­ zdroje", "value": 369 }] },
            _Flourish_visualisation_id = 27007379,
            _Flourish_visualisation_version_number = 221,
            _Flourish_template_id = 91592;
        for (var _Flourish_dataset in _Flourish_data) {
            window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
            window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
            window.template.data[_Flourish_dataset].metadata = _Flourish_data_metadata[_Flourish_dataset];
            window.template.data[_Flourish_dataset].timestamps = _Flourish_data_timestamps[_Flourish_dataset];
        }

        window.template.metadata = { "visualization_title": null };


        window.template.draw();
    </script>
</body>

</html>